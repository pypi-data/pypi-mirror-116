!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=n(2);function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=f(t);if(e){var r=f(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return a(this,n)}}function a(t,n){return!n||"object"!==e(n)&&"function"!=typeof n?l(t):n}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=window.React,p=window.draftail,y=window.DraftJS.Modifier,d=window.DraftJS.EditorState,b=window.$,h=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(s,e);var n,r,a,f=c(s);function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=f.call(this,t)).onChosen=e.onChosen.bind(l(e)),e.onClose=e.onClose.bind(l(e)),e}return n=s,(r=[{key:"componentWillMount",value:function(){var e=this.props,n=e.onClose,r=e.editorState;b(document.body).on("hidden.bs.modal",this.onClose),this.workflow=t.ModalWorkflow({url:"/admin/reoako-modal/",onload:{browse:function(e,n){var i=b(".search-form #id_q",e.body);i.attr("autocomplete","off"),t.PAGE_CHOOSER_MODAL_ONLOAD_HANDLERS.browse(e,n);var u=(0,o.getSelectionText)(r);u&&i.val(u).trigger("input"),setTimeout((function(){return i.eq(0).focus()}),600)}},responses:{pageChosen:this.onChosen},onError:function(t){console.log(t),n()}})}},{key:"componentWillUnmount",value:function(){this.workflow=null,b(document.body).off("hidden.bs.modal",this.onClose)}},{key:"onChosen",value:function(t){var e=this.props,n=e.editorState,o=e.entityType,r=e.onComplete,i=n.getSelection(),u=t.reoakoTranslation,c=n.getCurrentContent(),a=c.createEntity(o.type,"MUTABLE",t).getLastCreatedEntityKey(),l=y.replaceText(c,i,u,null,a);r(d.push(n,l,"insert-characters"))}},{key:"onClose",value:function(){var t=this.props.onClose;t()}},{key:"render",value:function(){return null}}])&&i(n.prototype,r),a&&i(n,a),s}(s.Component),g=s.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0, 0, 1024, 1024",width:"1em",height:"1em",style:{verticalAlign:"middle",marginRight:"2px"}},s.createElement("path",{d:"M18.2822 114.286C18.2822 68.8406 55.1228 32 100.568 32H923.425C968.87 32 1005.71 68.8406 1005.71 114.286V813.714C1005.71 859.159 968.87 896 923.425 896H622.845L536.183 996.068C523.422 1010.8 500.564 1010.8 487.804 996.068L401.142 896H100.568C55.1228 896 18.2822 859.159 18.2822 813.714V672H443.593V524H443.59V430H443.593V301.438H509.406C565.752 301.438 593.024 325.719 593.024 370.344C593.024 414.75 565.752 437.062 509.856 437.062H444.59V513.188H514.815L602.265 672H710L611.957 497.875C664.472 476 693.547 431.594 693.547 370.344C693.547 281.312 632.918 224 528.113 224H346V671H18.2822V114.286Z",fill:"currentColor"}));window.draftail.registerPlugin({type:"REOAKO",source:h,decorator:function(t){var e=t.entityKey,n=t.contentState,o=t.children,i=n.getEntity(e).getData();return s.createElement(p.TooltipEntity,r({},t,{label:"".concat(i.reoakoTranslation," (").concat(i.reoakoHeadword,")"),icon:g}),o)}})}).call(this,n(1))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSelectionText=void 0;e.getSelectionText=function(t){var e=t.getSelection(),n=e.getAnchorOffset(),o=e.getFocusOffset(),r=function(t){var e=t.getSelection(),n=t.getCurrentContent(),o=e.getStartKey(),r=e.getEndKey(),i=n.getBlockMap();return i.toSeq().skipUntil((function(t,e){return e===o})).takeUntil((function(t,e){return e===r})).concat([[r,i.get(r)]]).toList()}(t);if(e.getIsBackward()){var i=n;n=o,o=i}for(var u="",c=0;c<r.size;c+=1){var a=0===c?n:0,l=c===r.size-1?o:r.get(c).getText().length;u+=r.get(c).getText().slice(a,l)}return u}}]);