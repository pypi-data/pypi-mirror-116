<!DOCTYPE HTML>

<!-- BEGIN html -->
<html lang="en-US">

<!-- BEGIN head -->
<head>
	<!-- Charset -->
    <meta charset="UTF-8">

	<!-- Description -->
    <meta name="description" content="BNIA - Baltimore Neighborhood Indicators Alliance, Providing reliable, actionable quality of life indicators for Baltimore’s neighborhoods">
	
	<!-- Keywords -->
	<meta name="keywords" content="BNIA - Baltimore Neighborhood Indicators Alliance, Providing reliable, actionable quality of life indicators for Baltimore’s neighborhoods">

	<!-- Author -->
	<meta name="author" content="BNIA &#8211; Baltimore Neighborhood Indicators Alliance">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
	
	<!-- RSS -->
	<link rel="alternate" type="application/rss+xml" title="BNIA &#8211; Baltimore Neighborhood Indicators Alliance RSS Feed" href="http://bniajfi.org/feed/" />
	<link rel="alternate" type="application/rss+xml" title="BNIA &#8211; Baltimore Neighborhood Indicators Alliance Comments Feed" href="http://bniajfi.org/comments/feed/" />
	
	<!-- Pingbacks -->
	<link rel="pingback" href="http://bniajfi.org/xmlrpc.php" />
	
	<!-- Favicon -->
		
	<!-- Title -->
	<title>
	BNIA &#8211; Baltimore Neighborhood Indicators Alliance	</title>
	
	<!-- Stylesheets -->
	<link rel="stylesheet" type="text/css" href="http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/style.css" />
	
    <!--[if lt IE 9]><script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script><![endif]-->
	
		
	<!-- Theme Hook -->
	<script>(function(d, s, id){
				 var js, fjs = d.getElementsByTagName(s)[0];
				 if (d.getElementById(id)) {return;}
				 js = d.createElement(s); js.id = id;
				 js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.6";
				 fjs.parentNode.insertBefore(js, fjs);
			   }(document, 'script', 'facebook-jssdk'));</script><link rel='dns-prefetch' href='//platform.twitter.com' />
<link rel='dns-prefetch' href='//w.sharethis.com' />
<link rel='dns-prefetch' href='//ajax.googleapis.com' />
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//maxcdn.bootstrapcdn.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="BNIA - Baltimore Neighborhood Indicators Alliance &raquo; Feed" href="http://bniajfi.org/feed/" />
<link rel="alternate" type="application/rss+xml" title="BNIA - Baltimore Neighborhood Indicators Alliance &raquo; Comments Feed" href="http://bniajfi.org/comments/feed/" />
<link rel="alternate" type="text/calendar" title="BNIA - Baltimore Neighborhood Indicators Alliance &raquo; iCal Feed" href="http://bniajfi.org/events/?ical=1" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.4\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.4\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/bniajfi.org\/wp-includes\/js\/wp-emoji-release.min.js?ver=2483f238954e7cae2cd4dcb43c59bf93"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55357,56692,8205,9792,65039],[55357,56692,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='login-with-ajax-css'  href='http://bniajfi.org/wp-content/plugins/login-with-ajax/widget/widget.css?ver=3.1.7' type='text/css' media='all' />
<link rel='stylesheet' id='wpa-css-css'  href='http://bniajfi.org/wp-content/plugins/wp-attachments/styles/0/wpa.css?ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='jquery-style-css'  href='http://bniajfi.org/wp-content/plugins/wordpress-creation-kit-pro/wordpress-creation-kit-api/assets/datepicker/datepicker.css?ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='wp-color-picker-css'  href='http://bniajfi.org/wp-admin/css/color-picker.min.css?ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='wck-colorpicker-style-css'  href='http://bniajfi.org/wp-content/plugins/wordpress-creation-kit-pro/wordpress-creation-kit-api/assets/colorpicker/colorpicker.css?ver=1.0' type='text/css' media='all' />
<link rel='stylesheet' id='tribe-common-skeleton-style-css'  href='http://bniajfi.org/wp-content/plugins/the-events-calendar/common/src/resources/css/common-skeleton.min.css?ver=4.12.5' type='text/css' media='all' />
<link rel='stylesheet' id='tribe-tooltip-css'  href='http://bniajfi.org/wp-content/plugins/the-events-calendar/common/src/resources/css/tooltip.min.css?ver=4.12.5' type='text/css' media='all' />
<link rel='stylesheet' id='default-css'  href='http://bniajfi.org/wp-content/plugins/ajax-wp-query-search-filter/classes/scripts/default.css?ver=all' type='text/css' media='all' />
<link rel='stylesheet' id='bbp-default-css'  href='http://bniajfi.org/wp-content/plugins/bbpress/templates/default/css/bbpress.css?ver=2.5.14-6684' type='text/css' media='screen' />
<link rel='stylesheet' id='bp-legacy-css-css'  href='http://bniajfi.org/wp-content/plugins/buddypress/bp-templates/bp-legacy/css/buddypress.min.css?ver=3.1.0' type='text/css' media='screen' />
<link rel='stylesheet' id='contact-form-7-css'  href='http://bniajfi.org/wp-content/plugins/contact-form-7/includes/css/styles.css?ver=5.0.2' type='text/css' media='all' />
<link rel='stylesheet' id='ctf_styles-css'  href='http://bniajfi.org/wp-content/plugins/custom-twitter-feeds/css/ctf-styles.css?ver=1.2.9' type='text/css' media='all' />
<link rel='stylesheet' id='simple-share-buttons-adder-indie-css'  href='//fonts.googleapis.com/css?family=Indie+Flower&#038;ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='simple-share-buttons-adder-font-awesome-css'  href='//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css?ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='opensans-css'  href='http://fonts.googleapis.com/css?family=Open+Sans%3A400%2C600%2C700%2C800%2C300&#038;ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='opensanscondensed-css'  href='http://fonts.googleapis.com/css?family=Open+Sans+Condensed%3A700&#038;ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='reset-css'  href='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/css/reset.css?ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='bootstrap-css'  href='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/css/bootstrap.css?ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='main-css'  href='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/css/main.css?ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='flexslider-css'  href='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/css/flexslider.css?ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='prettyphoto-css'  href='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/css/prettyPhoto.css?ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='youtube-channel-gallery-css'  href='http://bniajfi.org/wp-content/plugins/youtube-channel-gallery/styles.css?ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='jquery.magnific-popup-css'  href='http://bniajfi.org/wp-content/plugins/youtube-channel-gallery/magnific-popup.css?ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<link rel='stylesheet' id='rjqc-jqplot-css'  href='http://bniajfi.org/wp-content/plugins/rj-quickcharts/css/jquery.jqplot.min.css?ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js?ver=2483f238954e7cae2cd4dcb43c59bf93'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var LWA = {"ajaxurl":"http:\/\/bniajfi.org\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/plugins/login-with-ajax/widget/login-with-ajax.js?ver=3.1.7'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var BP_Confirm = {"are_you_sure":"Are you sure?"};
/* ]]> */
</script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/plugins/buddypress/bp-core/js/confirm.min.js?ver=3.1.0'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/plugins/buddypress/bp-core/js/widget-members.min.js?ver=3.1.0'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/plugins/buddypress/bp-core/js/jquery-query.min.js?ver=3.1.0'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/plugins/buddypress/bp-core/js/vendor/jquery-cookie.min.js?ver=3.1.0'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/plugins/buddypress/bp-core/js/vendor/jquery-scroll-to.min.js?ver=3.1.0'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var BP_DTheme = {"accepted":"Accepted","close":"Close","comments":"comments","leave_group_confirm":"Are you sure you want to leave this group?","mark_as_fav":"Favorite","my_favs":"My Favorites","rejected":"Rejected","remove_fav":"Remove Favorite","show_all":"Show all","show_all_comments":"Show all comments for this thread","show_x_comments":"Show all comments (%d)","unsaved_changes":"Your profile has unsaved changes. If you leave the page, the changes will be lost.","view":"View"};
/* ]]> */
</script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/plugins/buddypress/bp-templates/bp-legacy/js/buddypress.min.js?ver=3.1.0'></script>
<script type='text/javascript' src='https://platform.twitter.com/widgets.js?ver=2483f238954e7cae2cd4dcb43c59bf93'></script>
<script id='st_insights_js' type='text/javascript' src='http://w.sharethis.com/button/st_insights.js?publisher=4d48b7c5-0ae3-43d4-bfbe-3ff8c17a8ae6&#038;product=simpleshare'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/jquery.tweet.js?ver=2483f238954e7cae2cd4dcb43c59bf93'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/jquery.easing.1.3.js?ver=2483f238954e7cae2cd4dcb43c59bf93'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/jquery.waitforimages.js?ver=2483f238954e7cae2cd4dcb43c59bf93'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/bootstrap.js?ver=2483f238954e7cae2cd4dcb43c59bf93'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/jquery.flexslider-min.js?ver=2483f238954e7cae2cd4dcb43c59bf93'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/jquery.validate.min.js?ver=2483f238954e7cae2cd4dcb43c59bf93'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/jquery.isotope.min.js?ver=2483f238954e7cae2cd4dcb43c59bf93'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/main3.js?ver=2483f238954e7cae2cd4dcb43c59bf93'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/jquery.redirectreg.js?ver=2483f238954e7cae2cd4dcb43c59bf93'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/plugins/rj-quickcharts/js/min/rjqc-frontend-full.min.js?ver=2483f238954e7cae2cd4dcb43c59bf93'></script>
<link rel='https://api.w.org/' href='http://bniajfi.org/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://bniajfi.org/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://bniajfi.org/wp-includes/wlwmanifest.xml" /> 


	<script type="text/javascript">var ajaxurl = 'http://bniajfi.org/wp-admin/admin-ajax.php';</script>

<script>
var twitterWidgets;
!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];
  if(!d.getElementById(id)){
      js=d.createElement(s);
    js.id=id;js.src="//platform.twitter.com/widgets.js";
    fjs.parentNode.insertBefore(js,fjs);
  }}
  (document,"script","twitter-wjs");
  // twitterWidgets.onload = _ga.trackTwitter;
</script>
<meta name="tec-api-version" content="v1"><meta name="tec-api-origin" content="http://bniajfi.org"><link rel="https://theeventscalendar.com/" href="http://bniajfi.org/wp-json/tribe/events/v1/" />
<!-- Dynamic Widgets by QURL loaded - http://www.dynamic-widgets.com //-->
<script type="text/javascript">var wckAjaxurl = "https://bniajfi.org/wp-admin/admin-ajax.php";</script><link rel="me" href="https://twitter.com/bniajfi" /><meta name="twitter:partner" content="tfwp" />

		<style type="text/css" id="wp-custom-css">
			#nav { margin-top:0px; float:right; } 
#nav li { position:relative; display:inline-block; margin:0 4px; } 
#nav > li:last-child { margin-right:0px; }  
#nav li a { position:relative; display:block; padding:17px; min-width:40px; line-height: 18px; text-align:center; font-size:14px; z-index:300; }
#nav li a:hover, #nav li a.selected:hover, #nav li a.current { text-decoration:none;}

/* menu level 2 */
#nav ul { display:none; position:relative; width:160px; z-index:310; margin:0; position:absolute; top:35px; left:0; padding: 10px 0 0 0; background-image:url(https://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/img/background/nav-dropdown.png); background-position:18px 4px; background-repeat:no-repeat; background-color: #EEE;
box-shadow: 5px 5px 5px #888;}
#nav ul li { display:block; padding:0; margin:0; text-align:center;}
#nav ul li a { text-align:left; padding:10px 18px; font-size:12px; }
#nav ul li:first-child a { border-top:none; }
#nav ul li:last-child a { border-bottom:none; }

/* menu level 3 */
#nav ul ul { top:0; left:auto; right:-168px; padding:0px 0 0 8px; 
background:url(https://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/img/background/nav-dropdown-left.png) 1px 13px no-repeat; 
background-color: #EEE;
box-shadow: 5px 5px 5px #888;
z-index: 1;}

/* hyperlink in HeaderBlue */

#pTopic a {
	text-decoration: underline;
}

/*
#vsData img{
	visibility: hidden;
}
*/

#vsDownloads img {
	float: left;
	margin-left:5px !important;
	margin-right:10px !important;
	margin-top: 5px !important;
content:url("https://i.imgur.com/sGXFYtI.png");
	
}
/*
#vsDownloads img:hover{
content:url("https://i.imgur.com/S5F2d31.png")
}
*/
/* #vsTrends img{ visibility: hidden;}
*/

#vsGallery img {
	float: left;
	margin-left:5px !important;
	margin-right:10px !important;
	margin-top: 5px !important;
content:url("https://i.imgur.com/eaSw2du.png");
}

#divShare{
	display: none;
}

.span9 img{
	display: none;
}

.span9 h1{
	font-size: 28px !important;
	font-weight: 450;
}		</style>
	    <link href='http://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'>
	<!-- <link href='../resources/rtable/responsive-tables.css' rel='stylesheet' type='text/css'> -->
	
<link rel="stylesheet" type="text/css" href="http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/css/bg_styles/default.css">	
    
	<style type="text/css">body {
background-image: none;
}
@media (max-width: 480px) {
.menu {
margin-top: -180px;
}
}
header {
background-color: #FFFFFF;
max-height: 180px;
}
h2 {
border-bottom: 1px solid #FF5D00;
background-image: none !important;
border-color: #FF5D00 !important;
}
#logo {
padding-bottom: 0px;
}
#nav li a {
color: #007db6;
font-family: Open Sans, sans-serif;
font-weight: 600;
font-size: 14px;
text-transform: uppercase;
}
#nav {
float: left;
margin-left: 0;
}
#logo p {
color: #FFF;
font-size: 10px;
font-weight: 700;
margin: -10px 0 7px 0;
}
.header-wrap {
padding-bottom: 15px;
background-color: #007db6;
background-image: none;}
.tab-content > .tab-pane, .pill-content > .pill-pane {
padding: 0;
}
.nav-tabs > .active > a, .nav-tabs > .active > a:hover {
color: #FFFFFF;
font-weight: 600;
}
.accordion-group.active .accordion-heading .accordion-toggle, .accordion-group .accordion-heading .accordion-toggle:hover, .accordion-group .accordion-heading .accordion-toggle, .nav-tabs > .active > a, .nav-tabs > .active > a:hover {
color: #007db6;
font-size: 14px;
}
.headerBlue {
color: #007db6;
}
.social {
margin: 10px 0 -15px 0;
}
.nav {
margin-bottom: -5px;
margin-left: 4px;
}
@media all and (max-width: 770px) {
    .txtLogo { display: none; }
}
#nav ul li a {
color: #007db6;
text-shadow: none;
font-size: 11px;
}
.accordion-group.active .accordion-heading .accordion-toggle, .accordion-group .accordion-heading .accordion-toggle:hover, .accordion-group .accordion-heading .accordion-toggle, .nav-tabs > .active > a, .nav-tabs >
 .active > a:hover {
background-color: #FFFFFF;
}
.polaroid {
padding: 4px;
line-height: 1.42857143;
background-color: #fff;
border: 1px solid #ddd;
border-radius: 4px;
-webkit-transition: all .2s ease-in-out;
transition: all .2s ease-in-out;
display: inline-block;
max-width: 100%;
}
.tab-content > .active, .pill-content > .active {
padding: 4px;
line-height: 1.42857143;
background-color: #fff;
border: 1px solid #ddd;
border-radius: 4px;
-webkit-transition: all .2s ease-in-out;
transition: all .2s ease-in-out;
display: inline-block;
max-width: 100%;
}
#comInfo {
background: white;
background: rgba(255,255,255,0.8);
box-shadow: 0 0 15px rgba(0,0,0,0.2);
border-radius: 5px;
position: relative;
z-index: 9999;
}
#comInner {
opacity:0.6;
filter:alpha(opacity=60); /* For IE8 and earlier */
}
#comNew {
height: 45px;
width: 275px;
position: absolute;
background-color: #FFFFFF;
bottom: 0;
z-index: 1000;
background: rgba(255,255,255,0.8);
box-shadow: 0 0 15px rgba(0,0,0,0.2);
border-radius: 5px;
}
h3 b {
color: #FF5D00 !important;
}
footer {
background-color: #007db6;
}
.polaroid {
padding: 4px;
line-height: 1.42857143;
background-color: #fff;
border: 1px solid #ddd;
border-radius: 4px;
-webkit-transition: all .2s ease-in-out;
transition: all .2s ease-in-out;
display: inline-block;
max-width: 100%;
}
.tab-content > .active, .pill-content > .active {
padding: 4px;
padding-right: 45px;
line-height: 1.42857143;
background-color: #fff;
border: 1px solid #ddd;
border-radius: 4px;
-webkit-transition: all .2s ease-in-out;
transition: all .2s ease-in-out;
display: inline-block;
max-width: 100%;
width: 95%;
}
#comInfo {
background: white;
background: rgba(255,255,255,0.8);
box-shadow: 0 0 15px rgba(0,0,0,0.2);
border-radius: 5px;
position: relative;
z-index: 9999;
}
#comInner {
opacity:0.6;
filter:alpha(opacity=60); /* For IE8 and earlier */
}
#comNew {
height: 45px;
width: 275px;
position: absolute;
background-color: #FFFFFF;
bottom: 0;
z-index: 1000;
background: rgba(255,255,255,0.8);
box-shadow: 0 0 15px rgba(0,0,0,0.2);
border-radius: 5px;
}
#comSearch {
position: absolute;
background-color: #FFFFFF;
z-index: 1000;
background: rgba(255,255,255,0.8);
box-shadow: 0 0 15px rgba(0,0,0,0.2);
border-radius: 5px;
right: 15px;
top: 10px;
}
.txtLogo {
color: #FFFFFF;
margin: 0;
padding: 0;
line-height: 1;
font-size: 14px;
}
#tLogo {
margin-top: 20px;
}
#boldSlogan {
font-weight: 800;
}
#tLogo {
margin-left: 0;
}
#imgSlogan {
margin-top: 70px;
}
#containLogo {

}
@media all and (max-width: 770px) {
    #imgSlogan { margin-top: 2px; }
    #containLogo { margin-bottom: 0px; }
    #tLogo { margin-top: 0px; }
     .header-wrap { max-height: 310px; }
     .header { max-height: 310px; }
     .menu {margin-top: -175px; }
}
#scrollable-dropdown-menu .tt-dropdown-menu {
  max-height: 150px;
  overflow-y: auto;
  width: 400px;
}

.tt-menu {
	background-color: rgb(255,255,255);
	border: 1px solid #CCC;
	margin-top: -10px;
}
.tt-suggestion {
	border-bottom: 1px solid #CCC;
	cursor: pointer;
}
.typeahead {
	width: 360px;
}</style>	
<!-- END head -->
</head>

<!-- BEGIN body -->
<body class="bp-legacy tribe-no-js no-js">
        <!-- ************************** HEADER -->
		<div class="span12" style="width: 100%; margin-left: 0;">
        <header class="header row clearfix">
			
            <div class="header-wrap">
			
			    <!-- ************************** CONTAINER -->
				
				<div id="containLogo" class="container" style="">
                <div class="row">
				
                    <!-- ************************** LOGO -->
                    <div id="logo" class="span2">
		
					<a href="http://bniajfi.org/"><img src="http://bniajfi.org/wp-content/uploads/2021/02/bnia_logo_new.png" alt="BNIA - Baltimore Neighborhood Indicators Alliance"></a>					
                    </div>
					
					<div id="tLogo" class="span5">
						<img id="imgSlogan" alt="Baltimore Neighborhood Indicators Alliance" src="https://bniajfi.org/wp-content/uploads/2021/02/bnia_text.png"/>					
					</div>
					
                    <!-- ************************** end LOGO -->
                    
                 
					
					<div class="span5" style="margin-top: 20px;">
						<form method="get" action="http://bniajfi.org/" style="float: right;display: inline; margin-bottom: 0;">
							<div class="input-append">
								<input type="text" id="headerSearchText" name="s" size="16" class="span3" placeholder="Enter keywords to search..." value="" style="outline: none; min-width: 250px;">
								<input type="submit" id="" class="send" value="Go" style="outline: none;">
							  </div>
						</form>
						<ul class="social" style="float: right; margin-top: 0px;">
							<li><a target="_blank" class="facebook" href="http://www.facebook.com/bniajfi/">Facebook</a></li>
							<li><a target="_blank" class="twitter" href="http://www.twitter.com/bniajfi/">Twitter</a></li>
							<li><a target="_blank" class="youtube" href="http://www.youtube.com/bniajfi">YouTube</a></li>
							<li><a target="_blank" class="rss" href="/feed/">RSS</a></li>
						</ul>
					
						<a href="http://www.ubalt.edu" target="_blank" title="University of Baltimore"><img src="https://www.ubalt.edu/_resources/images/ub-logo-big.svg" style="height: 55px; width: 160px; float: right; margin-top: -10px; margin-right: -15px"/></a>
					</div>
					
                </div>
                <!-- end row -->
				
				
            </div>
			</div>
            <!-- end header-wrap -->
			<div class="container">
			 <!-- ************************** NAV -->
                    <nav class="span12" style="width: inherit;">
					
                        <!-- PRIMARY NAV -->
						<ul id="nav" class=""><li id="menu-item-428" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-428"><a href="http://bniajfi.org/vital_signs/">Vital Signs</a>
<ul class="sub-menu">
	<li id="menu-item-1088" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1088"><a href="http://bniajfi.org/vital_signs/">Explore Vital Signs 19</a></li>
	<li id="menu-item-434" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-434"><a href="http://bniajfi.org/vital_signs/fullreport/">Vital Signs – Full Report</a></li>
	<li id="menu-item-432" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-432"><a href="http://bniajfi.org/vital_signs/cprofiles/">Community Profiles</a></li>
	<li id="menu-item-3117" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3117"><a href="http://bniajfi.org/indicators/all">Indicators</a></li>
	<li id="menu-item-7417" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-7417"><a target="_blank" href="https://vital-signs-bniajfi.hub.arcgis.com/">Vital Signs Open Data</a></li>
	<li id="menu-item-983" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-983"><a href="http://bniajfi.org/vital_signs/archives">Archives</a></li>
</ul>
</li>
<li id="menu-item-429" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-429"><a href="http://bniajfi.org/resources/">Resource Library</a>
<ul class="sub-menu">
	<li id="menu-item-480" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-480"><a href="http://bniajfi.org/bnia_projects/">BNIA Projects and Research</a>
	<ul class="sub-menu">
		<li id="menu-item-438" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-438"><a href="http://bniajfi.org/currentprojects/">Current Projects</a></li>
		<li id="menu-item-439" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-439"><a href="http://bniajfi.org/publications_and_research/">All Research</a></li>
	</ul>
</li>
	<li id="menu-item-440" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-440"><a href="http://bniajfi.org/mapgallery/">Map Gallery</a>
	<ul class="sub-menu">
		<li id="menu-item-441" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-441"><a href="http://bniajfi.org/mapping-resources/">Mapping Resources</a></li>
	</ul>
</li>
	<li id="menu-item-442" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-442"><a href="http://bniajfi.org/community_mapping/">Community Mapping</a>
	<ul class="sub-menu">
		<li id="menu-item-6686" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-6686"><a href="http://bniajfi.org/currentprojects/cultural-mapping-tool/">GEOLOOM co>map: Cultural Mapping in Baltimore</a></li>
		<li id="menu-item-479" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-479"><a href="http://realestate.bniajfi.org">Real Estate Map</a></li>
		<li id="menu-item-477" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-477"><a href="http://foreclosures.bniajfi.org">Foreclosures Map</a></li>
		<li id="menu-item-478" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-478"><a href="https://bniajfi.org/greenpatterns/">Green Patterns</a></li>
	</ul>
</li>
	<li id="menu-item-11562" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-11562"><a href="http://bniajfi.org/community-guidepost/">Community Guidepost</a></li>
</ul>
</li>
<li id="menu-item-1994" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-1994"><a href="http://bniajfi.org/resources/learning-community/">Learning Community</a>
<ul class="sub-menu">
	<li id="menu-item-2002" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-2002"><a href="http://bniajfi.org/resources/learning-community/projects/">Projects</a>
	<ul class="sub-menu">
		<li id="menu-item-2003" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2003"><a href="http://bniajfi.org/resources/learning-community/add-project/">Add Your Project</a></li>
	</ul>
</li>
	<li id="menu-item-2007" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-2007"><a href="http://bniajfi.org/resources/learning-community/for-instructors/">For Instructors</a>
	<ul class="sub-menu">
		<li id="menu-item-2010" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2010"><a href="http://bniajfi.org/resources/learning-community/for-instructors/register-your-class/">Register Your Class</a></li>
	</ul>
</li>
	<li id="menu-item-2016" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2016"><a href="http://bniajfi.org/resources/learning-community/new-member/">Join Learning Community</a></li>
	<li id="menu-item-2013" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-2013"><a href="http://bniajfi.org/resources/learning-community/discussion/">Discussion Forum</a></li>
</ul>
</li>
<li id="menu-item-944" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-944"><a href="http://bniajfi.org/news_events">News &#038; Events</a>
<ul class="sub-menu">
	<li id="menu-item-956" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-956"><a href="http://bniajfi.org/data_day/">Baltimore Data Day (Week)</a></li>
	<li id="menu-item-1084" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1084"><a href="http://bniajfi.org/bnia-in-the-news/">BNIA Data In The News</a></li>
</ul>
</li>
<li id="menu-item-430" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-430"><a href="http://bniajfi.org/about_bnia/">About BNIA</a>
<ul class="sub-menu">
	<li id="menu-item-449" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-449"><a href="http://bniajfi.org/history/">History and Mission</a></li>
	<li id="menu-item-450" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-450"><a href="http://bniajfi.org/staff/">Staff</a></li>
	<li id="menu-item-1085" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1085"><a href="http://bniajfi.org/donate/">Donate</a></li>
</ul>
</li>
<li id="menu-item-431" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children menu-item-431"><a href="http://bniajfi.org/help_center/">Help Center</a>
<ul class="sub-menu">
	<li id="menu-item-1087" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1087"><a href="http://bniajfi.org/faqs/">Frequently Asked Questions (FAQs)</a></li>
	<li id="menu-item-1086" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1086"><a href="http://bniajfi.org/contact_us/">Contact Us</a></li>
	<li id="menu-item-12994" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-12994"><a href="http://bniajfi.org/stay-connected/">Stay Connected</a></li>
</ul>
</li>
</ul>                        <!-- end PRIMARY NAV -->
                        
						
                    </nav>
			</div>
        </header>
		</div>
        <!-- ************************** end HEADER -->
	<!-- ************************** CONTAINER -->
    <div class="container">
	 
                        <!-- ************************** MIDDLE --> <section class="middle row">
  <!-- ************************** SIDEBAR -->
  <aside class="span4 content sidebar">
    <!-- SEARCH - WIDGET -->
    <div class="search-widget clearfix">
      <span style="display: block;">Share </span><!-- Simple Share Buttons Adder (7.4.18) simplesharebuttons.com -->
      <div id="ssba-classic-2" class="ssba ssbp-wrap ssbp--theme-1">
        <div style="display: flex;">
          <a data-site="" class="ssba_facebook_share" href="https://www.facebook.com/sharer.php?u=http://bniajfi.org/data_day/" target="_blank">
            <img src="https://bniajfi.org/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/facebook.png" style="padding-right: 20px; width: 35px;" title="Facebook" class="ssba ssba-img" alt="Share on Facebook">
            <div title="Facebook" class="ssbp-text" style="display: none;">Facebook</div>
          </a>
          <a data-site="" class="ssba_twitter_share" href="https://twitter.com/share?url=http://bniajfi.org/data_day/&amp;text=Baltimore%20Data%20Day%20%28Week%29%20" target="&quot;_blank&quot;">
            <img src="https://bniajfi.org/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/twitter.png" style="padding-right: 20px; width: 35px;" title="Twitter" class="ssba ssba-img" alt="Tweet about this on Twitter">
            <div title="Twitter" class="ssbp-text" style="display: none;">Twitter</div>
          </a>
          <a data-site="linkedin" class="ssba_linkedin_share ssba_share_link" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http://bniajfi.org/data_day/" target="&quot;_blank&quot;">
            <img src="https://bniajfi.org/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/linkedin.png" style="padding-right: 20px; width: 35px;" title="LinkedIn" class="ssba ssba-img" alt="Share on LinkedIn">
            <div title="Linkedin" class="ssbp-text" style="display: none;">Linkedin</div>
          </a>
          <a data-site="email" class="ssba_email_share" href="mailto:?subject=Baltimore%20Data%20Day%20(Week)&amp;body=%20http://bniajfi.org/data_day/">
            <img src="https://bniajfi.org/wp-content/plugins/simple-share-buttons-adder/buttons/somacro/email.png" style="width: 35px;" title="Email" class="ssba ssba-img" alt="Email this to someone">
            <div title="email" class="ssbp-text" style="display: none;">email</div>
          </a>
        </div>
      </div>
    </div>
    <!-- end SEARCH - WIDGET -->
    <!-- WIDGET -->
    <div class="widget clearfix" style="display: block; margin-top: 5px;">
      <h3>Data Day Events</h3>
      <p>There are no upcoming events at this time.</p>
    </div>
    <div class="widget clearfix" style="display: block; margin-top: 5px;">
      <h3>Site Navigation</h3>
      <div class="menu-newsnav-container">
        <ul id="menu-newsnav" class="menu">
          <li id="menu-item-1524" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home current-menu-ancestor current_page_ancestor menu-item-has-children menu-item-1524">
            <a href="https://bniajfi.org/">Home</a>
            <ul class="sub-menu">
              <li id="menu-item-1528" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-1528">
                <a href="https://bniajfi.org/vital_signs/">Vital Signs 19</a>
                <ul class="sub-menu">
                  <li id="menu-item-1529" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1529"><a href="https://bniajfi.org/vital_signs/fullreport/">Vital Signs – Full Report</a></li>
                  <li id="menu-item-1532" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1532"><a href="https://bniajfi.org/vital_signs/cprofiles/">Community Profiles</a></li>
                  <li id="menu-item-1531" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1531"><a href="https://bniajfi.org/vital_signs/data_downloads/">Data Downloads</a></li>
                  <li id="menu-item-1530" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1530"><a href="https://bniajfi.org/vital_signs/archives/">Archives</a></li>
                </ul>
              </li>
  
            <li id="menu-item-1526" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-ancestor current-menu-parent current_page_parent current_page_ancestor menu-item-has-children menu-item-1526">
              <a href="https://bniajfi.org/news_events/">News &amp; Events</a>
              <ul class="sub-menu">
                <li id="menu-item-1527" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-109 current_page_item menu-item-1527"><a href="https://github.com/bnia/">All Repositories </a></li>
                <li id="menu-item-1527" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-109 current_page_item menu-item-1527"><a href="https://bniajfi.org/VitalSigns/">Vital Signs Scripts </a></li>
                <li id="menu-item-1527" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-109 current_page_item menu-item-1527"><a href="https://github.com/dataplay/">Dataplay Scripts</a></li>
                <li id="menu-item-1527" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-109 current_page_item menu-item-1527"><a href="https://github.com/dataguide/">Data Handling Guidebook</a></li>
                <li id="menu-item-1527" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-109 current_page_item menu-item-1527"><a href="https://github.com/datalabs/">Data Laboratories</a></li>
              </ul>
            </li>

            </ul>
          </li>
        </ul>
      </div>
    </div>
    <!-- end WIDGET -->
    <!-- WIDGET -->
    <!-- end WIDGET -->
    <!-- WIDGET -->
    <!-- end WIDGET -->
  </aside>
  <!-- ************************** end SIDEBAR -->
  <!-- ************************** CONTENT -->
  <div class="span8 content">
  <!-- end WIDGET -->
  <!-- WIDGET -->
  <!-- end WIDGET -->
  <!-- WIDGET -->
  <!-- end WIDGET -->
  </aside>
  <!-- ************************** end SIDEBAR -->
    <div class="span8 content"> <!-- PAGE HEADER --> <div class="page-header"><h1><b>Timelapse_Data_Gifs</b><small></small></h1></div> <!-- end PAGE HEADER --># default_exp gifmap<h2>About this Tutorial:</h2>
<p><a href="https://mybinder.org/v2/gh/bnia/dataplay/main?filepath=%2Fnotebooks%2F05_Map_Correlation_Networks.ipynb"><img src="https://mybinder.org/badge_logo.svg" alt="Binder" /></a>
<a href="https://colab.research.google.com/github/bnia/dataplay/blob/main/notebooks/05_Map_Correlation_Networks.ipynb"><img src="https://pete88b.github.io/fastpages/assets/badges/colab.svg" alt="Binder" /></a>
<a href="https://github.com/bnia/dataplay/tree/main/notebooks/05_Map_Correlation_Networks.ipynb"><img src="https://pete88b.github.io/fastpages/assets/badges/github.svg" alt="Binder" /></a>
<a href="https://github.com/ellerbrock/open-source-badges/"><img src="https://badges.frapsoft.com/os/v3/open-source.svg?v=103" alt="Open Source Love svg3" /></a></p>
<p><a href="https://github.com/bnia/dataplay/blob/main/LICENSE"><img src="https://img.shields.io/npm/l/all-contributors.svg?style=flat" alt="NPM License" /></a>
<a href="https://bnia.github.io"><img src="http://img.shields.io/badge/Status-Active-green.svg" alt="Active" /></a>
<a href="https://pypi.python.org/pypi/dataplay/"><img src="https://img.shields.io/pypi/pyversions/dataplay.svg" alt="Python Versions" /></a>
<a href=""><img src="https://img.shields.io/github/last-commit/bnia/dataplay.svg?style=flat" alt="GitHub last commit" /></a>  </p>
<p><a href="https://github.com/bnia/dataplay"><img src="https://img.shields.io/github/stars/bnia/dataplay.svg?style=social&amp;label=Star" alt="GitHub stars" /></a>
<a href="https://github.com/bnia/dataplay"><img src="https://img.shields.io/github/watchers/bnia/dataplay.svg?style=social&amp;label=Watch" alt="GitHub watchers" /></a>
<a href="https://github.com/bnia/dataplay"><img src="https://img.shields.io/github/forks/bnia/dataplay.svg?style=social&amp;label=Fork" alt="GitHub forks" /></a>
<a href="https://github.com/bnia/dataplay"><img src="https://img.shields.io/github/followers/bnia.svg?style=social&amp;label=Follow" alt="GitHub followers" /></a> </p>
<p><a href="https://twitter.com/intent/tweet?text=Check%20out%20this%20%E2%9C%A8%20colab%20by%20@bniajfi%20https://github.com/bnia/dataplay%20%F0%9F%A4%97"><img src="https://img.shields.io/twitter/url/https/github.com/bnia/dataplay.svg?style=social" alt="Tweet" /></a>
<a href="https://twitter.com/bniajfi"><img src="https://img.shields.io/twitter/follow/bniajfi.svg?style=social" alt="Twitter Follow" /></a></p>
<h3>Whats Inside?</h3>
<p><strong>Description:</strong> This notebook was made to demonstrate how to make a gif map by merging 2 datasets. The first being a dataset containing mappable coordinates onto which the second dataset may mapping its information of interest. </p>
<p>This lab is split into two sections. </p>
<ul>
<li>The first part of this lab provides help you understand the basics operations.</li>
<li>The second part of this notebook provides a single python function that handles everything covered in this lab (and more). </li>
</ul>
<p><strong>Input(s):</strong> </p>
<ul>
<li>Dataset (points/ bounds) url</li>
<li>Points/ bounds geometry column(s)</li>
<li>Points/ bounds crs's</li>
<li>Points/ bounds mapping color(s)</li>
<li>New filename</li>
</ul>
<p><strong>Output:</strong> Files, Gif</p>
<p><strong>*please note</strong></p>
<ul>
<li>This lab in particular makes heavy use of data that is not publicly accessible. Later labs use functions created here on public data. </li>
<li>A table of contents is provided in the menu to the left.</li>
<li>And, that this notebook has been optimized for Google Colabs ran on a Chrome Browser. </li>
<li>While still fully usable, non-critical section of code (eg. Python Magics and HTML) may break if used in a different enviornment.</li>
</ul>
<h1>Guided Walkthrough</h1>
<h2>SETUP</h2>
<h3>Import Modules</h3>
#@title Run This Cell: Install Modules
!pip install geopandas
!pip install VitalSigns#export 
import numpy as np
import pandas as pd#hide
t = """ """
!pip install nbdev
from google.colab import drive
drive.mount('/content/drive')
%cd /content/drive/My Drive/'Software Development Documents'/dataplay/

# !pip install dataplay#export
from dataplay import merge
from dataplay import intaker
from VitalSigns import acsDownload# export
#@title Run This Cell: Import Modules

# Once installed we need to import and configure the Widgets
import ipywidgets as widgets
!jupyter nbextension enable --py widgetsnbextension
from IPython.core.interactiveshell import InteractiveShell
InteractiveShell.ast_node_interactivity = 'all'
import ipywidgets as widgets
from ipywidgets import interact, interact_manual

# Used 4 Importing Data
import urllib.request as urllib
from urllib.parse import urlencode
# This Prevents Timeouts when Importing
import socket
socket.setdefaulttimeout(10.0)

# Pandas Data Manipulation Libraries
import pandas as pd
# Show entire column widths
pd.set_option('display.max_colwidth', -1)
# 4 Working with Json Data
import json
# 4 Data Processing
import numpy as np
# 4 Reading Json Data into Pandas
from pandas.io.json import json_normalize

# 4 exporting data as CSV
import csv

from VitalSigns.acsDownload import retrieve_acs_data

from dataplay.merge import mergeDatasets

from dataplay.geoms import readInGeometryData
from dataplay.geoms import map_points
from dataplay.geoms import workWithGeometryData

# Geo-Formatting
# Postgres-Conversion
import geopandas as gpd
import psycopg2,pandas,numpy
from shapely import wkb
import os
import sys

# In case file is KML
import fiona
fiona.drvsupport.supported_drivers['kml'] = 'rw' # enable KML support which is disabled by default
fiona.drvsupport.supported_drivers['KML'] = 'rw' # enable KML support which is disabled by default

# https://www.census.gov/geographies/mapping-files/time-series/geo/tiger-line-file.2010.html
# https://www.census.gov/cgi-bin/geo/shapefiles/index.php?year=2010&layergroup=Census+Tracts

from geopandas import GeoDataFrame

from shapely.wkt import loads
from pandas import ExcelWriter
from pandas import ExcelFile

# load libraries
%matplotlib inline
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import geopandas as gpd
import glob

# Gif
import imageio

# Pictures
from PIL import Image
import requests
from io import BytesIO<h3>Configure Enviornment</h3>
# This will just beautify the output

pd.set_option('display.expand_frame_repr', False)
pd.set_option('display.precision', 2)
from IPython.core.interactiveshell import InteractiveShell
InteractiveShell.ast_node_interactivity = "all"

# pd.set_option('display.expand_frame_repr', False)
# pd.set_option('display.precision', 2)
# pd.reset_option('max_colwidth')
pd.set_option('max_colwidth', 20)
# pd.reset_option('max_colwidth')<h3>Conveince Functions</h3>
#export
#@title Run This Cell: Misc Function Declarations
# These functions right here are used in the calculations below.
# Finds a column matchings a substring
def getColName  (df, col): return df.columns[df.columns.str.contains(pat = col)][0]
def getColByName (df, col): return df[getColName(df, col)]

# Pulls a column from one dataset into a new dataset.
# This is not a crosswalk. calls getColByName()
def addKey(df, fi, col):
    key = getColName(df, col)
    val = getColByName(df, col)
    fi[key] = val
    return fi
# Return 0 if two specified columns are equal.
def nullIfEqual(df, c1, c2):
    return df.apply(lambda x:
        x[getColName(df, c1)]+x[getColName(df, c2)] if x[getColName(df, c1)]+x[getColName(df, c2)] != 0 else 0, axis=1)
# I'm thinking this doesnt need to be a function..
def sumInts(df): return df.sum(numeric_only=True)<p>This next function was created in previous colabs. We are going to recycle it for use in this lab</p>
<h2>Retrieve GIS Data</h2>
regexMatchingColumnsToMakeTheGifWith = 'hhchpov'<h3>Import Data of Interest: (HHCHPOV)</h3>
# This dataset is taken from the public database provided by BNIAJFI hosted by Esri / ArcGIS
# BNIA ArcGIS Homepage: https://data-bniajfi.opendata.arcgis.com/
final = intaker.Intake.getData("https://services1.arcgis.com/mVFRs7NF4iFitgbY/ArcGIS/rest/services/"+regexMatchingColumnsToMakeTheGifWith.capitalize()+"/FeatureServer/0/query?where=1%3D1&outFields=*&returnGeometry=true&f=pgeojson")[['CSA2010', 'hhchpov15', 'hhchpov16', 'hhchpov17', 'hhchpov18', 'hhchpov19', 'geometry']]
final.head(1)<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CSA2010</th>
      <th>hhchpov15</th>
      <th>hhchpov16</th>
      <th>hhchpov17</th>
      <th>hhchpov18</th>
      <th>hhchpov19</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Allendale/Irving...</td>
      <td>38.93</td>
      <td>34.73</td>
      <td>32.77</td>
      <td>35.27</td>
      <td>32.6</td>
      <td>POLYGON ((-76.65...</td>
    </tr>
  </tbody>
</table>
</div>final.head(1)<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CSA2010</th>
      <th>hhchpov15</th>
      <th>hhchpov16</th>
      <th>hhchpov17</th>
      <th>hhchpov18</th>
      <th>hhchpov19</th>
      <th>geometry</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Allendale/Irving...</td>
      <td>38.93</td>
      <td>34.73</td>
      <td>32.77</td>
      <td>35.27</td>
      <td>32.6</td>
      <td>POLYGON ((-76.65...</td>
    </tr>
  </tbody>
</table>
</div>final.plot(column='hhchpov15')<matplotlib.axes._subplots.AxesSubplot at 0x7fe0fe5b2950><Figure size 432x288 with 1 Axes><h2>MAPPING</h2>
<p>Fantastic! </p>
<p>Your data is all together in a single dataset.</p>
<p>now what?</p>
<p>First lets take the centerpoint of each geometry. This will be where we place text on the each geometry.</p>
final['centroid'] = final['geometry'].representative_point()<h2>Lets make a GIF</h2>
pd.set_option('precision', 0)
fileNames = []
labelBounds = True
specialLabelCol = False # Labels on GEOM Centroids
saveGifAs = './test.gif'
label = 'Household Poverty'
annotation = 'Source: Maryland Vital Statistics; Analysis by: Baltimore Neighborhood Indicators Alliance' 
fontsize='22'<p>Data was successfully merged across all years and geometry.</p>
<p>Now we want the tractname, geometry, and the specific column we want to make a gif from.</p>
# Get only the results tab
td = final.copy()
td = td.reindex(sorted(td.columns), axis=1)# Coerce columns stored as floats into integers. 
# This will ensure numbers are rounded to whole digits when displaying the reults

gifCols = td.filter(regex=regexMatchingColumnsToMakeTheGifWith).columns.values

td[gifCols] = td[gifCols].fillna(-1)
td[gifCols] = td[gifCols].astype('int32')
td.head()<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CSA2010</th>
      <th>centroid</th>
      <th>geometry</th>
      <th>hhchpov15</th>
      <th>hhchpov16</th>
      <th>hhchpov17</th>
      <th>hhchpov18</th>
      <th>hhchpov19</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Allendale/Irving...</td>
      <td>POINT (-76.67653...</td>
      <td>POLYGON ((-76.65...</td>
      <td>38</td>
      <td>34</td>
      <td>32</td>
      <td>35</td>
      <td>32</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Beechfield/Ten H...</td>
      <td>POINT (-76.70331...</td>
      <td>POLYGON ((-76.69...</td>
      <td>19</td>
      <td>21</td>
      <td>23</td>
      <td>21</td>
      <td>15</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Belair-Edison</td>
      <td>POINT (-76.57463...</td>
      <td>POLYGON ((-76.56...</td>
      <td>36</td>
      <td>36</td>
      <td>34</td>
      <td>39</td>
      <td>41</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Brooklyn/Curtis ...</td>
      <td>POINT (-76.56060...</td>
      <td>POLYGON ((-76.58...</td>
      <td>45</td>
      <td>46</td>
      <td>46</td>
      <td>39</td>
      <td>41</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Canton</td>
      <td>POINT (-76.58204...</td>
      <td>POLYGON ((-76.57...</td>
      <td>5</td>
      <td>2</td>
      <td>4</td>
      <td>4</td>
      <td>4</td>
    </tr>
  </tbody>
</table>
</div><p>Data exploration is essential! But not covered in this lab.</p>
td.filter(regex=regexMatchingColumnsToMakeTheGifWith).hist()array([[<matplotlib.axes._subplots.AxesSubplot object at 0x7fe0fe0c4690>,
        <matplotlib.axes._subplots.AxesSubplot object at 0x7fe0fe069d90>],
       [<matplotlib.axes._subplots.AxesSubplot object at 0x7fe0fe024450>,
        <matplotlib.axes._subplots.AxesSubplot object at 0x7fe0fdfd3ad0>],
       [<matplotlib.axes._subplots.AxesSubplot object at 0x7fe0fe00d190>,
        <matplotlib.axes._subplots.AxesSubplot object at 0x7fe0fdfba810>]],
      dtype=object)<Figure size 432x288 with 6 Axes><p>Everything is almost ready to start making our gifmap!</p>
<p>Lets just get the minimum and maximum values so that our color ramp will have consistent values on each picture.</p>
# Get Min Max
mins = []
maxs = []
for col in td.filter(regex=regexMatchingColumnsToMakeTheGifWith).columns:
  mins.append(td[col].min())
  maxs.append(td[col].max())
print(mins, maxs)

# set the min and max range for the choropleth map
vmin, vmax = min(mins), max(maxs)
print('Smallest Value: ', vmin, ', Max Value:', vmax)[3, 0, 0, 0, 0] [65, 65, 64, 60, 66]
Smallest Value:  0 , Max Value: 66
merged = td.copy()# For each column
for indx, col in enumerate(merged.filter(regex="hhchpov").columns):
    print('INDEX', indx)
    print('Col: '+str(col) )
    image_name = col+'.jpg'
    fileNames.append(image_name)

    # create map, UDPATE: added plt.Normalize to keep the legend range the same for all maps
    fig = merged.plot(column=col, cmap='Blues', figsize=(10,10), 
        linewidth=0.8, edgecolor='0.8', vmin=vmin, vmax=vmax,
        legend=True, norm=plt.Normalize(vmin=vmin, vmax=vmax) 
    )
    
    # https://stackoverflow.com/questions/38899190/geopandas-label-polygons
    if labelBounds:
      labelColumn = col
      if specialLabelCol: labelColumn = specialLabelCol
      merged.apply(lambda x: fig.annotate(s=x[labelColumn], xy=x.geometry.centroid.coords[0], ha='center'),axis=1);
    
    # remove axis off chart and set title
    fig.axis('off')
    fig.set_title(str(col.replace("hhchpov", "Houshold Childhood Poverty 20")), fontdict={'fontsize': fontsize, 'fontweight' : '3'})
    
    # create an annotation for the  data source
    fig.annotate(annotation,
            xy=(0.1, .08), xycoords='figure fraction',
            horizontalalignment='left', verticalalignment='top',
            fontsize=10, color='#555555')
    
    # this will save the figure as a high-res png in the output path. you can also save as svg if you prefer.
    # filepath = os.path.join(output_path, image_name)
    chart = fig.get_figure()
    # fig.savefig(“map_export.png”, dpi=300)
    chart.savefig(image_name, dpi=300)
    plt.close(chart)
        
images = []
for filename in fileNames:
    images.append(imageio.imread(filename))
imageio.mimsave(saveGifAs, images, fps=.5)


# This will print out a picture of each picture in the gifmap.
from PIL import Image
import requests
from io import BytesIO
for filename in fileNames:
    img = Image.open(filename) 
    size = 328, 328
    img.thumbnail(size, Image.ANTIALIAS)
    imgINDEX 0
Col: hhchpov15
0     Annotation(-76.6...
1     Annotation(-76.7...
2     Annotation(-76.5...
3     Annotation(-76.5...
4     Annotation(-76.5...
5     Annotation(-76.5...
6     Annotation(-76.6...
7     Annotation(-76.6...
8     Annotation(-76.5...
9     Annotation(-76.5...
10    Annotation(-76.6...
11    Annotation(-76.7...
12    Annotation(-76.6...
13    Annotation(-76.6...
14    Annotation(-76.6...
15    Annotation(-76.5...
16    Annotation(-76.6...
17    Annotation(-76.6...
18    Annotation(-76.6...
19    Annotation(-76.6...
20    Annotation(-76.6...
21    Annotation(-76.6...
22    Annotation(-76.6...
23    Annotation(-76.6...
24    Annotation(-76.5...
25    Annotation(-76.5...
26    Annotation(-76.5...
27    Annotation(-76.5...
28    Annotation(-76.7...
29    Annotation(-76.6...
30    Annotation(-76.5...
31    Annotation(-76.5...
32    Annotation(-76.5...
33    Annotation(-76.6...
34    Annotation(-76.6...
35    Annotation(-76.5...
36    Annotation(-76.6...
37    Annotation(-76.6...
38    Annotation(-76.6...
39    Annotation(-76.5...
40    Annotation(-76.5...
41    Annotation(-76.5...
42    Annotation(-76.5...
43    Annotation(-76.6...
44    Annotation(-76.6...
45    Annotation(-76.6...
46    Annotation(-76.6...
47    Annotation(-76.6...
48    Annotation(-76.5...
49    Annotation(-76.6...
50    Annotation(-76.6...
51    Annotation(-76.6...
52    Annotation(-76.6...
53    Annotation(-76.6...
54    Annotation(-76.6...
dtype: object(-76.72049409966101, -76.52058984362787, 39.18850298950285, 39.38074613803655)Text(0.5, 1.0, 'Houshold Childhood Poverty 2015')Text(0.1, 0.08, 'Source: Maryland Vital Statistics; Analysis by: Baltimore Neighborhood Indicators Alliance')INDEX 1
Col: hhchpov16
0     Annotation(-76.6...
1     Annotation(-76.7...
2     Annotation(-76.5...
3     Annotation(-76.5...
4     Annotation(-76.5...
5     Annotation(-76.5...
6     Annotation(-76.6...
7     Annotation(-76.6...
8     Annotation(-76.5...
9     Annotation(-76.5...
10    Annotation(-76.6...
11    Annotation(-76.7...
12    Annotation(-76.6...
13    Annotation(-76.6...
14    Annotation(-76.6...
15    Annotation(-76.5...
16    Annotation(-76.6...
17    Annotation(-76.6...
18    Annotation(-76.6...
19    Annotation(-76.6...
20    Annotation(-76.6...
21    Annotation(-76.6...
22    Annotation(-76.6...
23    Annotation(-76.6...
24    Annotation(-76.5...
25    Annotation(-76.5...
26    Annotation(-76.5...
27    Annotation(-76.5...
28    Annotation(-76.7...
29    Annotation(-76.6...
30    Annotation(-76.5...
31    Annotation(-76.5...
32    Annotation(-76.5...
33    Annotation(-76.6...
34    Annotation(-76.6...
35    Annotation(-76.5...
36    Annotation(-76.6...
37    Annotation(-76.6...
38    Annotation(-76.6...
39    Annotation(-76.5...
40    Annotation(-76.5...
41    Annotation(-76.5...
42    Annotation(-76.5...
43    Annotation(-76.6...
44    Annotation(-76.6...
45    Annotation(-76.6...
46    Annotation(-76.6...
47    Annotation(-76.6...
48    Annotation(-76.5...
49    Annotation(-76.6...
50    Annotation(-76.6...
51    Annotation(-76.6...
52    Annotation(-76.6...
53    Annotation(-76.6...
54    Annotation(-76.6...
dtype: object(-76.72049409966101, -76.52058984362787, 39.18850298950285, 39.38074613803655)Text(0.5, 1.0, 'Houshold Childhood Poverty 2016')Text(0.1, 0.08, 'Source: Maryland Vital Statistics; Analysis by: Baltimore Neighborhood Indicators Alliance')INDEX 2
Col: hhchpov17
0     Annotation(-76.6...
1     Annotation(-76.7...
2     Annotation(-76.5...
3     Annotation(-76.5...
4     Annotation(-76.5...
5     Annotation(-76.5...
6     Annotation(-76.6...
7     Annotation(-76.6...
8     Annotation(-76.5...
9     Annotation(-76.5...
10    Annotation(-76.6...
11    Annotation(-76.7...
12    Annotation(-76.6...
13    Annotation(-76.6...
14    Annotation(-76.6...
15    Annotation(-76.5...
16    Annotation(-76.6...
17    Annotation(-76.6...
18    Annotation(-76.6...
19    Annotation(-76.6...
20    Annotation(-76.6...
21    Annotation(-76.6...
22    Annotation(-76.6...
23    Annotation(-76.6...
24    Annotation(-76.5...
25    Annotation(-76.5...
26    Annotation(-76.5...
27    Annotation(-76.5...
28    Annotation(-76.7...
29    Annotation(-76.6...
30    Annotation(-76.5...
31    Annotation(-76.5...
32    Annotation(-76.5...
33    Annotation(-76.6...
34    Annotation(-76.6...
35    Annotation(-76.5...
36    Annotation(-76.6...
37    Annotation(-76.6...
38    Annotation(-76.6...
39    Annotation(-76.5...
40    Annotation(-76.5...
41    Annotation(-76.5...
42    Annotation(-76.5...
43    Annotation(-76.6...
44    Annotation(-76.6...
45    Annotation(-76.6...
46    Annotation(-76.6...
47    Annotation(-76.6...
48    Annotation(-76.5...
49    Annotation(-76.6...
50    Annotation(-76.6...
51    Annotation(-76.6...
52    Annotation(-76.6...
53    Annotation(-76.6...
54    Annotation(-76.6...
dtype: object(-76.72049409966101, -76.52058984362787, 39.18850298950285, 39.38074613803655)Text(0.5, 1.0, 'Houshold Childhood Poverty 2017')Text(0.1, 0.08, 'Source: Maryland Vital Statistics; Analysis by: Baltimore Neighborhood Indicators Alliance')INDEX 3
Col: hhchpov18
0     Annotation(-76.6...
1     Annotation(-76.7...
2     Annotation(-76.5...
3     Annotation(-76.5...
4     Annotation(-76.5...
5     Annotation(-76.5...
6     Annotation(-76.6...
7     Annotation(-76.6...
8     Annotation(-76.5...
9     Annotation(-76.5...
10    Annotation(-76.6...
11    Annotation(-76.7...
12    Annotation(-76.6...
13    Annotation(-76.6...
14    Annotation(-76.6...
15    Annotation(-76.5...
16    Annotation(-76.6...
17    Annotation(-76.6...
18    Annotation(-76.6...
19    Annotation(-76.6...
20    Annotation(-76.6...
21    Annotation(-76.6...
22    Annotation(-76.6...
23    Annotation(-76.6...
24    Annotation(-76.5...
25    Annotation(-76.5...
26    Annotation(-76.5...
27    Annotation(-76.5...
28    Annotation(-76.7...
29    Annotation(-76.6...
30    Annotation(-76.5...
31    Annotation(-76.5...
32    Annotation(-76.5...
33    Annotation(-76.6...
34    Annotation(-76.6...
35    Annotation(-76.5...
36    Annotation(-76.6...
37    Annotation(-76.6...
38    Annotation(-76.6...
39    Annotation(-76.5...
40    Annotation(-76.5...
41    Annotation(-76.5...
42    Annotation(-76.5...
43    Annotation(-76.6...
44    Annotation(-76.6...
45    Annotation(-76.6...
46    Annotation(-76.6...
47    Annotation(-76.6...
48    Annotation(-76.5...
49    Annotation(-76.6...
50    Annotation(-76.6...
51    Annotation(-76.6...
52    Annotation(-76.6...
53    Annotation(-76.6...
54    Annotation(-76.6...
dtype: object(-76.72049409966101, -76.52058984362787, 39.18850298950285, 39.38074613803655)Text(0.5, 1.0, 'Houshold Childhood Poverty 2018')Text(0.1, 0.08, 'Source: Maryland Vital Statistics; Analysis by: Baltimore Neighborhood Indicators Alliance')INDEX 4
Col: hhchpov19
0     Annotation(-76.6...
1     Annotation(-76.7...
2     Annotation(-76.5...
3     Annotation(-76.5...
4     Annotation(-76.5...
5     Annotation(-76.5...
6     Annotation(-76.6...
7     Annotation(-76.6...
8     Annotation(-76.5...
9     Annotation(-76.5...
10    Annotation(-76.6...
11    Annotation(-76.7...
12    Annotation(-76.6...
13    Annotation(-76.6...
14    Annotation(-76.6...
15    Annotation(-76.5...
16    Annotation(-76.6...
17    Annotation(-76.6...
18    Annotation(-76.6...
19    Annotation(-76.6...
20    Annotation(-76.6...
21    Annotation(-76.6...
22    Annotation(-76.6...
23    Annotation(-76.6...
24    Annotation(-76.5...
25    Annotation(-76.5...
26    Annotation(-76.5...
27    Annotation(-76.5...
28    Annotation(-76.7...
29    Annotation(-76.6...
30    Annotation(-76.5...
31    Annotation(-76.5...
32    Annotation(-76.5...
33    Annotation(-76.6...
34    Annotation(-76.6...
35    Annotation(-76.5...
36    Annotation(-76.6...
37    Annotation(-76.6...
38    Annotation(-76.6...
39    Annotation(-76.5...
40    Annotation(-76.5...
41    Annotation(-76.5...
42    Annotation(-76.5...
43    Annotation(-76.6...
44    Annotation(-76.6...
45    Annotation(-76.6...
46    Annotation(-76.6...
47    Annotation(-76.6...
48    Annotation(-76.5...
49    Annotation(-76.6...
50    Annotation(-76.6...
51    Annotation(-76.6...
52    Annotation(-76.6...
53    Annotation(-76.6...
54    Annotation(-76.6...
dtype: object(-76.72049409966101, -76.52058984362787, 39.18850298950285, 39.38074613803655)Text(0.5, 1.0, 'Houshold Childhood Poverty 2019')Text(0.1, 0.08, 'Source: Maryland Vital Statistics; Analysis by: Baltimore Neighborhood Indicators Alliance')<PIL.JpegImagePlugin.JpegImageFile image mode=RGB size=328x328 at 0x7FE10F84DCD0><PIL.JpegImagePlugin.JpegImageFile image mode=RGB size=328x328 at 0x7FE0FD926D50><PIL.JpegImagePlugin.JpegImageFile image mode=RGB size=328x328 at 0x7FE0FD982A90><PIL.JpegImagePlugin.JpegImageFile image mode=RGB size=328x328 at 0x7FE0FD956410><PIL.JpegImagePlugin.JpegImageFile image mode=RGB size=328x328 at 0x7FE10F84DCD0><h2>Lets make a GIF</h2>
<h1>Final Result</h1>
# export
import geopandas as gpd
import numpy as np
import pandas as pd
from dataplay import geoms

# Gif
import imageio

# Pictures
from PIL import Image
import requests
from io import BytesIO# export
def getMinMax(df):
  mins = df.min().values
  maxs = df.max().values
  print("Min&Max: ", mins, maxs)
  return [mins, maxs]# export
def getAbsMinMax(df):
  # Get Min Max
  mins, maxs = getMinMax(df)
  return [min(mins), max(maxs)]# export
def createGif(fileNames, saveGifAs, images):
  print("CREATING GIF")
  # This will print out a picture of each picture in the gifmap as well.
  for filename in fileNames:
      # images.append(imageio.imread(filename))
      img = Image.open(filename)
      size = 328, 328
      img.thumbnail(size, Image.ANTIALIAS)
      print(img)
  imageio.mimsave(saveGifAs, images, fps=.5)
  print("GIF CREATED")# export
def createPicture(df, col, vmin, vmax, labelBounds, title, annotation, fontsize):
    print( '~~~~~~~~~~~~~~~~ \r\n createPicture for: ', 'Col: '+str(col))

    # create map, UDPATE: added plt.Normalize to keep the legend range the same for all maps
    fig = df.plot(column=col, cmap='Blues', figsize=(10,10),
      linewidth=0.8, edgecolor='0.8', vmin=vmin, vmax=vmax,
      legend=True, norm=plt.Normalize(vmin=vmin, vmax=vmax)
    )

    if labelBounds:
      if type(True) == type(labelBounds): labelBounds = col
      print('Adding Label: ', labelBounds)
      df.apply(lambda x: fig.annotate(s=x[labelBounds], xy=x['geometry'].centroid.coords[0], ha='center') if x.geometry else False ,axis=1);
    # remove axis off chart and set title
    fig.axis('off')

    print('Setting Title: ', title)
    fig.set_title(str(col.replace("final", title)), fontdict={'fontsize': fontsize, 'fontweight' : '3'})

    print('Setting Data-Source Annotation: ', annotation)
    fig.annotate(annotation, xy=(0.1, .08), xycoords='figure fraction', horizontalalignment='left', verticalalignment='top', fontsize=10, color='#555555')

    # this will save the figure as a high-res png in the output path. you can also save as svg if you prefer.
    # filepath = os.path.join(output_path, image_name)
    print('Get Figure: ')
    chart = fig.get_figure()
    # fig.savefig(“map_export.png”, dpi=300)
    print('Save Figure: ')
    chart.savefig( str(col)+".png" , dpi=300)
    print('Saved & Finished.')
    plt.close(chart)

    return ''# export
def createGifMap(df, saveGifAs, labelBounds, title, annotation, fontsize):
  # set the min and max range for the choropleth map
  print('createGifMap')
  vmin, vmax = getAbsMinMax( df.filter(regex="final") )

  print('Creating Pictures')
  fileNames = []
  images = []
  # For each column
  for indx, col in enumerate( df.filter( regex="final").columns ):
    createPicture(df, col, vmin, vmax, labelBounds, title, annotation, fontsize)
    print('Adding to images list')
    images.append(imageio.imread(str(col)+".png"))
  print( '~~~~~~~~~~~~~~~~ \r\n Saving images to !')

  createGif(fileNames, saveGifAs, images)# Our download function will use Baltimore City's tract, county and state as internal paramters
# Change these values in the cell below using different geographic reference codes will change those parameters

# Group By Crosswalked column. Included automatically in final result
# Do Not Group, Include the Crosswalked Column in the final result 
# Create the trav45 Indicator 

state = '24'
county = '510'
tract = '*'
# Specify the download parameters the acs download function will receieve here
year = '19'
years = ['17', '16', '15']
tableId = 'B08303' 
saveAcs = True

# Crosswalk Table 
cwUrl = 'CSA-to-Tract-2010.csv'
cw_left_col = 'tract'
cw_right_col= 'TRACTCE10' 
merge_how= 'CSA2010'
saveCrosswalked = True
crosswalkedFileName = False

groupBy = False # 'CSA2010'
aggMethod = 'sum'
columnsToInclude = ['CSA2010']

finalFileName = './trav45_20'+year+'_tracts_26July2019.csv' 
# Alternatively - groupBy = False & columnsToInclude = ['CSA2010']


# This lower half is to merge to the geom
from dataplay import merge 

# Secondary Table 
right_ds = 'https://services1.arcgis.com/mVFRs7NF4iFitgbY/ArcGIS/rest/services/Hhchpov/FeatureServer/0/query?where=1%3D1&outFields=*&returnGeometry=true&f=pgeojson'
right_col ='CSA2010'

interactive = True
merge_how = 'outer'saveGifAs = './test.gif'
labelBounds = False # 'CSA2010'
annotation = 'Source: Baltimore Neighborhood Indicators Alliance' 
title = 'Indicator Name' 
fontsize='22'# Get only the results tab
td = finaldf.filter(regex="final|CSA2010|tract|geometry")
td = td.reindex(sorted(td.columns), axis=1) </div></section></div>    	<div class="row"  style="background-color: #FDFDFD; border-top: 15px solid #007db6; -moz-box-shadow: inset 0 0 5px #888; -webkit-box-shadow: inset 0 0 5px#888; box-shadow: inner 0 0 5px #888;">
		<div class="container" style="margin-top: 10px;">
		<style>#copy-text-lakin{overflow:hidden;}#copy-text-lakin::after{clear:both; content:' '; display:block}#copy-text-lakin>*{width:822px; float:left; margin:0}#copy-text-lakin>#copy-text-lak{margin-left:-822px; background-color:#007db6; width:100%}</style>
            <div class="row">
                <!-- widget -->
				<div class="span3 widget">
					<h3><b>SEARCH</b></h3><form method="get" action="http://bniajfi.org/">
	<div class="input-append">
		<input type="text" id="appendedPrependedInput" name="s" size="16" class="span3" placeholder="Enter keywords to search..." value=""><input type="submit" id="searchsubmit" class="send" value="Go">
	  </div>
</form>				</div>
                <!-- end widget -->
				
                <!-- widget -->
				<div class="span3 widget">
					<h3><b>CONNECT WITH US</b></h3>			<div class="textwidget"><ul class="social" style="float: none; margin-bottom: 20px;">
<li><a target="_blank" class="facebook" href="http://www.facebook.com/bniajfi/">Facebook</a></li>
<li><a target="_blank" class="twitter" href="http://www.twitter.com/bniajfi/">Twitter</a></li>
<li><a target="_blank" class="youtube" href="http://www.youtube.com/bniajfi">YouTube</a></li>
<li><a target="_blank" class="rss" href="/feed/">RSS</a></li>
</ul>
</div>
						</div>
                <!-- end widget -->
				
                <!-- widget -->
				<div class="span3 widget">
					<h3><b>DONATE</b></h3>			<div class="textwidget"><p>Help us keep this resource free and available to the public. Donate now!</p>
<p><a href="http://bniajfi.org/donate" title="Donate Now" class="btn btn-warning">Donate to BNIA-JFI</a></p>
</div>
						</div>
                <!-- end widget -->
				
                <!-- widget -->
				<div class="span3 widget">
					<h3><b>CONTACT US</b></h3>			<div class="textwidget"><p style="font-size: 11px; font-weight: 600;">Baltimore Neighborhood Indicators Alliance<br />
The Jacob France Institute<br />
1420 N. Charles Street, Baltimore, MD 21201<br />
410-837-4377 | <a href="mailto:bnia-jfi@ubalt.edu">bnia-jfi@ubalt.edu</a></p>
</div>
						</div>
                <!-- end widget -->
            </div>
            <!-- end row -->
		</div>
		</div>
		    <!-- ************************** FOOTER -->
    <footer class="footer" style="padding-top: 5px; padding-bottom: 5px;">	
								<!-- row -->
					<div class="container">
					<div class="row">
						<div class="span6">
							<p style="color: #FFF; font-size: 10px;">Baltimore Neighborhood Indicators Alliance - &copy; 2018</p>
						</div>
						<!-- copyright text -->
						<div class="span6 copy-text">
<div id="copy-text-lakin"><div id="copy-text-lak">
										<a href="http://www.ubalt.edu" target="_blank" title="University of Baltimore"><img src="https://www.ubalt.edu/_resources/images/ub-logo-big.svg" style="height: 50px; width: 155px; float: right; margin-top: -5px;"/></a>
							<a href="http://www.ubalt.edu/jfi" target="_blank" title="Jacob France Institute"><img src="/images/jfilogo.png" style="height: 50px; width: 170px; float: right; margin-top: -5px;"/></a>
							<br/><br/>
							<p> </p>
</div></div>
						</div>
						<!-- end copyright text -->
					</div>
					</div>
					<!-- end row -->
				
        <!-- end contaner -->	
    </footer>
    <!-- ************************** end FOOTER -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-50651404-1', 'bniajfi.org');
ga('require', 'linkid', 'linkid.js');
ga('send', 'pageview');

</script>		<script>
		( function ( body ) {
			'use strict';
			body.className = body.className.replace( /\btribe-no-js\b/, 'tribe-js' );
		} )( document.body );
		</script>
		<script> /* <![CDATA[ */var tribe_l10n_datatables = {"aria":{"sort_ascending":": activate to sort column ascending","sort_descending":": activate to sort column descending"},"length_menu":"Show _MENU_ entries","empty_table":"No data available in table","info":"Showing _START_ to _END_ of _TOTAL_ entries","info_empty":"Showing 0 to 0 of 0 entries","info_filtered":"(filtered from _MAX_ total entries)","zero_records":"No matching records found","search":"Search:","all_selected_text":"All items on this page were selected. ","select_all_link":"Select all pages","clear_selection":"Clear Selection.","pagination":{"all":"All","next":"Next","previous":"Previous"},"select":{"rows":{"0":"","_":": Selected %d rows","1":": Selected 1 row"}},"datepicker":{"dayNames":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"dayNamesShort":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"dayNamesMin":["S","M","T","W","T","F","S"],"monthNames":["January","February","March","April","May","June","July","August","September","October","November","December"],"monthNamesShort":["January","February","March","April","May","June","July","August","September","October","November","December"],"monthNamesMin":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"nextText":"Next","prevText":"Prev","currentText":"Today","closeText":"Done","today":"Today","clear":"Clear"}};/* ]]> */ </script><link rel='stylesheet' id='login-with-ajax-css'  href='http://bniajfi.org/wp-content/plugins/login-with-ajax/widget/widget.css?ver=3.1.7' type='text/css' media='all' />
<link rel='stylesheet' id='wpa-css-css'  href='http://bniajfi.org/wp-content/plugins/wp-attachments/styles/0/wpa.css?ver=2483f238954e7cae2cd4dcb43c59bf93' type='text/css' media='all' />
<script type='text/javascript' src='http://bniajfi.org/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='http://bniajfi.org/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var LWA = {"ajaxurl":"http:\/\/bniajfi.org\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script type='text/javascript' src='http://bniajfi.org/wp-content/plugins/login-with-ajax/widget/login-with-ajax.js?ver=3.1.7'></script>
 
<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />
  <script src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script><script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>

<script src="http://twitter.github.io/typeahead.js/releases/latest/typeahead.bundle.js"></script>
<script src=http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/Chart.min.js></script><script src=http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/bnia.js></script><script src=http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/indList.js?t=200></script><script src=http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/map3.js?t=1></script><script src=http://bniajfi.org/wp-content/themes/Grido/Theme_v1_3/js/vschart.js></script><script type='text/javascript' src='/vs_resources/charts/Chart.HorizontalBar.js'></script>
</body>
</html>
<div id='template'>  </div>