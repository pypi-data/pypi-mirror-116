(self.webpackChunkipysimulate=self.webpackChunkipysimulate||[]).push([[261],{406:(t,e,n)=>{var i=n(337),s=n(306).version;n(66),n(439);var a=i.DOMWidgetModel.extend({defaults:_.extend(i.DOMWidgetModel.prototype.defaults(),{_model_name:"ControlModel",_view_name:"ControlView",_model_module:"ipysimulate",_view_module:"ipysimulate",_model_module_version:s,_view_module_version:s}),initialize:function(t,e){i.DOMWidgetModel.prototype.initialize.call(this,t,e),this.charts=[]}}),o=i.DOMWidgetView.extend({click_play:function(t){!1===this.model.get("is_running")?this.send({event:"continue_simulation"}):(this.model.set({is_running:!1}),this.touch())},click_step:function(t){0==this.model.get("is_running")&&this.send({event:"increment_simulation"})},click_redo:function(t){1==this.model.get("is_running")?(this.model.set({do_reset:!0,is_running:!1}),this.touch()):this.send({event:"reset_simulation"})},click_info:function(t){},param_label_change:function(t,e,n){n.textContent=e,this.param_change(t,e)},param_change:function(t,e){this.send({event:"update_parameter",k:t,v:e})},render:function(){this.model.on("change:is_running",this.is_running_changed,this),this.model.on("change:_variables",this.variables_changed,this),this.control=document.createElement("div"),this.control.className="ipysimulate-control",this.el.appendChild(this.control),this.control_line=document.createElement("div"),this.control_line.className="button-row",this.control.appendChild(this.control_line),this.play_button=document.createElement("BUTTON"),this.play_button.className="ctr_btn fa fa-play",this.play_button.setAttribute("title","Run simulation"),this.control_line.appendChild(this.play_button),this.play_button.addEventListener("click",(t=>this.click_play()),!1),this.step_button=document.createElement("BUTTON"),this.step_button.className="ctr_btn fa fa-step-forward",this.step_button.setAttribute("title","Run single step"),this.control_line.appendChild(this.step_button),this.step_button.addEventListener("click",(t=>this.click_step()),!1),this.redo_button=document.createElement("BUTTON"),this.redo_button.className="ctr_btn last fa fa-repeat",this.redo_button.setAttribute("title","Reset simulation"),this.control_line.appendChild(this.redo_button),this.redo_button.addEventListener("click",(t=>this.click_redo()),!1),this.var_displays={};let t=this.model.get("_variables");for(const[e,n]of Object.entries(t)){let t=document.createElement("div");this.control.appendChild(t),t.className="row";let i=document.createElement("span");i.textContent=e+" ",i.className="plabel",t.appendChild(i);let s=document.createElement("span");s.textContent=n,t.appendChild(s),this.var_displays[e]=s}var e;let n=this.model.get("_pwidgets");for(e=0;e<n.length;e++){let t=n[e],s=document.createElement("div");s.className="row";let a=document.createElement("span");switch(a.className="plabel",a.textContent=t.name+" ",s.appendChild(a),this.control.appendChild(s),t.type){case"slider":let e=document.createElement("span");e.textContent=t.vdef.toString(),s.appendChild(e);let n=document.createElement("input");n.className="slider",n.setAttribute("id","myRange"),n.setAttribute("type","range"),n.setAttribute("step",t.step),n.setAttribute("min",t.vmin.toString()),n.setAttribute("max",t.vmax.toString()),n.setAttribute("value",t.vdef.toString()),n.addEventListener("change",(i=>this.param_label_change(t.name,n.value,e))),n.addEventListener("input",(i=>this.param_label_change(t.name,n.value,e))),s.appendChild(n);break;case"select":let a=t.values,o=document.createElement("select");var i;for(o.setAttribute("class","select"),i=0;i<a.length;i++){let t=document.createElement("option");t.value=a[i],t.text=a[i],o.appendChild(t)}o.addEventListener("change",(e=>this.param_change(t.name,o.value))),s.appendChild(o)}}this.send({event:"setup_simulation"})},is_running_changed:function(){!0===this.model.get("is_running")?(this.play_button.className="ctr_btn fa fa-pause",this.play_button.setAttribute("title","Pause simulation")):(this.play_button.className="ctr_btn fa fa-play",this.play_button.setAttribute("title","Run simulation"))},variables_changed:function(){let t=this.model.get("_variables");for(const[e,n]of Object.entries(t))this.var_displays[e].textContent=n},reset_changed:function(){this.model.data=[]}});t.exports={ControlModel:a,ControlView:o}},158:(t,e,n)=>{var i=n(337),s=n(306).version,a=n(956);n(170),n(439);var o=i.DOMWidgetModel.extend({defaults:_.extend(i.DOMWidgetModel.prototype.defaults(),{_model_name:"CustomWidgetModel",_view_name:"CustomWidgetView",_model_module:"ipysimulate",_view_module:"ipysimulate",_model_module_version:s,_view_module_version:s}),initialize:function(t,e){i.DOMWidgetModel.prototype.initialize.call(this,t,e),this.on("msg:custom",this._on_msg.bind(this)),this.config=this.get("config");let n=this.get("source");this.setup_func=Function("view","d3",n.setup),this.update_func=Function("view","d3","data",n.update),this.reset_func=Function("view","d3",n.reset)},_on_msg:function(t,e){if(t.what)switch(t.what){case"new_data":this.update_views(t.data);break;case"reset_data":this.reset_views(t.data)}},update_views:function(t){for(var e in this.views)this.views[e].then(this._update_view.bind(null,t))},_update_view:function(t,e){e.update(t)},reset_views:function(){for(var t in this.views)this.views[t].then(this._reset_view.bind(null))},_reset_view:function(t){t.reset()}}),r=i.DOMWidgetView.extend({render:function(){this.model.setup_func(this,a)},update:function(t){this.model.update_func(this,a,t)},reset:function(){this.model.reset_func(this,a)}});t.exports={CustomWidgetModel:o,CustomWidgetView:r}},568:(t,e,n)=>{var i=n(406),s=n(532),a=n(75),o=n(158);t.exports={ControlModel:i.ControlModel,ControlView:i.ControlView,CustomWidgetModel:o.CustomWidgetModel,CustomWidgetView:o.CustomWidgetView,LinechartModel:s.LinechartModel,LinechartView:s.LinechartView,ScatterModel:a.ScatterModel,ScatterView:a.ScatterView},t.exports.version=n(306).version},261:(t,e,n)=>{var i=n(568),s=n(337);t.exports={id:"ipysimulate:plugin",requires:[s.IJupyterWidgetRegistry],activate:function(t,e){e.registerWidget({name:"ipysimulate",version:i.version,exports:i})},autoStart:!0}},532:(t,e,n)=>{var i=n(337),s=n(306).version,a=n(956);n(170),n(439);var o=i.DOMWidgetModel.extend({defaults:_.extend(i.DOMWidgetModel.prototype.defaults(),{_model_name:"LinechartModel",_view_name:"LinechartView",_model_module:"ipysimulate",_view_module:"ipysimulate",_model_module_version:s,_view_module_version:s}),initialize:function(t,e){i.DOMWidgetModel.prototype.initialize.call(this,t,e),this.on("msg:custom",this._on_msg.bind(this)),this.xlabel=this.get("xlabel"),this.ylabels=this.get("ylabels"),this.reset_data()},_on_msg:function(t,e){if(t.what)switch(t.what){case"new_data":this.update(t.data);break;case"reset_data":this.reset()}},update:function(t){this.data.x.push(t.x);for(const[e,n]of Object.entries(t.series))this.series[e].push(n);this.update_views()},reset:function(){this.reset_data(),this.update_views()},update_views:function(){for(var t in this.views)this.views[t].then(this._update_view.bind(null,this.data))},_update_view:function(t,e){e.update(t)},reset_data:function(){var t;for(this.data={x:[],series:[]},this.series={},t=0;t<this.ylabels.length;t++){let e=this.ylabels[t],n={name:e,values:[]};this.data.series.push(n),this.series[e]=n.values}}}),r=i.DOMWidgetView.extend({render:function(){this.container=document.createElement("div"),this.container.className="ipysimulate-chart",this.el.appendChild(this.container);var t=500,e=a.select(this.container).append("svg").attr("style","width: 100%; height: 100%").attr("viewBox",[0,0,t,300]).append("g"),n=a.scaleLinear().range([40,470]),i=a.scaleLinear().range([260,20]),s=a.axisBottom().scale(n),o=a.axisLeft().scale(i);e.append("g").attr("transform","translate(0,260)").attr("class","myXaxis"),e.append("g").attr("transform","translate(40,0)").attr("class","myYaxis"),e.append("text").attr("class","chart-label").attr("text-anchor","middle").attr("x",255).attr("y",295).text(this.model.xlabel);var r=a.scaleOrdinal().domain(a.range(0,this.model.data.series.length,1)).range(a.schemeSet2),l=e.append("g").attr("fill","none").attr("stroke-width",1.5);l.selectAll("path").data(this.model.data.series).join("path").attr("stroke",((t,e)=>r(e))),e.selectAll("mydots").data(this.model.data.series).enter().append("circle").attr("cx",465).attr("cy",(function(t,e){return 20+25*e})).attr("r",7).style("stroke","white").style("fill",(function(t,e){return r(e)})),e.selectAll("mylabels").data(this.model.data.series).enter().append("text").attr("class","chart-label").attr("x",453).attr("y",(function(t,e){return 20+25*e+4.5})).text((function(t){return t.name})).attr("text-anchor","end"),this.paths=l,this.svg=e,this.x=n,this.y=i,this.xAxis=s,this.yAxis=o},update:function(t){var e=this.x,n=this.y,i=a.line().x(((n,i)=>e(t.x[i]))).y((t=>n(t)));e.domain(a.extent(t.x)),n.domain([a.min(t.series,(t=>a.min(t.values))),a.max(t.series,(t=>a.max(t.values)))]),this.paths.selectAll("path").data(t.series).attr("d",(t=>i(t.values))),this.svg.selectAll(".myXaxis").transition().duration(100).call(this.xAxis),this.svg.selectAll(".myYaxis").transition().duration(100).call(this.yAxis)}});t.exports={LinechartModel:o,LinechartView:r}},75:(t,e,n)=>{var i=n(337),s=n(306).version,a=n(956);n(170),n(439);var o=i.DOMWidgetModel.extend({defaults:_.extend(i.DOMWidgetModel.prototype.defaults(),{_model_name:"ScatterModel",_view_name:"ScatterView",_model_module:"ipysimulate",_view_module:"ipysimulate",_model_module_version:s,_view_module_version:s}),initialize:function(t,e){i.DOMWidgetModel.prototype.initialize.call(this,t,e),this.on("msg:custom",this._on_msg.bind(this)),this.initial=!0},_on_msg:function(t,e){if(t.what)switch(t.what){case"new_data":this.update(t.data);break;case"reset_data":this.reset(t.data)}},update:function(t){for(var e in this.views)this.views[e].then(this._update_view.bind(null,t))},reset:function(t){this.initial=!0,this.update(t)},_update_view:function(t,e){e.update(t)}}),r=i.DOMWidgetView.extend({render:function(){this.r=3,this.container=document.createElement("div"),this.container.className="ipysimulate-chart",this.el.appendChild(this.container);this.svg=a.select(this.container).append("svg").attr("style","width: 100%; height: 100%").attr("viewBox",[0,0,400,400]).append("g"),this.x=a.scaleLinear().range([30,370]),this.y=a.scaleLinear().range([360,20]),this.xAxis=a.axisBottom().scale(this.x),this.yAxis=a.axisLeft().scale(this.y),this.svg.append("g").attr("transform",`translate(0,${360+2*this.r})`).attr("class","myXaxis"),this.svg.append("g").attr("transform",`translate(${30-2*this.r},0)`).attr("class","myYaxis"),this.dots=this.svg.append("g")},initial_update:function(t){this.x.domain(a.extent(t,(t=>t.x))),this.y.domain(a.extent(t,(t=>t.y))),this.color=a.scaleOrdinal(t.map((t=>t.c)),a.schemeCategory10),this.svg.selectAll(".myXaxis").transition().duration(100).call(this.xAxis),this.svg.selectAll(".myYaxis").transition().duration(100).call(this.yAxis),this.model.initial=!1},update:function(t){!0===this.model.initial&&this.initial_update(t);var e=this.x,n=this.y,i=this.r,s=this.color;this.svg.selectAll("circle").remove(),this.dots.selectAll("dot").data(t).enter().append("circle").attr("cx",(function(t){return e(t.x)})).attr("cy",(function(t){return n(t.y)})).attr("r",i).style("fill",(t=>s(t.c)))}});t.exports={ScatterModel:o,ScatterView:r}},382:(t,e,n)=>{(t.exports=n(252)(!1)).push([t.id,".ipysimulate-chart {\n  background-color: #ffffff;\n  width: calc(100% - 10px);\n  height: calc(100% - 10px);\n  margin: 5px;\n  -moz-box-shadow: 1px 1px 2px 1px  #ccc8c8;\n  -webkit-box-shadow: 1px 1px 2px 1px  #ccc8c8;\n  box-shadow: 1px 1px 2px 1px  #ccc8c8;\n  box-sizing: content-box;\n}\n\n.chart-label {\n  font-size: 13px;\n}\n",""])},559:(t,e,n)=>{(t.exports=n(252)(!1)).push([t.id,".ipysimulate-control {\n    width: calc(100% - 30px);\n    height: calc(100% - 30px);\n    margin: 5px;\n    padding: 10px;\n    background-color: #eeebeb;\n    -moz-box-shadow: 1px 1px 2px 1px  #ccc8c8;\n    -webkit-box-shadow: 1px 1px 2px 1px  #ccc8c8;\n    box-shadow: 1px 1px 2px 1px  #ccc8c8;\n    box-sizing: content-box;\n}\n\n.ipysimulate-control .row {\n    margin-top: 10px;\n    margin-bottom: 10px;\n}\n\n.ipysimulate-control .button-row {\n    margin-top: 0px;\n    margin-bottom: 15px;\n}\n\n\n/* Text */\n\n.ipysimulate-control .heading {\n    font-weight: bold;\n    font-size: 18px;\n    margin-top: 5px;\n}\n\n.ipysimulate-control .centered {\n    text-align: center;\n}\n\n\n/* Control Buttons */\n\n.ipysimulate-control button {\n    /*display: block;*/\n    background-color: #53a0a9;\n    color: white;\n    width: 28px;\n    height: 28px;\n    padding: 0px;\n    margin-right: 5px;\n    /*padding: 10px 10px; Last one is left */\n    font-size: 12px;\n    -moz-box-shadow: 1px 1px 2px 0px #b1adad;\n    -webkit-box-shadow: 1px 1px 2px 0px #b1adad;\n    box-shadow: 1px 1px 2px 0px #b1adad;\n    border: none;\n}\n\n.ipysimulate-control button.last {\n    margin-right: 0px;\n}\n\n.ipysimulate-control button:hover {\n    -moz-box-shadow: 1px 1px 2px 1px #b1adad;\n    -webkit-box-shadow: 1px 1px 2px 1px #b1adad;\n    box-shadow: 1px 1px 2px 1px #b1adad;\n}\n\n\n/* Text */\n\n.ipysimulate-control .plabel {\n    font-weight: bold;\n}\n\n\n/* Sliders */\n\n.ipysimulate-control .slider {\n  -webkit-appearance: none;\n  width: 100%;\n  height: 5px;\n  border-radius: 5px;\n  background: #d3d3d3;\n  outline: none;\n  opacity: 1;\n  margin-top: 10px;\n}\n\n.ipysimulate-control .slider::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 15px;\n  height: 15px;\n    border:none;\n  border-radius: 50%;\n  background: #53a0a9;\n  cursor: pointer;\n}\n\n.ipysimulate-control .slider::-moz-range-thumb {\n  width: 15px;\n  height: 15px;\n  border-radius: 50%;\n  background: #53a0a9;\n  cursor: pointer;\n}\n\n/* Select */\n\n.ipysimulate-control select {\n    padding: 0 .5em;\n    color: #fff;\n    cursor: pointer;\n    width: 100%;\n    height: 24px;\n    line-height: 3;\n    background: #53a0a9;\n    overflow: hidden;\n    border-radius: .25em;\n    -moz-box-shadow: 1px 1px 2px 0px #b1adad;\n    -webkit-box-shadow: 1px 1px 2px 0px #b1adad;\n    box-shadow: 1px 1px 2px 0px #b1adad;\n    border: none;\n    margin-top: 3px;\n    margin-bottom: 3px;\n}\n",""])},252:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n,i=t[1]||"",s=t[3];if(!s)return i;if(e&&"function"==typeof btoa){var a=(n=s,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),o=s.sources.map((function(t){return"/*# sourceURL="+s.sourceRoot+t+" */"}));return[i].concat(o).concat([a]).join("\n")}return[i].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},s=0;s<this.length;s++){var a=this[s][0];"number"==typeof a&&(i[a]=!0)}for(s=0;s<t.length;s++){var o=t[s];"number"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),e.push(o))}},e}},170:(t,e,n)=>{var i=n(382);"string"==typeof i&&(i=[[t.id,i,""]]);n(723)(i,{transform:void 0}),i.locals&&(t.exports=i.locals)},66:(t,e,n)=>{var i=n(559);"string"==typeof i&&(i=[[t.id,i,""]]);n(723)(i,{transform:void 0}),i.locals&&(t.exports=i.locals)},723:(t,e,n)=>{var i,s,a={},o=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===s&&(s=i.apply(this,arguments)),s}),r=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t.call(this,n)),e[n]}}((function(t){return document.querySelector(t)})),l=null,d=0,c=[],p=n(947);function u(t,e){for(var n=0;n<t.length;n++){var i=t[n],s=a[i.id];if(s){s.refs++;for(var o=0;o<s.parts.length;o++)s.parts[o](i.parts[o]);for(;o<i.parts.length;o++)s.parts.push(g(i.parts[o],e))}else{var r=[];for(o=0;o<i.parts.length;o++)r.push(g(i.parts[o],e));a[i.id]={id:i.id,refs:1,parts:r}}}}function h(t,e){for(var n=[],i={},s=0;s<t.length;s++){var a=t[s],o=e.base?a[0]+e.base:a[0],r={css:a[1],media:a[2],sourceMap:a[3]};i[o]?i[o].parts.push(r):n.push(i[o]={id:o,parts:[r]})}return n}function m(t,e){var n=r(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=c[c.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),c.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function f(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=c.indexOf(t);e>=0&&c.splice(e,1)}function x(t){var e=document.createElement("style");return t.attrs.type="text/css",v(e,t.attrs),m(t,e),e}function v(t,e){Object.keys(e).forEach((function(n){t.setAttribute(n,e[n])}))}function g(t,e){var n,i,s,a;if(e.transform&&t.css){if(!(a=e.transform(t.css)))return function(){};t.css=a}if(e.singleton){var o=d++;n=l||(l=x(e)),i=w.bind(null,n,o,!1),s=w.bind(null,n,o,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",v(e,t.attrs),m(t,e),e}(e),i=C.bind(null,n,e),s=function(){f(n),n.href&&URL.revokeObjectURL(n.href)}):(n=x(e),i=y.bind(null,n),s=function(){f(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else s()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||(e.singleton=o()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=h(t,e);return u(n,e),function(t){for(var i=[],s=0;s<n.length;s++){var o=n[s];(r=a[o.id]).refs--,i.push(r)}for(t&&u(h(t,e),e),s=0;s<i.length;s++){var r;if(0===(r=i[s]).refs){for(var l=0;l<r.parts.length;l++)r.parts[l]();delete a[r.id]}}}};var _,b=(_=[],function(t,e){return _[t]=e,_.filter(Boolean).join("\n")});function w(t,e,n,i){var s=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=b(e,s);else{var a=document.createTextNode(s),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(a,o[e]):t.appendChild(a)}}function y(t,e){var n=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function C(t,e,n){var i=n.css,s=n.sourceMap,a=void 0===e.convertToAbsoluteUrls&&s;(e.convertToAbsoluteUrls||a)&&(i=p(i)),s&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */");var o=new Blob([i],{type:"text/css"}),r=t.href;t.href=URL.createObjectURL(o),r&&URL.revokeObjectURL(r)}},947:t=>{t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,i=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var s,a=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(a)?t:(s=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:i+a.replace(/^\.\//,""),"url("+JSON.stringify(s)+")")}))}},306:t=>{"use strict";t.exports={version:"0.2.1"}}}]);