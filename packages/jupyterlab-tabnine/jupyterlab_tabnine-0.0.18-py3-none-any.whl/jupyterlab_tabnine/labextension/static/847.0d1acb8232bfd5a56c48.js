"use strict";(self.webpackChunk_tabnine_jupyterlab=self.webpackChunk_tabnine_jupyterlab||[]).push([[847],{847:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var o=n(691),i=n(801);const r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ(=[%/{+#.,\\<+-|&*=$#@!";var s=n(631),c=n.n(s);function a(e,t){c().on(e.editor,"keyup",t)}const d="completer:invoke",l="completer:select",u="completer:select-notebook",m="completer:select-file";var p=n(288);class h extends p.DataConnector{constructor(e,t){super(),this.responseType="ICompletionItemsReply",this.completionItemsConnector=e,this.dataConnector=t}fetch(e){return Promise.all([this.completionItemsConnector.fetch(e),this.dataConnector.fetch(e)]).then((([e,t])=>function(e,t){const{start:n}=e,{end:o}=e,i=[];e.items.forEach((e=>i.push(e)));const r=t.metadata._jupyter_types_experimental;return t.matches.forEach(((e,t)=>i.push({label:e,type:r?r[t].type:""}))),{start:n,items:i,end:o}}(e,t)))}}var v=n(920),C=n(491);const f=C.ServerConnection.makeSettings(),g=v.URLExt.join(f.baseUrl,"tabnine");async function y(e){let t;try{t=await C.ServerConnection.makeRequest(g,{method:"POST",body:JSON.stringify({request:e,version:"3.2.71"})},f)}catch(e){throw new C.ServerConnection.NetworkError(e)}const n=await t.json();if(!t.ok)throw new C.ServerConnection.ResponseError(t,n.message);return n}const x=new(n(133).LabIcon)({name:"tabnine:logo",svgstr:'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11.7403 4.06967C11.9013 3.97678 12.0987 3.97678 12.2597 4.06965L18.7341 7.80299C18.8985 7.89777 19 8.07483 19 8.26667V15.7333C19 15.9252 18.8985 16.1022 18.7341 16.197L12.2597 19.9303C12.0987 20.0232 11.9013 20.0232 11.7403 19.9303L5.26592 16.197C5.10154 16.1022 5 15.9252 5 15.7333L5 8.26667C5 8.07482 5.10155 7.89776 5.26595 7.80297L11.7403 4.06967ZM12 5.14679L9.79451 6.41871L17.9487 11.0867V8.57701L12 5.14679ZM17.4076 12.0017L9.25632 7.33535L9.28561 16.6851L17.4076 12.0017ZM8.23429 16.6818L8.20501 7.33527L6.0513 8.57702L6.0513 15.423L8.23429 16.6818ZM9.82667 17.6L17.9487 12.9166V15.423L12 18.8532L9.82667 17.6Z" fill="url(#paint0_linear)"/>\n<defs>\n<linearGradient id="paint0_linear" x1="20.2363" y1="17.56" x2="5.1406" y2="3.84524" gradientUnits="userSpaceOnUse">\n<stop stop-color="#4BA1FC"/>\n<stop offset="1" stop-color="#EC2AED"/>\n</linearGradient>\n</defs>\n</svg>\n'});class w extends p.DataConnector{constructor(e){super(),this.responseType="ICompletionItemsReply",this._editor=e.editor,this._path=e.path}fetch(e){return async function({editor:e,text:t,path:n}){const o=e.getCursorPosition(),i=e.getOffsetAt(o),r=Math.max(0,i-1e4),s=i+1e4,c=t.slice(r,i),a=t.slice(i,s),d=await async function(e){return y({Autocomplete:e})}({before:c,after:a,max_num_results:5,filename:n,region_includes_beginning:0===i,region_includes_end:!1}),l=d.results.map((e=>({label:e.new_prefix,type:"tabnine",icon:x})));return{start:i-d.old_prefix.length,end:i,items:l}}({editor:this._editor,text:e.text,path:this._path})}}function b(e){var t;switch(null===(t=null==e?void 0:e.model)||void 0===t?void 0:t.type){case"markdown":return"test.md";default:return"test.py"}}const k={id:"@tabnine/jupyterlab:notebook",autoStart:!0,requires:[o.ICompletionManager,i.INotebookTracker],activate:async(e,t,n)=>{console.log("Tabnine extension is activated!"),n.widgetAdded.connect(((n,i)=>{var s,c;let l=null!==(c=null===(s=i.content.activeCell)||void 0===s?void 0:s.editor)&&void 0!==c?c:null;const{session:u}=i.sessionContext,m={session:u,editor:l,path:b(i.content.activeCell)},p=new o.CompletionConnector({session:u,editor:l}),v=t.register({connector:p,editor:l,parent:i}),C=()=>{var t,n;l=null!==(n=null===(t=i.content.activeCell)||void 0===t?void 0:t.editor)&&void 0!==n?n:null,m.session=i.sessionContext.session,m.path=b(i.content.activeCell),m.editor=l,v.editor=l,a(l,((t,n)=>(r.includes(n.key)&&e.commands.execute(d,{id:i.id}),!1)));const s=new w(m),c=new o.CompletionConnector(m);v.connector=new h(s,c)};i.content.activeCellChanged.connect(C),i.sessionContext.sessionChanged.connect(C)})),e.commands.addCommand("completer:invoke-notebook",{execute:()=>{var t;const o=n.currentWidget;if(o&&"code"===(null===(t=o.content.activeCell)||void 0===t?void 0:t.model.type))return e.commands.execute(d,{id:o.id})}}),e.commands.addCommand(u,{execute:()=>{const t=n.currentWidget&&n.currentWidget.id;if(t)return e.commands.execute(l,{id:t})}}),e.commands.addKeyBinding({command:u,keys:["Enter"],selector:".jp-Notebook .jp-mod-completer-active"})}};var _=n(12),L=n(850);const I={id:"@tabnine/jupyterlab:files",requires:[o.ICompletionManager,_.IEditorTracker],autoStart:!0,activate:(e,t,n)=>{const i={};n.widgetAdded.connect(((n,s)=>{const c=e.serviceManager.sessions,l=s.content.editor,u=new o.ContextConnector({editor:l}),m=new w({editor:l,path:s.context.path}),p=new h(m,u),v=t.register({connector:p,editor:l,parent:s});a(l,((t,n)=>(r.includes(n.key)&&e.commands.execute(d,{id:s.id}),!1)));const C=(e,t)=>{const n=i[s.id],r=(0,L.find)(t,(e=>e.path===s.context.path));if(r){if(n&&n.id===r.id)return;n&&(delete i[s.id],n.dispose());const e=c.connectTo({model:r}),t={editor:l,session:e,path:s.context.path},a=new w(t),d=new o.CompletionConnector(t);v.connector=new h(a,d),i[s.id]=e}else v.connector=p,n&&(delete i[s.id],n.dispose())};C(0,(0,L.toArray)(c.running())),c.runningChanged.connect(C),s.disposed.connect((()=>{c.runningChanged.disconnect(C);const e=i[s.id];e&&(delete i[s.id],e.dispose())}))})),e.commands.addCommand("completer:invoke-file",{execute:()=>{const t=n.currentWidget&&n.currentWidget.id;if(t)return e.commands.execute(d,{id:t})}}),e.commands.addCommand(m,{execute:()=>{const t=n.currentWidget&&n.currentWidget.id;if(t)return e.commands.execute(l,{id:t})}}),e.commands.addKeyBinding({command:m,keys:["Enter"],selector:".jp-FileEditor .jp-mod-completer-active"})}};var S=n(985);async function j(){return y({State:{}})}const E=new(n(706).Widget);var M;E.node.textContent="tabnine",E.node.style.cursor="pointer",E.node.innerText="⌬ tabnine",E.node.onclick=()=>{!async function(e){y({Configuration:{quiet:!1}})}()},M=e=>{let t="";"Pro"===e.service_level&&(t=" pro"),E.node.innerText=`⌬ tabnine ${t}`},j().then(M),setInterval((()=>{j().then(M)}),1e4);const T=[k,I,{id:"@tabnine/jupyterlab:frame",autoStart:!0,requires:[S.IStatusBar],activate:async(e,t)=>{!function(e){e.registerStatusItem("tabnine",{align:"right",item:E})}(t)}}]}}]);