"use strict";(self.webpackChunk_tabnine_jupyterlab=self.webpackChunk_tabnine_jupyterlab||[]).push([[285],{285:(e,t,n)=>{n.r(t),n.d(t,{default:()=>w});var o=n(691),i=n(801),s=n(12),r=n(850),c=n(288);class d extends c.DataConnector{constructor(e,t){super(),this.responseType="ICompletionItemsReply",this.completionItemsConnector=e,this.dataConnector=t}fetch(e){return Promise.all([this.completionItemsConnector.fetch(e),this.dataConnector.fetch(e)]).then((([e,t])=>function(e,t){const{start:n}=e,{end:o}=e,i=[];e.items.forEach((e=>i.push(e)));const s=t.metadata._jupyter_types_experimental;return t.matches.forEach(((e,t)=>i.push({label:e,type:s?s[t].type:""}))),{start:n,items:i,end:o}}(e,t)))}}const a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ(=[%/{+#.,\\<+-|&*%=$#@!";var l=n(920),m=n(491);const u=m.ServerConnection.makeSettings(),p=l.URLExt.join(u.baseUrl,"tabnine");const v=new(n(854).LabIcon)({name:"tabnine:logo",svgstr:'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="24" height="24" fill="url(#paint0_linear)"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11.2959 6.0566C11.4225 5.98114 11.5775 5.98113 11.7041 6.05659L16.7911 9.08993C16.9202 9.16694 17 9.3108 17 9.46667V15.5333C17 15.6892 16.9202 15.8331 16.7911 15.9101L11.7041 18.9434C11.5775 19.0189 11.4225 19.0189 11.2959 18.9434L6.20894 15.9101C6.07978 15.8331 6 15.6892 6 15.5333L6 9.46667C6 9.31079 6.07979 9.16693 6.20896 9.08992L11.2959 6.0566ZM11.5 6.93177L9.76711 7.9652L16.174 11.758V9.71882L11.5 6.93177ZM15.7488 12.5014L9.34425 8.70997L9.36727 16.3066L15.7488 12.5014ZM8.54123 16.3039L8.51822 8.70991L6.82602 9.71883L6.82602 15.2812L8.54123 16.3039ZM9.79238 17.05L16.174 13.2447V15.2812L11.5 18.0682L9.79238 17.05Z" fill="white"/>\n<defs>\n<linearGradient id="paint0_linear" x1="26.1193" y1="20.34" x2="3.3876" y2="-3.2626" gradientUnits="userSpaceOnUse">\n<stop stop-color="#4BA1FC"/>\n<stop offset="1" stop-color="#EC2AED"/>\n</linearGradient>\n</defs>\n</svg>\n'});class C extends c.DataConnector{constructor(e){super(),this.responseType="ICompletionItemsReply",this._editor=e.editor,this._session=e.session}fetch(e){return async function({editor:e,text:t,session:n}){const o=e.getCursorPosition(),i=e.getOffsetAt(o),s=e.getTokenForPosition(o),r=Math.max(0,i-1e4),c=i+1e4,d=t.slice(r,i),a=t.slice(i,c),l=await async function(e){return async function(e){let t;try{t=await m.ServerConnection.makeRequest(p,{method:"POST",body:JSON.stringify({request:e,version:"3.2.71"})},u)}catch(e){throw new m.ServerConnection.NetworkError(e)}const n=await t.json();if(!t.ok)throw new m.ServerConnection.ResponseError(t,n.message);return n}({Autocomplete:e})}({before:d,after:a,max_num_results:5,filename:null==n?void 0:n.path,region_includes_beginning:0===i,region_includes_end:!0}),C=l.results.map((e=>({label:e.new_prefix,type:"tabnine",icon:v})));return{start:i-l.old_prefix.length,end:i+s.value.length,items:C}}({editor:this._editor,text:e.text,session:this._session})}}var h,g=n(631),f=n.n(g);function k(e,t){f().on(e.editor,"keyup",t)}!function(e){e.invoke="completer:invoke",e.invokeConsole="completer:invoke-console",e.invokeNotebook="completer:invoke-notebook",e.invokeFile="completer:invoke-file",e.select="completer:select",e.selectConsole="completer:select-console",e.selectNotebook="completer:select-notebook",e.selectFile="completer:select-file"}(h||(h={}));const w=[{id:"@tabnine/jupyterlab:notebook",autoStart:!0,requires:[o.ICompletionManager,i.INotebookTracker],activate:async(e,t,n)=>{console.log("Tabnine extension is activated!"),n.widgetAdded.connect(((n,i)=>{var s,r;let c=null!==(r=null===(s=i.content.activeCell)||void 0===s?void 0:s.editor)&&void 0!==r?r:null;const{session:l}=i.sessionContext,m={session:l,editor:c},u=new o.CompletionConnector({session:l,editor:c}),p=t.register({connector:u,editor:c,parent:i}),v=()=>{var t,n;c=null!==(n=null===(t=i.content.activeCell)||void 0===t?void 0:t.editor)&&void 0!==n?n:null,m.session=i.sessionContext.session,m.editor=c,p.editor=c,k(c,((t,n)=>(a.includes(n.key)&&e.commands.execute(h.invoke,{id:i.id}),!1)));const s=new C(m),r=new o.CompletionConnector(m);p.connector=new d(s,r)};i.content.activeCellChanged.connect(v),i.sessionContext.sessionChanged.connect(v)})),e.commands.addCommand(h.invokeNotebook,{execute:()=>{var t;const o=n.currentWidget;if(o&&"code"===(null===(t=o.content.activeCell)||void 0===t?void 0:t.model.type))return e.commands.execute(h.invoke,{id:o.id})}}),e.commands.addCommand(h.selectNotebook,{execute:()=>{const t=n.currentWidget&&n.currentWidget.id;if(t)return e.commands.execute(h.select,{id:t})}}),e.commands.addKeyBinding({command:h.selectNotebook,keys:["Enter"],selector:".jp-Notebook .jp-mod-completer-active"})}},{id:"@tabnine/jupyterlab:files",requires:[o.ICompletionManager,s.IEditorTracker],autoStart:!0,activate:(e,t,n)=>{const i={};n.widgetAdded.connect(((n,s)=>{const c=e.serviceManager.sessions,l=s.content.editor,m=new o.ContextConnector({editor:l}),u=new C({editor:l}),p=new d(u,m),v=t.register({connector:p,editor:l,parent:s});k(l,((t,n)=>(a.includes(n.key)&&e.commands.execute(h.invoke,{id:s.id}),!1)));const g=(e,t)=>{const n=i[s.id],a=(0,r.find)(t,(e=>e.path===s.context.path));if(a){if(n&&n.id===a.id)return;n&&(delete i[s.id],n.dispose());const e=c.connectTo({model:a}),t={editor:l,session:e},r=new C(t),m=new o.CompletionConnector(t);v.connector=new d(r,m),i[s.id]=e}else v.connector=p,n&&(delete i[s.id],n.dispose())};g(0,(0,r.toArray)(c.running())),c.runningChanged.connect(g),s.disposed.connect((()=>{c.runningChanged.disconnect(g);const e=i[s.id];e&&(delete i[s.id],e.dispose())}))})),e.commands.addCommand(h.invokeFile,{execute:()=>{const t=n.currentWidget&&n.currentWidget.id;if(t)return e.commands.execute(h.invoke,{id:t})}}),e.commands.addCommand(h.selectFile,{execute:()=>{const t=n.currentWidget&&n.currentWidget.id;if(t)return e.commands.execute(h.select,{id:t})}}),e.commands.addKeyBinding({command:h.selectFile,keys:["Enter"],selector:".jp-FileEditor .jp-mod-completer-active"})}}]}}]);