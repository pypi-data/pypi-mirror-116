"use strict";(self.webpackChunk_tabnine_jupyterlab=self.webpackChunk_tabnine_jupyterlab||[]).push([[622],{622:(e,t,n)=>{n.r(t),n.d(t,{default:()=>j});var o=n(691),i=n(801);const s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ(=[%/{+#.,\\<+-|&*=$#@!";var r=n(631),c=n.n(r);function a(e,t){c().on(e.editor,"keyup",t)}const d="completer:invoke",l="completer:select",u="completer:select-notebook",m="completer:select-file";var p=n(288);class C extends p.DataConnector{constructor(e,t){super(),this.responseType="ICompletionItemsReply",this.completionItemsConnector=e,this.dataConnector=t}fetch(e){return Promise.all([this.completionItemsConnector.fetch(e),this.dataConnector.fetch(e)]).then((([e,t])=>function(e,t){const{start:n}=e,{end:o}=e,i=[];e.items.forEach((e=>i.push(e)));const s=t.metadata._jupyter_types_experimental;return t.matches.forEach(((e,t)=>i.push({label:e,type:s?s[t].type:""}))),{start:n,items:i,end:o}}(e,t)))}}var g=n(920),h=n(491);const f=h.ServerConnection.makeSettings(),v=g.URLExt.join(f.baseUrl,"tabnine");async function y(e){let t;try{t=await h.ServerConnection.makeRequest(v,{method:"POST",body:JSON.stringify({request:e,version:"3.2.71"})},f)}catch(e){throw new h.ServerConnection.NetworkError(e)}const n=await t.json();if(!t.ok)throw new h.ServerConnection.ResponseError(t,n.message);return n}const w=new(n(133).LabIcon)({name:"tabnine:logo",svgstr:'\n<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<rect width="24" height="24" fill="url(#paint0_linear)"/>\n<path fill-rule="evenodd" clip-rule="evenodd" d="M11.2959 6.0566C11.4225 5.98114 11.5775 5.98113 11.7041 6.05659L16.7911 9.08993C16.9202 9.16694 17 9.3108 17 9.46667V15.5333C17 15.6892 16.9202 15.8331 16.7911 15.9101L11.7041 18.9434C11.5775 19.0189 11.4225 19.0189 11.2959 18.9434L6.20894 15.9101C6.07978 15.8331 6 15.6892 6 15.5333L6 9.46667C6 9.31079 6.07979 9.16693 6.20896 9.08992L11.2959 6.0566ZM11.5 6.93177L9.76711 7.9652L16.174 11.758V9.71882L11.5 6.93177ZM15.7488 12.5014L9.34425 8.70997L9.36727 16.3066L15.7488 12.5014ZM8.54123 16.3039L8.51822 8.70991L6.82602 9.71883L6.82602 15.2812L8.54123 16.3039ZM9.79238 17.05L16.174 13.2447V15.2812L11.5 18.0682L9.79238 17.05Z" fill="white"/>\n<defs>\n<linearGradient id="paint0_linear" x1="26.1193" y1="20.34" x2="3.3876" y2="-3.2626" gradientUnits="userSpaceOnUse">\n<stop stop-color="#4BA1FC"/>\n<stop offset="1" stop-color="#EC2AED"/>\n</linearGradient>\n</defs>\n</svg>\n'});class x extends p.DataConnector{constructor(e){super(),this.responseType="ICompletionItemsReply",this._editor=e.editor,this._session=e.session}fetch(e){return async function({editor:e,text:t,session:n}){const o=e.getCursorPosition(),i=e.getOffsetAt(o),s=Math.max(0,i-1e4),r=i+1e4,c=t.slice(s,i),a=t.slice(i,r),d=await async function(e){return y({Autocomplete:e})}({before:c,after:a,max_num_results:5,filename:null==n?void 0:n.path,region_includes_beginning:0===i,region_includes_end:!1}),l=d.results.map((e=>({label:e.new_prefix,type:"tabnine",icon:w})));return{start:i-d.old_prefix.length,end:i,items:l}}({editor:this._editor,text:e.text,session:this._session})}}const b={id:"@tabnine/jupyterlab:notebook",autoStart:!0,requires:[o.ICompletionManager,i.INotebookTracker],activate:async(e,t,n)=>{console.log("Tabnine extension is activated!"),n.widgetAdded.connect(((n,i)=>{var r,c;let l=null!==(c=null===(r=i.content.activeCell)||void 0===r?void 0:r.editor)&&void 0!==c?c:null;const{session:u}=i.sessionContext,m={session:u,editor:l},p=new o.CompletionConnector({session:u,editor:l}),g=t.register({connector:p,editor:l,parent:i}),h=()=>{var t,n;l=null!==(n=null===(t=i.content.activeCell)||void 0===t?void 0:t.editor)&&void 0!==n?n:null,m.session=i.sessionContext.session,m.editor=l,g.editor=l,a(l,((t,n)=>(s.includes(n.key)&&e.commands.execute(d,{id:i.id}),!1)));const r=new x(m),c=new o.CompletionConnector(m);g.connector=new C(r,c)};i.content.activeCellChanged.connect(h),i.sessionContext.sessionChanged.connect(h)})),e.commands.addCommand("completer:invoke-notebook",{execute:()=>{var t;const o=n.currentWidget;if(o&&"code"===(null===(t=o.content.activeCell)||void 0===t?void 0:t.model.type))return e.commands.execute(d,{id:o.id})}}),e.commands.addCommand(u,{execute:()=>{const t=n.currentWidget&&n.currentWidget.id;if(t)return e.commands.execute(l,{id:t})}}),e.commands.addKeyBinding({command:u,keys:["Enter"],selector:".jp-Notebook .jp-mod-completer-active"})}};var k=n(12),L=n(850);const _={id:"@tabnine/jupyterlab:files",requires:[o.ICompletionManager,k.IEditorTracker],autoStart:!0,activate:(e,t,n)=>{const i={};n.widgetAdded.connect(((n,r)=>{const c=e.serviceManager.sessions,l=r.content.editor,u=new o.ContextConnector({editor:l}),m=new x({editor:l}),p=new C(m,u),g=t.register({connector:p,editor:l,parent:r});a(l,((t,n)=>(s.includes(n.key)&&e.commands.execute(d,{id:r.id}),!1)));const h=(e,t)=>{const n=i[r.id],s=(0,L.find)(t,(e=>e.path===r.context.path));if(s){if(n&&n.id===s.id)return;n&&(delete i[r.id],n.dispose());const e=c.connectTo({model:s}),t={editor:l,session:e},a=new x(t),d=new o.CompletionConnector(t);g.connector=new C(a,d),i[r.id]=e}else g.connector=p,n&&(delete i[r.id],n.dispose())};h(0,(0,L.toArray)(c.running())),c.runningChanged.connect(h),r.disposed.connect((()=>{c.runningChanged.disconnect(h);const e=i[r.id];e&&(delete i[r.id],e.dispose())}))})),e.commands.addCommand("completer:invoke-file",{execute:()=>{const t=n.currentWidget&&n.currentWidget.id;if(t)return e.commands.execute(d,{id:t})}}),e.commands.addCommand(m,{execute:()=>{const t=n.currentWidget&&n.currentWidget.id;if(t)return e.commands.execute(l,{id:t})}}),e.commands.addKeyBinding({command:m,keys:["Enter"],selector:".jp-FileEditor .jp-mod-completer-active"})}};var I=n(985);const S=new(n(706).Widget);S.node.textContent="tabnine",S.node.style.cursor="pointer",S.node.innerText="âŒ¬ tabnine",S.node.onclick=()=>{!async function(e){y({Configuration:{quiet:!1}})}()};const j=[b,_,{id:"@tabnine/jupyterlab:frame",autoStart:!0,requires:[I.IStatusBar],activate:async(e,t)=>{!function(e){e.registerStatusItem("tabnine",{align:"right",item:S})}(t)}}]}}]);