{"version":3,"file":"chunks/app_components_modals_teamAccessRequestModal_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"2tBAuBA,MAAMA,UAAgCC,EAAAA,UAAwB,mDAC7C,CACbC,YAAY,KAF8C,2BAK9CC,UACZ,MAAM,IAACC,EAAD,SAAMC,EAAN,MAAgBC,EAAhB,OAAuBC,EAAvB,WAA+BC,GAAcC,KAAKC,MAExDD,KAAKE,SAAS,CAACT,YAAY,IAE3B,UACQE,EAAIQ,eAAJ,yBACcN,EADd,oBAC+BD,EAD/B,kBACiDE,EADjD,KAEJ,CACEM,OAAQ,UAGZC,EAAAA,EAAAA,KAAkBC,EAAAA,EAAAA,GAAE,mCACpB,MAAOC,IACPC,EAAAA,EAAAA,KAAgBF,EAAAA,EAAAA,GAAE,gCAEpBN,KAAKE,SAAS,CAACT,YAAY,IAC3BM,OAGFU,SACE,MAAM,KAACC,EAAD,OAAOC,EAAP,WAAeZ,EAAf,OAA2BD,GAAUE,KAAKC,MAEhD,OACE,QAAC,EAAAW,SAAD,YACE,QAACF,EAAD,WACGG,EAAAA,EAAAA,IACC,sIACA,CAACC,KAAMhB,OAGX,QAACa,EAAD,WACE,QAACI,EAAD,YACE,QAAC,KAAD,CAAQC,QAASjB,EAAjB,UAA8BO,EAAAA,EAAAA,GAAE,aAChC,QAAC,KAAD,CACEW,SAAS,UACTD,QAAShB,KAAKkB,YACdC,KAAMnB,KAAKoB,MAAM3B,WACjB4B,WAAS,EAJX,UAMGf,EAAAA,EAAAA,GAAE,uBA7CXf,EAAAA,YAAAA,0BAsDN,MAAMwB,GAAc,OAAO,MAAP,qBAAH,wEAGHO,EAAAA,EAAAA,GAAM,GAHH,KAMjB,GAAeC,EAAAA,EAAAA,GAAQhC,I,8TCxDvB,MA0BA,EA1BgB,CACdiC,GACCC,gBAAAA,GAAgC,MAFnB,mBAId,cAAcC,EAAAA,UAGZC,YAAY1B,GACV2B,MAAM3B,IAD4B,0BAElCD,KAAKL,IAAM,IAAIkC,EAAAA,GAGjBC,uBACOL,GACHzB,KAAKL,IAAIoC,QAMbtB,SACE,MAAM,IAACd,KAAQM,GAASD,KAAKC,MAC7B,OAAO,QAACuB,EAAD,CAAwB7B,IAAKA,MAAAA,EAAAA,EAAOK,KAAKL,OAAQM,OAtB9C,0CAKoB+B,EAAAA,EAAAA,GAAeR,GALnC","sources":["webpack:///./app/components/modals/teamAccessRequestModal.tsx","webpack:///./app/utils/withApi.tsx"],"sourcesContent":["import {Component, Fragment} from 'react';\nimport styled from '@emotion/styled';\n\nimport {addErrorMessage, addSuccessMessage} from 'app/actionCreators/indicator';\nimport {ModalRenderProps, TeamAccessRequestModalOptions} from 'app/actionCreators/modal';\nimport {Client} from 'app/api';\nimport Button from 'app/components/button';\nimport {t, tct} from 'app/locale';\nimport space from 'app/styles/space';\nimport withApi from 'app/utils/withApi';\n\ntype Props = ModalRenderProps &\n  TeamAccessRequestModalOptions & {\n    api: Client;\n    memberId: string;\n    teamId: string;\n    orgId: string;\n  };\n\ntype State = {\n  createBusy: boolean;\n};\n\nclass CreateTeamAccessRequest extends Component<Props, State> {\n  state: State = {\n    createBusy: false,\n  };\n\n  handleClick = async () => {\n    const {api, memberId, orgId, teamId, closeModal} = this.props;\n\n    this.setState({createBusy: true});\n\n    try {\n      await api.requestPromise(\n        `/organizations/${orgId}/members/${memberId}/teams/${teamId}/`,\n        {\n          method: 'POST',\n        }\n      );\n      addSuccessMessage(t('Team request sent for approval'));\n    } catch (err) {\n      addErrorMessage(t('Unable to send team request'));\n    }\n    this.setState({createBusy: false});\n    closeModal();\n  };\n\n  render() {\n    const {Body, Footer, closeModal, teamId} = this.props;\n\n    return (\n      <Fragment>\n        <Body>\n          {tct(\n            'You do not have permission to add members to the #[team] team, but we will send a request to your organization admins for approval.',\n            {team: teamId}\n          )}\n        </Body>\n        <Footer>\n          <ButtonGroup>\n            <Button onClick={closeModal}>{t('Cancel')}</Button>\n            <Button\n              priority=\"primary\"\n              onClick={this.handleClick}\n              busy={this.state.createBusy}\n              autoFocus\n            >\n              {t('Continue')}\n            </Button>\n          </ButtonGroup>\n        </Footer>\n      </Fragment>\n    );\n  }\n}\n\nconst ButtonGroup = styled('div')`\n  display: grid;\n  grid-template-columns: max-content max-content;\n  grid-gap: ${space(1)};\n`;\n\nexport default withApi(CreateTeamAccessRequest);\n","import * as React from 'react';\n\nimport {Client} from 'app/api';\nimport getDisplayName from 'app/utils/getDisplayName';\n\ntype InjectedApiProps = {\n  api: Client;\n};\n\ntype WrappedProps<P> = Omit<P, keyof InjectedApiProps> & Partial<InjectedApiProps>;\n\ntype OptionProps = {\n  /**\n   * Enabling this option will disable clearing in-flight requests when the\n   * component is unmounted.\n   *\n   * This may be useful in situations where your component needs to finish up\n   * some where the client was passed into some type of action creator and the\n   * component is unmounted.\n   */\n  persistInFlight?: boolean;\n};\n\n/**\n * React Higher-Order Component (HoC) that provides \"api\" client when mounted,\n * and clears API requests when component is unmounted.\n */\nconst withApi = <P extends InjectedApiProps>(\n  WrappedComponent: React.ComponentType<P>,\n  {persistInFlight}: OptionProps = {}\n) =>\n  class extends React.Component<WrappedProps<P>> {\n    static displayName = `withApi(${getDisplayName(WrappedComponent)})`;\n\n    constructor(props: WrappedProps<P>) {\n      super(props);\n      this.api = new Client();\n    }\n\n    componentWillUnmount() {\n      if (!persistInFlight) {\n        this.api.clear();\n      }\n    }\n\n    private api: Client;\n\n    render() {\n      const {api, ...props} = this.props;\n      return <WrappedComponent {...({api: api ?? this.api, ...props} as P)} />;\n    }\n  };\n\nexport default withApi;\n"],"names":["CreateTeamAccessRequest","Component","createBusy","async","api","memberId","orgId","teamId","closeModal","this","props","setState","requestPromise","method","addSuccessMessage","t","err","addErrorMessage","render","Body","Footer","Fragment","tct","team","ButtonGroup","onClick","priority","handleClick","busy","state","autoFocus","space","withApi","WrappedComponent","persistInFlight","React","constructor","super","Client","componentWillUnmount","clear","getDisplayName"],"sourceRoot":""}