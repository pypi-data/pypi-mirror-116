"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_performance_trends_index_tsx","app_components_sentryDocumentTitle_tsx"],{"./app/components/events/searchBar.tsx":(e,t,n)=>{n.d(t,{Z:()=>k});var r,s=n("../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),o=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/core-js/modules/es.string.replace.js"),n("../node_modules/core-js/modules/es.object.from-entries.js"),n("../node_modules/react/index.js")),i=n("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),l=n("../node_modules/lodash/assign.js"),c=n.n(l),d=n("../node_modules/lodash/flatten.js"),p=n.n(d),u=n("../node_modules/lodash/isEqual.js"),m=n.n(u),h=n("../node_modules/lodash/memoize.js"),g=n.n(h),Z=n("../node_modules/lodash/omit.js"),x=n.n(Z),y=n("./app/actionCreators/tags.tsx"),f=n("./app/components/smartSearchBar/index.tsx"),v=n("./app/constants/index.tsx"),w=n("./app/types/index.tsx"),b=n("./app/utils.tsx"),_=n("./app/utils/discover/fields.tsx"),j=n("./app/utils/measurements/measurements.tsx"),S=n("./app/utils/withApi.tsx"),E=n("./app/utils/withTags.tsx"),T=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const C=new RegExp("^".concat(v.c$,"|\\").concat(v.ir),"g");class P extends a.PureComponent{constructor(...e){super(...e),(0,o.Z)(this,"getEventFieldValues",g()(((e,t,n)=>{const{api:r,organization:s,projectIds:o}=this.props,a=null==o?void 0:o.map(String);return(0,_.h1)(e.key)||(0,_.Xr)(e.key)?Promise.resolve([]):(0,y.Fo)(r,s.slug,e.key,t,a,n,!0).then((e=>p()(e.filter((({name:e})=>(0,b.ri)(e))).map((({name:e})=>e)))),(()=>{throw new Error("Unable to fetch event field values")}))}),(({key:e},t)=>"".concat(e,"-").concat(t)))),(0,o.Z)(this,"prepareQuery",(e=>e.replace(C,"")))}componentDidMount(){var e,t;null===(e=(t=this.getEventFieldValues.cache).clear)||void 0===e||e.call(t)}componentDidUpdate(e){var t,n;m()(this.props.projectIds,e.projectIds)||null===(t=(n=this.getEventFieldValues.cache).clear)||void 0===t||t.call(n)}getTagList(e){const{fields:t,organization:n,tags:r,omitTags:s}=this.props,o=t?Object.fromEntries(t.filter((e=>!Object.keys(_.wZ).includes(e.field)&&!(0,_.GO)(e.field))).map((e=>[e.field,{key:e.field,name:e.field}]))):{},a=n.features.includes("performance-view")?Object.assign({},e,_.wZ,o):x()(_.wZ,_.J8),i=n.features.includes("semver")?Object.assign({},_.jg,a):a,l=c()({},r,i);return l.has={key:"has",name:"Has property",values:Object.keys(l),predefined:!0},x()(l,null!=s?s:[])}render(){const{organization:e}=this.props;return(0,T.tZ)(j.Z,{organization:e,children:({measurements:e})=>{const t=this.getTagList(e);return(0,T.tZ)(i.ms,{children:({css:e})=>(0,T.tZ)(f.Z,{...this.props,hasRecentSearches:!0,savedSearchType:w.L4.EVENT,onGetTagValues:this.getEventFieldValues,supportedTags:t,prepareQuery:this.prepareQuery,excludeEnvironment:!0,dropdownClassName:e(r||(r=(0,s.Z)(["\n                    max-height: 300px;\n                    overflow-y: auto;\n                  "])))})})}})}}P.displayName="SearchBar";const k=(0,S.Z)((0,E.Z)(P))},"./app/components/sentryDocumentTitle.tsx":(e,t,n)=>{n.d(t,{Z:()=>i}),n("../node_modules/react/index.js");var r=n("../node_modules/react-document-title/index.js"),s=n.n(r),o=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a({title:e,orgSlug:t,projectSlug:n,children:r}){const a=t||n?t&&n?"".concat(e," - ").concat(t," - ").concat(n):t?"".concat(e," - ").concat(t):"".concat(e," - ").concat(n):e;return(0,o.tZ)(s(),{title:"".concat(a," - Sentry"),children:r})}a.displayName="SentryDocumentTitle";const i=a},"./app/utils/measurements/measurements.tsx":(e,t,n)=>{n.d(t,{Z:()=>d}),n("../node_modules/core-js/modules/es.object.from-entries.js"),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=n("../node_modules/react/index.js"),s=n("./app/utils/performance/vitals/constants.tsx"),o=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a(e){return Object.fromEntries(Object.entries(e).map((([e,t])=>[e,{name:t.name,key:e}])))}const i=a(s.T),l=a(s.r);function c({organization:e,children:t}){const n=e.features.includes("performance-mobile-vitals")?{...l,...i}:l;return(0,o.tZ)(r.Fragment,{children:t({measurements:n})})}c.displayName="Measurements";const d=c},"./app/utils/withTags.tsx":(e,t,n)=>{n.d(t,{Z:()=>l});var r=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/react/index.js")),o=n("./app/stores/tagStore.tsx"),a=n("./app/utils/getDisplayName.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=function(e){class t extends s.Component{constructor(...e){super(...e),(0,r.Z)(this,"state",{tags:o.Z.getAllTags()}),(0,r.Z)(this,"unsubscribe",o.Z.listen((e=>this.setState({tags:e})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){const{tags:t,...n}=this.props;return(0,i.tZ)(e,{tags:null!=t?t:this.state.tags,...n})}}return t.displayName="WithTags",(0,r.Z)(t,"displayName","withTags(".concat((0,a.Z)(e),")")),t}},"./app/views/performance/trends/index.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ge});var r=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/react/index.js")),a=n("./app/components/lightWeightNoProjectMessage.tsx"),i=n("./app/components/sentryDocumentTitle.tsx"),l=n("./app/locale.tsx"),c=n("./app/styles/organization.tsx"),d=n("./app/utils/withApi.tsx"),p=n("./app/utils/withGlobalSelection.tsx"),u=n("./app/utils/withOrganization.tsx"),m=n("./app/utils/withProjects.tsx"),h=n("./app/views/performance/data.tsx"),g=(n("../node_modules/core-js/modules/es.string.trim.js"),n("../node_modules/react-router/es/index.js")),Z=n("./app/components/alert.tsx"),x=n("./app/components/breadcrumbs.tsx"),y=n("./app/components/dropdownControl.tsx"),f=n("./app/components/events/searchBar.tsx"),v=n("./app/components/layouts/thirds.tsx"),w=n("./app/components/organizations/globalSelectionHeader/index.tsx"),b=n("./app/constants/index.tsx"),_=n("./app/icons/iconFlag.tsx"),j=n("./app/styles/space.tsx"),S=n("./app/utils/analytics.tsx"),E=n("./app/utils/discover/fields.tsx"),T=n("./app/utils/queryString.tsx"),C=n("./app/utils/tokenizeSearch.tsx"),P=n("./app/views/performance/utils.tsx"),k=n("./app/components/button.tsx"),z=n("./app/components/charts/styles.tsx"),q=n("./app/components/count.tsx"),N=n("./app/components/dropdownLink.tsx"),R=n("./app/components/emptyStateWarning.tsx"),L=n("./app/components/idBadge/index.tsx"),F=n("./app/components/links/link.tsx"),I=n("./app/components/loadingIndicator.tsx"),V=n("./app/components/menuItem.tsx"),D=n("./app/components/pagination/index.tsx"),O=n("./app/components/panels/index.tsx"),B=n("./app/components/questionTooltip.tsx"),A=n("./app/components/radio.tsx"),M=n("./app/components/tooltip.tsx"),X=n("./app/icons/index.tsx"),H=n("./app/styles/overflowEllipsis.tsx"),G=n("./app/utils/formatters.tsx"),Q=n("./app/utils/performance/trends/trendsDiscoverQuery.tsx"),U=n("./app/views/settings/components/forms/controls/radioGroup.tsx"),W=n("./app/views/performance/transactionSummary/charts.tsx"),K=n("./app/views/performance/transactionSummary/utils.tsx"),J=(n("../node_modules/core-js/modules/es.array.reduce.js"),n("../node_modules/@emotion/react/dist/emotion-element-a8309070.browser.esm.js")),Y=n("./app/components/charts/chartZoom.tsx"),$=n("./app/components/charts/lineChart.tsx"),ee=n("./app/components/charts/releaseSeries.tsx"),te=n("./app/components/charts/transitionChart.tsx"),ne=n("./app/components/charts/transparentLoadingMask.tsx"),re=n("./app/components/organizations/globalSelectionHeader/getParams.tsx"),se=n("./app/utils/dates.tsx"),oe=n("./app/utils/discover/charts.tsx"),ae=n("./app/utils/getDynamicText.tsx"),ie=n("./app/views/releases/detail/overview/chart/releaseChartControls.tsx"),le=n("./app/views/performance/trends/utils.tsx"),ce=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function de(e){return{right:10,top:0,itemGap:12,align:"left",data:[{name:"Baseline",icon:"path://M180 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40z, M810 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40zm, M1440 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40z"},{name:"Releases",icon:"line"},{name:e,icon:"line"}]}}class pe extends o.Component{constructor(...e){super(...e),(0,r.Z)(this,"handleLegendSelectChanged",(e=>{const{location:t,trendChangeType:n}=this.props,{selected:r}=e,s=Object.keys(r).filter((e=>!r[e])),o={...t.query};o[(0,le.P4)(n)]=s;const a={...t,query:o};g.browserHistory.push(a)}))}render(){var e,t;const n=this.props,{theme:r,trendChangeType:s,router:o,statsPeriod:a,project:i,environment:c,transaction:d,statsData:p,isLoading:u,location:m,projects:h}=n,g=le.es[s||""],Z=p&&null!=d&&d.project&&null!=d&&d.transaction?p[[d.project,d.transaction].join(",")]:void 0,x=null!==(e=null==Z?void 0:Z.data)&&void 0!==e?e:[],y=(0,le.CE)(m),f=(0,le.IO)(m),v=(0,le.ed)(y.field,f.column),w=function(e,t){return[{seriesName:t||"Current",data:e.map((([e,t])=>({name:1e3*e,value:t.reduce(((e,{count:t})=>e+t),0)})))}]}(x,v),{smoothedResults:b,minValue:_,maxValue:j}=(0,le.vq)(w,v),S=n.start?(0,se.hC)(n.start):null,E=n.end?(0,se.hC)(n.end):null,{utc:C}=(0,re.Q)(m.query),P=(0,T.qP)(m.query[(0,le.P4)(s)]).reduce(((e,t)=>(e[t]=!1,e)),{}),k={...de(v),selected:P},z=u,q=u,N=parseInt((null===(t=h.find((({slug:e})=>(null==d?void 0:d.project)===e)))||void 0===t?void 0:t.id)||"",10),R=Math.max(j,(null==d?void 0:d.aggregate_range_2)||0,(null==d?void 0:d.aggregate_range_1)||0),L=Math.min(_,(null==d?void 0:d.aggregate_range_1)||Number.MAX_SAFE_INTEGER,(null==d?void 0:d.aggregate_range_2)||Number.MAX_SAFE_INTEGER),F=.1*(R-L),I={showTransactions:s,yAxis:ie.B2.COUNT_DURATION},V={tooltip:{valueFormatter:(e,t)=>(0,oe.CX)(e,t)},yAxis:{min:Math.max(0,L-F),max:R+F,axisLabel:{color:r.chartLabel,formatter:e=>(0,oe.gu)(e,"p50()")}}};return(0,ce.tZ)(Y.Z,{router:o,period:a,start:S,end:E,utc:"true"===C,children:e=>{const t=b?b.map((e=>({...e,color:g.default,lineStyle:{opacity:1}}))):[],n=function(e,t,n,r){if(!(r&&t.length&&t[0].data&&t[0].data.length))return[];const s=parseInt(t[0].data[0].name,0),o=parseInt(t[0].data.slice(-1)[0].name,0);if(o<s)return[];const a={data:[],color:e.textColor,markLine:{data:[],label:{},lineStyle:{normal:{color:e.textColor,type:"dashed",width:1}},symbol:["none","none"],tooltip:{show:!1}},seriesName:"Baseline"},i={fontSize:11,show:!0},c={...a,markLine:{...a.markLine},seriesName:"Baseline"},d={...a,markLine:{...a.markLine},seriesName:"Baseline"},p={...a,markLine:{...a.markLine},seriesName:"Period split"},u=.5*(o-s)+s;return c.markLine.data=[[{value:"Past",coord:[s,r.aggregate_range_1]},{coord:[u,r.aggregate_range_1]}]],c.markLine.tooltip={formatter:()=>['<div class="tooltip-series tooltip-series-solo">',"<div>",'<span class="tooltip-label"><strong>'.concat((0,l.t)("Past Baseline"),"</strong></span>"),(0,oe.CX)(r.aggregate_range_1,"p50()"),"</div>","</div>",'<div class="tooltip-arrow"></div>'].join("")},d.markLine.data=[[{value:"Present",coord:[u,r.aggregate_range_2]},{coord:[o,r.aggregate_range_2]}]],d.markLine.tooltip={formatter:()=>['<div class="tooltip-series tooltip-series-solo">',"<div>",'<span class="tooltip-label"><strong>'.concat((0,l.t)("Present Baseline"),"</strong></span>"),(0,oe.CX)(r.aggregate_range_2,"p50()"),"</div>","</div>",'<div class="tooltip-arrow"></div>'].join("")},p.markLine={data:[{value:"Previous Period / This Period",xAxis:u}],label:{show:!1},lineStyle:{normal:{color:e.textColor,type:"solid",width:2}},symbol:["none","none"],tooltip:{show:!1}},c.markLine.label={...i,formatter:"Past",position:"insideStartBottom"},d.markLine.label={...i,formatter:"Present",position:"insideEndBottom"},[c,d,p]}(r,b||[],0,d);return(0,ce.tZ)(ee.Z,{start:S,end:E,queryExtra:I,period:a,utc:"true"===C,projects:isNaN(N)?i:[N],environments:c,memoized:!0,children:({releaseSeries:r})=>(0,ce.BX)(te.Z,{loading:z,reloading:q,children:[(0,ce.tZ)(ne.Z,{visible:q}),(0,ae.Z)({value:(0,ce.tZ)($.Z,{...e,...V,onLegendSelectChanged:this.handleLegendSelectChanged,series:[...t,...r,...n],seriesOptions:{showSymbol:!1},legend:k,toolBox:{show:!1},grid:{left:"10px",right:"10px",top:"40px",bottom:"0px"}}),fixed:"Duration Chart"})]})})}})}}pe.displayName="Chart";const ue=(0,J.b)((0,d.Z)((0,g.withRouter)(pe)));var me,he=n("./app/views/performance/trends/types.tsx");function ge(e,t,n){const r=(0,le.j_)(t),s=(0,T.ro)(e.query[r]);if(!n)return;return n.find((e=>"".concat(e.transaction,"-").concat(e.project)===s))||(n.length>0?n[0]:void 0)}function Ze(e,t){return function(n){const r=(0,le.j_)(t),s={...e.query};n?s[r]=n?"".concat(n.transaction,"-").concat(n.project):void 0:delete s[r],g.browserHistory.push({pathname:e.pathname,query:s})}}function xe(e,t,n){const r=(0,le.IO)(e).column,s=(0,T.ro)(e.query.query),o=(0,C.aI)(s||""),a=o.getFilterValues(r),i=n===me.GREATER_THAN_EQUALS?">":"<";a&&a.forEach((e=>{(e.startsWith(n)||e.startsWith(i))&&o.removeFilterValue(r,e)})),o.addFilterValues(r,["".concat(n).concat(t)]);const l=o.formatString();g.browserHistory.push({pathname:e.pathname,query:{...e.query,query:String(l).trim()}})}function ye(e){const{api:t,location:n,trendChangeType:r,previousTrendFunction:s,previousTrendColumn:a,organization:i,projects:c,setError:d}=e,p=e.trendView.clone(),u=function(e){switch(e){case he.ER.IMPROVED:return(0,l.t)("Most Improved Transactions");case he.ER.REGRESSION:return(0,l.t)("Most Regressed Transactions");default:throw new Error("No trend type passed")}}(r);(0,le.kM)(p,n,r);const m=function(e){return function(t,n,r,s){const o={};e===he.ER.IMPROVED?o.improvedCursor=t:e===he.ER.REGRESSION&&(o.regressionCursor=t),delete r[(0,le.j_)(e)],g.browserHistory.push({pathname:n,query:{...r,...o}})}}(r),h=(0,T.ro)(n.query[le.vt[r]]);return(0,ce.tZ)(Q.ZP,{eventView:p,orgSlug:i.slug,location:n,trendChangeType:r,cursor:h,limit:5,setError:d,children:({isLoading:d,trendsData:h,pageLinks:g})=>{const Z=(0,le.CE)(n),x=(0,le.IO)(n),y=(0,le.RP)(h&&h.events&&h.events.data||[]),f=ge(n,r,y),v=(null==h?void 0:h.stats)||{},w=y&&y.slice?y.slice(0,5):[],b=d&&s?s:Z.field,_=d&&a?a:x.column,j=(0,l.t)("This compares the baseline (%s) of the past with the present.",Z.legendLabel);return(0,ce.BX)(be,{children:[(0,ce.BX)(_e,{children:[(0,ce.BX)(Se,{children:[u,(0,ce.tZ)(B.Z,{size:"sm",position:"top",title:j})]}),d?(0,ce.tZ)(I.Z,{style:{margin:"237px auto"}}):(0,ce.tZ)(o.Fragment,{children:w.length?(0,ce.BX)(o.Fragment,{children:[(0,ce.tZ)(je,{children:(0,ce.tZ)(ue,{statsData:v,query:p.query,project:p.project,environment:p.environment,start:p.start,end:p.end,statsPeriod:p.statsPeriod,transaction:f,isLoading:d,...e})}),w.map(((s,o)=>(0,ce.tZ)(fe,{api:t,currentTrendFunction:b,currentTrendColumn:_,trendView:e.trendView,organization:i,transaction:s,index:o,trendChangeType:r,transactions:w,location:n,projects:c,statsData:v,handleSelectTransaction:Ze(n,r)},s.transaction)))]}):(0,ce.tZ)(Ce,{small:!0,children:(0,l.t)("No results")})})]}),(0,ce.tZ)(D.Z,{pageLinks:g,onCursor:m})]})}})}function fe(e){const{transaction:t,transactions:n,trendChangeType:r,currentTrendFunction:s,currentTrendColumn:a,index:i,location:c,projects:d,handleSelectTransaction:p}=e,u=le.es[r].default,m=ge(c,r,n)===t,h=d.find((({slug:e})=>e===t.project)),Z=t.aggregate_range_2,x=t.aggregate_range_1,y=(0,G.rl)(Math.abs(t.trend_percentage-1),0),f=(0,G.g9)(x/1e3,x<1e3&&x>10?0:2),v=(0,G.g9)(Z/1e3,Z<1e3&&Z>10?0:2),w=(0,l.t)("Over this period, the %s for %s has %s %s from %s to %s",s,a,r===he.ER.IMPROVED?(0,l.t)("decreased"):(0,l.t)("increased"),y,f,v),b=r===he.ER.IMPROVED?x:Z,_=r===he.ER.IMPROVED?f:v;return(0,ce.BX)(Pe,{"data-test-id":"trends-list-item-"+r,children:[(0,ce.tZ)(ke,{color:u,children:(0,ce.tZ)(M.Z,{title:(0,ce.BX)(Fe,{children:[(0,ce.tZ)("span",{children:(0,l.t)("Total Events")}),(0,ce.BX)("span",{children:[(0,ce.tZ)(q.Z,{value:t.count_range_1}),(0,ce.tZ)(le.IK,{direction:"right",size:"xs"}),(0,ce.tZ)(q.Z,{value:t.count_range_2})]})]}),children:(0,ce.tZ)(U.V,{index:i,role:"radio",children:(0,ce.tZ)(A.Z,{checked:m,onChange:()=>p(t)})})})}),(0,ce.tZ)(we,{...e}),(0,ce.tZ)(Re,{children:(0,ce.tZ)(M.Z,{title:w,children:(0,ce.BX)(o.Fragment,{children:[r===he.ER.REGRESSION?"+":"",(0,G.rl)(t.trend_percentage-1,0)]})})}),(0,ce.BX)(N.Z,{caret:!1,anchorRight:!0,title:(0,ce.tZ)(Ee,{size:"xsmall",icon:(0,ce.tZ)(X.YR,{"data-test-id":"trends-item-action",size:"xs"})}),children:[(0,ce.tZ)(V.Z,{onClick:()=>xe(c,b,me.LESS_THAN_EQUALS),children:(0,ce.tZ)(Te,{children:(0,l.t)("Show ≤ %s",_)})}),(0,ce.tZ)(V.Z,{onClick:()=>xe(c,b,me.GREATER_THAN_EQUALS),children:(0,ce.tZ)(Te,{children:(0,l.t)("Show ≥ %s",_)})}),(0,ce.tZ)(V.Z,{onClick:()=>function(e,t){const n=(0,T.ro)(e.query.query),r=(0,C.aI)(n||"");r.addFilterValues("!transaction",[t]);const s=r.formatString();g.browserHistory.push({pathname:e.pathname,query:{...e.query,query:String(s).trim()}})}(c,t.transaction),children:(0,ce.tZ)(Te,{children:(0,l.t)("Hide from list")})})]}),(0,ce.BX)(qe,{children:[h&&(0,ce.tZ)(M.Z,{title:t.project,children:(0,ce.tZ)(L.Z,{avatarSize:16,project:h,hideName:!0})}),(0,ce.tZ)(ve,{...e})]}),(0,ce.tZ)(Le,{color:u,children:(0,ce.tZ)(o.Fragment,{children:(0,le.wx)(t.trend_difference,r)})})]})}!function(e){e.GREATER_THAN_EQUALS=">=",e.LESS_THAN_EQUALS="<="}(me||(me={})),ye.displayName="ChangedTransactions",fe.displayName="TrendsListItem";const ve=e=>{const{transaction:t}=e;return(0,ce.tZ)(Ne,{children:(0,le.Kt)(t.aggregate_range_1,t.aggregate_range_2)})};ve.displayName="CompareDurations";const we=e=>{const{organization:t,trendView:n,transaction:r,projects:s,currentTrendFunction:o,currentTrendColumn:a}=e,i=n.clone(),l=(0,le._H)(r,s),c=(0,K.e1)({orgSlug:t.slug,transaction:String(r.transaction),query:i.generateQueryStringObject(),projectID:l,display:W.D.TREND,trendFunction:o,trendColumn:a});return(0,ce.tZ)(ze,{to:c,children:r.transaction})};we.displayName="TransactionSummaryLink";const be=(0,s.Z)("div",{target:"e11bn3w114"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),_e=(0,s.Z)(O.s_,{target:"e11bn3w113"})({name:"154zghl",styles:"margin:0;flex-grow:1"}),je=(0,s.Z)("div",{target:"e11bn3w112"})("padding:",(0,j.Z)(3),";"),Se=(0,s.Z)(z.ws,{target:"e11bn3w111"})("border-radius:",(e=>e.theme.borderRadius),";padding:",(0,j.Z)(2)," ",(0,j.Z)(3),";"),Ee=(0,s.Z)(k.ZP,{target:"e11bn3w110"})({name:"1989ovb",styles:"vertical-align:middle"}),Te=(0,s.Z)("div",{target:"e11bn3w19"})("white-space:nowrap;color:",(e=>e.theme.textColor),";"),Ce=(0,s.Z)(R.Z,{target:"e11bn3w18"})({name:"1t1oqhu",styles:"min-height:300px;justify-content:center"}),Pe=(0,s.Z)("div",{target:"e11bn3w17"})("display:grid;grid-template-columns:24px auto 100px 30px;grid-template-rows:repeat(2, auto);grid-column-gap:",(0,j.Z)(1),";border-top:1px solid ",(e=>e.theme.border),";padding:",(0,j.Z)(1)," ",(0,j.Z)(2),";"),ke=(0,s.Z)("div",{target:"e11bn3w16"})("grid-row:1/3;input{cursor:pointer;}input:checked::after{background-color:",(e=>e.color),";}"),ze=(0,s.Z)(F.Z,{target:"e11bn3w15"})("font-size:",(e=>e.theme.fontSizeMedium),";margin-right:",(0,j.Z)(1),";",H.Z,";"),qe=(0,s.Z)("div",{target:"e11bn3w14"})("display:flex;align-items:center;font-size:",(e=>e.theme.fontSizeSmall),";"),Ne=(0,s.Z)("span",{target:"e11bn3w13"})("color:",(e=>e.theme.gray300),";margin:0 ",(0,j.Z)(1),";"),Re=(0,s.Z)("div",{target:"e11bn3w12"})("text-align:right;font-size:",(e=>e.theme.fontSizeMedium),";"),Le=(0,s.Z)("div",{target:"e11bn3w11"})("color:",(e=>e.color),";text-align:right;font-size:",(e=>e.theme.fontSizeSmall),";"),Fe=(0,s.Z)("div",{target:"e11bn3w10"})({name:"zigog8",styles:"display:flex;flex-direction:column;align-items:center"}),Ie=(0,d.Z)((0,m.Z)((0,u.Z)(ye)));class Ve extends o.Component{constructor(...e){super(...e),(0,r.Z)(this,"state",{}),(0,r.Z)(this,"handleSearch",(e=>{const{location:t}=this.props,n=(0,le.Ws)();g.browserHistory.push({pathname:t.pathname,query:{...t.query,...n,query:String(e).trim()||void 0}})})),(0,r.Z)(this,"setError",(e=>{this.setState({error:e})})),(0,r.Z)(this,"handleTrendFunctionChange",(e=>{const{organization:t,location:n}=this.props,r={};Object.values(he.ER).forEach((e=>{const t=(0,le.j_)(e);r[t]=void 0})),(0,S.ec)({eventKey:"performance_views.trends.change_function",eventName:"Performance Views: Change Function",organization_id:parseInt(t.id,10),function_name:e}),this.setState({previousTrendFunction:(0,le.CE)(n).field});const s=(0,le.Ws)();g.browserHistory.push({pathname:n.pathname,query:{...n.query,...r,...s,trendFunction:e}})})),(0,r.Z)(this,"handleParameterChange",(e=>{const{organization:t,location:n}=this.props,r=(0,le.Ws)();(0,S.ec)({eventKey:"performance_views.trends.change_parameter",eventName:"Performance Views: Change Parameter",organization_id:parseInt(t.id,10),parameter_name:e}),g.browserHistory.push({pathname:n.pathname,query:{...n.query,...r,trendParameter:e}})}))}renderError(){const{error:e}=this.state;return e?(0,ce.tZ)(Z.Z,{type:"error",icon:(0,ce.tZ)(_.G,{size:"md"}),children:e}):null}getPerformanceLink(){const{location:e}=this.props,t={...e.query},n=(0,T.ro)(e.query.query,""),r=(0,C.aI)(n);return r.removeFilter("tpm()"),r.removeFilter("confidence()"),r.removeFilter("transaction.duration"),t.query=r.formatString(),{pathname:(0,P.de)(this.props.organization),query:t}}render(){const{organization:e,eventView:t,location:n}=this.props,{previousTrendFunction:r}=this.state,s=t.clone();(0,le.iF)(s,n);const o=(0,E.db)(e,[{field:"absolute_correlation()"},{field:"trend_percentage()"},{field:"trend_difference()"},{field:"count_percentage()"},{field:"tpm()"},{field:"tps()"}],["epm()","eps()"]),a=(0,le.CE)(n),i=(0,le.IO)(n),c=(0,P.Ov)(n),d=(0,le.te)({canSeeSpanOpTrends:e.features.includes("performance-ops-breakdown")});return(0,ce.BX)(w.Z,{defaultSelection:{datetime:{start:null,end:null,utc:!1,period:le._1}},children:[(0,ce.tZ)(v.h4,{children:(0,ce.BX)(v.oB,{children:[(0,ce.tZ)(x.Z,{crumbs:[{label:"Performance",to:this.getPerformanceLink()},{label:"Trends"}]}),(0,ce.tZ)(v.Dx,{children:(0,l.t)("Trends")})]})}),(0,ce.tZ)(v.uT,{children:(0,ce.tZ)(v.or,{fullWidth:!0,children:(0,ce.BX)(De,{location:n,eventView:t,children:[(0,ce.BX)(Ae,{children:[(0,ce.tZ)(Oe,{searchSource:"trends",organization:e,projectIds:s.project,query:c,fields:o,onSearch:this.handleSearch,maxQueryLength:b.dI}),(0,ce.tZ)(Be,{children:(0,ce.tZ)(y.ZP,{buttonProps:{prefix:(0,l.t)("Percentile")},label:a.label,children:le.T1.map((({label:e,field:t})=>(0,ce.tZ)(y.hP,{onSelect:this.handleTrendFunctionChange,eventKey:t,"data-test-id":t,isActive:t===a.field,children:e},t)))})}),(0,ce.tZ)(Be,{children:(0,ce.tZ)(y.ZP,{buttonProps:{prefix:(0,l.t)("Parameter")},label:i.label,children:d.map((({label:e})=>(0,ce.tZ)(y.hP,{onSelect:this.handleParameterChange,eventKey:e,"data-test-id":e,isActive:e===i.label,children:e},e)))})})]}),(0,ce.BX)(Me,{children:[(0,ce.tZ)(Ie,{trendChangeType:he.ER.IMPROVED,previousTrendFunction:r,trendView:s,location:n,setError:this.setError}),(0,ce.tZ)(Ie,{trendChangeType:he.ER.REGRESSION,previousTrendFunction:r,trendView:s,location:n,setError:this.setError})]})]})})})]})}}Ve.displayName="TrendsContent";class De extends o.Component{constructor(...e){super(...e),(0,r.Z)(this,"hasPushedDefaults",!1)}render(){const{children:e,location:t,eventView:n}=this.props,r=(0,T.ro)(t.query.query),s=(0,le.IO)(t),a=(0,C.aI)(r||"");if(r||this.hasPushedDefaults)return this.hasPushedDefaults=!0,(0,ce.tZ)(o.Fragment,{children:e});this.hasPushedDefaults=!0,a.setFilterValues("tpm()",[">0.01"]),a.setFilterValues(s.column,[">0","<".concat(le.bg)]);const i=a.formatString();return n.query=i,g.browserHistory.push({pathname:t.pathname,query:{...t.query,cursor:void 0,query:String(i).trim()||void 0}}),null}}De.displayName="DefaultTrends";const Oe=(0,s.Z)(f.Z,{target:"e1yf76wj3"})("flex-grow:1;margin-bottom:",(0,j.Z)(2),";"),Be=(0,s.Z)("div",{target:"e1yf76wj2"})("margin-left:",(0,j.Z)(1),";flex-grow:0;"),Ae=(0,s.Z)("div",{target:"e1yf76wj1"})({name:"zjik7",styles:"display:flex"}),Me=(0,s.Z)("div",{target:"e1yf76wj0"})("display:grid;grid-gap:",(0,j.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints[1]),"){grid-template-columns:repeat(2, minmax(0, 1fr));align-items:stretch;}"),Xe=(0,p.Z)(Ve);class He extends o.Component{constructor(...e){super(...e),(0,r.Z)(this,"state",{eventView:(0,h.C)(this.props.organization,this.props.location,this.props.projects,!0),error:void 0}),(0,r.Z)(this,"setError",(e=>{this.setState({error:e})}))}static getDerivedStateFromProps(e,t){return{...t,eventView:(0,h.C)(e.organization,e.location,e.projects,!0)}}getDocumentTitle(){return[(0,l.t)("Trends"),(0,l.t)("Performance")].join(" - ")}renderContent(){const{organization:e,location:t}=this.props,{eventView:n}=this.state;return(0,ce.tZ)(Xe,{organization:e,location:t,eventView:n})}render(){const{organization:e}=this.props;return(0,ce.tZ)(i.Z,{title:this.getDocumentTitle(),orgSlug:e.slug,children:(0,ce.tZ)(Qe,{children:(0,ce.tZ)(a.Z,{organization:e,children:this.renderContent()})})})}}He.displayName="TrendsSummary";const Ge=(0,u.Z)((0,m.Z)((0,p.Z)((0,d.Z)(He)))),Qe=(0,s.Z)(c.JH,{target:"e183k9ay0"})({name:"1hcx8jb",styles:"padding:0"})}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_trends_index_tsx.5a26a490a77dc3bbd643b1cedaedac85.js.map