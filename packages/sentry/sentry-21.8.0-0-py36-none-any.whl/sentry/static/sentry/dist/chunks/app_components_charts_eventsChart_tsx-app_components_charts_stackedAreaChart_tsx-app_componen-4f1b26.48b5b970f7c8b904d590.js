"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_components_charts_eventsChart_tsx-app_components_charts_stackedAreaChart_tsx-app_componen-4f1b26"],{"./app/components/charts/components/markLine.tsx":(e,t,s)=>{function r(e){return{symbol:["none","none"],...e}}s.d(t,{Z:()=>r}),s("../node_modules/echarts/lib/component/markLine.js")},"./app/components/charts/eventsChart.tsx":(e,t,s)=>{s.d(t,{Z:()=>w});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.array.reduce.js"),s("../node_modules/react/index.js")),a=s("../node_modules/@emotion/react/dist/emotion-element-a8309070.browser.esm.js"),n=s("../node_modules/lodash/isEqual.js"),i=s.n(n),l=s("./app/components/charts/areaChart.tsx"),c=s("./app/components/charts/barChart.tsx"),d=s("./app/components/charts/chartZoom.tsx"),p=s("./app/components/charts/errorPanel.tsx"),h=s("./app/components/charts/lineChart.tsx"),u=s("./app/components/charts/releaseSeries.tsx"),m=s("./app/components/charts/transitionChart.tsx"),v=s("./app/components/charts/transparentLoadingMask.tsx"),S=s("./app/components/charts/utils.tsx"),y=s("./app/icons/index.tsx"),g=s("./app/locale.tsx"),x=s("./app/utils.tsx"),f=s("./app/utils/discover/charts.tsx"),C=s("./app/utils/discover/fields.tsx"),A=s("./app/components/charts/eventsRequest.tsx"),R=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class E extends o.Component{constructor(...e){super(...e),(0,r.Z)(this,"state",{seriesSelection:{},forceUpdate:!1}),(0,r.Z)(this,"handleLegendSelectChanged",(e=>{const{disableableSeries:t=[]}=this.props,{selected:s}=e,r=Object.keys(s).reduce(((e,r)=>{const o="Releases"===r||t.includes(r);return e[r]=!o||s[r],e}),{});this.setState({seriesSelection:r,forceUpdate:!0},(()=>this.setState({forceUpdate:!1})))}))}shouldComponentUpdate(e,t){return!(!t.forceUpdate&&i()(this.state.seriesSelection,t.seriesSelection)&&(e.reloading||!e.timeseriesData||i()(this.props.timeseriesData,e.timeseriesData)&&i()(this.props.releaseSeries,e.releaseSeries)&&i()(this.props.previousTimeseriesData,e.previousTimeseriesData)))}getChartComponent(){const{showDaily:e,timeseriesData:t,yAxis:s,chartComponent:r}=this.props;if((0,x.ri)(r))return r;if(e)return c.Z;if(t.length>1)switch((0,C.fD)(s)){case"line":return h.Z;case"area":return l.Z;default:throw new Error("Unknown multi plot type for ".concat(s))}return l.Z}render(){var e,t;const{theme:s,loading:r,reloading:o,yAxis:a,releaseSeries:n,zoomRenderProps:i,timeseriesData:l,previousTimeseriesData:c,showLegend:d,legendOptions:p,chartOptions:h,currentSeriesName:u,previousSeriesName:m,seriesTransformer:v,previousSeriesTransformer:y,colors:x,height:C,timeframe:A,...E}=this.props,{seriesSelection:b}=this.state,Z=[null!=u?u:(0,g.t)("Current"),null!=m?m:(0,g.t)("Previous")],w=(0,g.t)("Releases");Array.isArray(n)&&Z.push(w);const N=n&&n[0],T=Array.isArray(n)&&(null==N||null===(e=N.markLine)||void 0===e?void 0:e.data)&&N.markLine.data.length>=S.XO,D=Array.isArray(n)&&0===Object.keys(b).length&&T?{[w]:!1}:b,_=d?{right:16,top:12,data:Z,selected:D,...null!=p?p:{}}:void 0;let U=Array.isArray(n)?[...l,...n]:l,O=c;v&&(U=v(U)),y&&(O=y(c));const j={colors:l.length?null!==(t=null==x?void 0:x.slice(0,U.length))&&void 0!==t?t:[...s.charts.getColorPalette(l.length-2)]:void 0,grid:{left:"24px",right:"24px",top:"32px",bottom:"12px"},seriesOptions:{showSymbol:!1},tooltip:{trigger:"axis",truncate:80,valueFormatter:e=>(0,f.CX)(e,a)},xAxis:A?{min:A.start,max:A.end}:void 0,yAxis:{axisLabel:{color:s.chartLabel,formatter:e=>(0,f.gu)(e,a)}},...null!=h?h:{}},L=this.getChartComponent();return(0,R.tZ)(L,{...E,...i,...j,legend:_,onLegendSelectChanged:this.handleLegendSelectChanged,series:U,previousPeriod:O?[O]:void 0,height:C})}}E.displayName="Chart";const b=(0,a.b)(E);class Z extends o.Component{isStacked(){return"number"==typeof this.props.topEvents&&this.props.topEvents>0}render(){const{api:e,period:t,utc:s,query:r,router:a,start:n,end:i,projects:l,environments:c,showLegend:h,yAxis:x,disablePrevious:f,disableReleases:E,emphasizeReleases:Z,currentSeriesName:w,previousSeriesName:N,seriesTransformer:T,previousSeriesTransformer:D,field:_,interval:U,showDaily:O,topEvents:j,orderby:L,confirmedQuery:P,colors:H,chartHeader:F,legendOptions:I,chartOptions:k,preserveReleaseQueryParams:q,releaseQueryExtra:z,disableableSeries:M,chartComponent:B,usePageZoom:V,height:Y,withoutZerofill:G,...Q}=this.props,X=!f&&!n&&!i;let W=x&&(0,C.GO)(x)?(0,C.vp)(x):x;W&&W.length>60&&(W=W.substr(0,60)+"...");const J=null!=N?N:W?(0,g.t)("previous %s",W):void 0,$=null!=w?w:W,K=O?"1d":U||(0,S.ZS)(this.props,"high");let ee=({zoomRenderProps:e,releaseSeries:t,errored:s,loading:r,reloading:a,results:n,timeseriesData:i,previousTimeseriesData:l,timeframe:c})=>{if(s)return(0,R.tZ)(p.Z,{children:(0,R.tZ)(y.FC,{color:"gray300",size:"lg"})});const d=n||i;return(0,R.BX)(m.Z,{loading:r,reloading:a,height:Y?"".concat(Y,"px"):void 0,children:[(0,R.tZ)(v.Z,{visible:a}),o.isValidElement(F)&&F,(0,R.tZ)(b,{zoomRenderProps:e,loading:r,reloading:a,showLegend:h,releaseSeries:t||[],timeseriesData:null!=d?d:[],previousTimeseriesData:l,currentSeriesName:$,previousSeriesName:J,seriesTransformer:T,previousSeriesTransformer:D,stacked:this.isStacked(),yAxis:x,showDaily:O,colors:H,legendOptions:I,chartOptions:k,disableableSeries:M,chartComponent:B,height:Y,timeframe:c})]})};if(!E){const e=ee;ee=r=>(0,R.tZ)(u.Z,{utc:s,period:t,start:n,end:i,projects:l,environments:c,emphasizeReleases:Z,preserveQueryParams:q,queryExtra:z,children:({releaseSeries:t})=>e({...r,releaseSeries:t})})}return(0,R.tZ)(d.Z,{router:a,period:t,start:n,end:i,utc:s,usePageDate:V,...Q,children:s=>(0,R.tZ)(A.Z,{...Q,api:e,period:t,project:l,environment:c,start:n,end:i,interval:K,query:r,includePrevious:X,currentSeriesName:$,previousSeriesName:J,yAxis:x,field:_,orderby:L,topEvents:j,confirmedQuery:P,partial:!0,withoutZerofill:G&&!this.isStacked(),children:e=>ee({...e,zoomRenderProps:s})})})}}Z.displayName="EventsChart";const w=Z},"./app/components/charts/releaseSeries.tsx":(e,t,s)=>{s.d(t,{Z:()=>E});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),a=s("../node_modules/react-router/es/index.js"),n=s("../node_modules/@emotion/react/dist/emotion-element-a8309070.browser.esm.js"),i=s("../node_modules/lodash/isEqual.js"),l=s.n(i),c=s("../node_modules/lodash/memoize.js"),d=s.n(c),p=s("../node_modules/lodash/partition.js"),h=s.n(p),u=s("./app/actionCreators/indicator.tsx"),m=s("./app/components/charts/components/markLine.tsx"),v=s("./app/locale.tsx"),S=s("./app/utils.tsx"),y=s("./app/utils/dates.tsx"),g=s("./app/utils/formatters.tsx"),x=s("./app/utils/parseLinkHeader.tsx"),f=s("./app/utils/withApi.tsx"),C=s("./app/utils/withOrganization.tsx");function A(e,t,s){const r={};return Object.keys(s).forEach((e=>{let t=s[e];!t||"start"!==e&&"end"!==e||(t=(0,y.v5)(t)),t&&(r[e]=t)})),e.clear(),e.requestPromise("/organizations/".concat(t.slug,"/releases/stats/"),{includeAllArgs:!0,method:"GET",query:r})}class R extends o.Component{constructor(...e){super(...e),(0,r.Z)(this,"state",{releases:null,releaseSeries:[]}),(0,r.Z)(this,"_isMounted",!1),(0,r.Z)(this,"getOrganizationReleasesMemoized",d()(((e,t,s)=>A(e,t,s)),((e,t,s)=>Object.values(s).map((e=>JSON.stringify(e))).join("-")))),(0,r.Z)(this,"getReleaseSeries",((e,t={})=>{const{organization:s,router:r,tooltip:o,environments:a,start:n,end:i,period:l,preserveQueryParams:c,queryExtra:d,theme:p}=this.props,h={...d};s.features.includes("global-views")&&(h.project=r.location.query.project),c&&(h.environment=[...a],h.start=n?(0,y.v5)(n):void 0,h.end=i?(0,y.v5)(i):void 0,h.statsPeriod=l||void 0);const u=(0,m.Z)({animation:!1,lineStyle:{color:p.purple300,opacity:.3,type:"solid",...t},label:{show:!1},data:e.map((e=>({xAxis:+new Date(e.date),name:(0,g.ko)(e.version,!0),value:(0,g.ko)(e.version,!0),onClick:()=>{r.push({pathname:"/organizations/".concat(s.slug,"/releases/").concat(e.version,"/"),query:h})},label:{formatter:()=>(0,g.ko)(e.version,!0)}})))});return u.tooltip=o||{trigger:"item",formatter:({data:e})=>{const t=(0,y.L0)(e.value,"MMM D, YYYY LT",{local:!this.props.utc}),s=(0,S.YU)((0,g.ko)(e.name,!0));return['<div class="tooltip-series">','<div><span class="tooltip-label"><strong>'.concat((0,v.t)("Release"),"</strong></span> ").concat(s,"</div>"),"</div>",'<div class="tooltip-date">',t,"</div>","</div>",'<div class="tooltip-arrow"></div>'].join("")}},{seriesName:"Releases",color:p.purple200,data:[],markLine:u}}))}componentDidMount(){this._isMounted=!0;const{releases:e}=this.props;e?this.setReleasesWithSeries(e):this.fetchData()}componentDidUpdate(e){l()(e.projects,this.props.projects)&&l()(e.environments,this.props.environments)&&l()(e.start,this.props.start)&&l()(e.end,this.props.end)&&l()(e.period,this.props.period)&&l()(e.query,this.props.query)?l()(e.emphasizeReleases,this.props.emphasizeReleases)||this.setReleasesWithSeries(this.state.releases):this.fetchData()}componentWillUnmount(){this._isMounted=!1,this.props.api.clear()}async fetchData(){const{api:e,organization:t,projects:s,environments:r,period:o,start:a,end:n,memoized:i,query:l}=this.props,c={start:a,end:n,project:s,environment:r,statsPeriod:o,query:l};let d=!0;const p=[];for(;d;)try{const s=i?this.getOrganizationReleasesMemoized:A,[r,,o]=await s(e,t,c);p.push(...r),this._isMounted&&this.setReleasesWithSeries(p);const a=null==o?void 0:o.getResponseHeader("Link");if(a){var h,m;const e=(0,x.Z)(a);d=null!==(h=null==e||null===(m=e.next)||void 0===m?void 0:m.results)&&void 0!==h&&h,c.cursor=e.next.cursor}else d=!1}catch{(0,u.Iw)((0,v.t)("Error fetching releases")),d=!1}}setReleasesWithSeries(e){const{emphasizeReleases:t=[]}=this.props,s=[];if(t.length){const[r,o]=h()(e,(e=>!t.includes(e.version)));r.length&&s.push(this.getReleaseSeries(r,{type:"dotted"})),o.length&&s.push(this.getReleaseSeries(o,{opacity:.8}))}else s.push(this.getReleaseSeries(e));this.setState({releases:e,releaseSeries:s})}render(){const{children:e}=this.props;return e({releases:this.state.releases,releaseSeries:this.state.releaseSeries})}}R.displayName="ReleaseSeries";const E=(0,a.withRouter)((0,C.Z)((0,f.Z)((0,n.b)(R))))},"./app/components/charts/stackedAreaChart.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var r=s("../node_modules/react/index.js"),o=s("./app/components/charts/areaChart.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class n extends r.Component{render(){return(0,a.tZ)(o.Z,{tooltip:{filter:e=>e>0},...this.props,stacked:!0})}}n.displayName="StackedAreaChart";const i=n},"./app/components/discover/discoverFeature.tsx":(e,t,s)=>{s.d(t,{Z:()=>c}),s("../node_modules/react/index.js");var r=s("./app/components/acl/feature.tsx"),o=s("./app/components/acl/featureDisabled.tsx"),a=s("./app/components/hovercard.tsx"),n=s("./app/locale.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l({children:e}){const t=(0,n.t)("Requires discover feature.");return(0,i.tZ)(r.Z,{hookName:"feature-disabled:open-discover",features:["organizations:discover-basic"],renderDisabled:e=>(0,i.tZ)(a.ZP,{body:(0,i.tZ)(o.Z,{features:e.features,hideHelpToggle:!0,message:t,featureName:t}),children:e.children(e)}),children:({hasFeature:t})=>e({hasFeature:t})})}l.displayName="DiscoverFeature";const c=l},"./app/components/discoverButton.tsx":(e,t,s)=>{s.d(t,{Z:()=>i}),s("../node_modules/react/index.js");var r=s("./app/components/button.tsx"),o=s("./app/components/discover/discoverFeature.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function n({children:e,...t}){return(0,a.tZ)(o.Z,{children:({hasFeature:s})=>(0,a.tZ)(r.ZP,{disabled:!s,...t,children:e})})}n.displayName="DiscoverButton";const i=n},"./app/components/issues/groupList.tsx":(e,t,s)=>{s.d(t,{Z:()=>L});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),a=s("../node_modules/react-router/es/index.js"),n=s("../node_modules/@sentry/minimal/esm/index.js"),i=s("../node_modules/lodash/isEqual.js"),l=s.n(i),c=s("../node_modules/lodash/omit.js"),d=s.n(c),p=s("../node_modules/query-string/index.js"),h=s("./app/actionCreators/members.tsx"),u=s("./app/components/emptyStateWarning.tsx"),m=s("./app/components/loadingError.tsx"),v=s("./app/components/loadingIndicator.tsx"),S=s("./app/components/pagination/index.tsx"),y=s("./app/components/panels/index.tsx"),g=s("./app/components/stream/group.tsx"),x=s("./app/locale.tsx"),f=s("./app/stores/groupStore.tsx"),C=s("./app/utils/callIfFunction.tsx"),A=s("./app/utils/streamManager.tsx"),R=s("./app/utils/withApi.tsx"),E=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),b=s("./app/styles/space.tsx"),Z=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const w=({withChart:e=!0,narrowGroups:t=!1})=>(0,Z.BX)(y.V9,{disablePadding:!0,children:[(0,Z.tZ)(D,{children:(0,x.t)("Issue")}),e&&(0,Z.tZ)(U,{className:"hidden-xs hidden-sm ".concat(t?"hidden-md":""),children:(0,x.t)("Graph")}),(0,Z.tZ)(_,{children:(0,x.t)("events")}),(0,Z.tZ)(_,{children:(0,x.t)("users")}),(0,Z.tZ)(O,{className:"hidden-xs hidden-sm toolbar-header",children:(0,x.t)("Assignee")})]});w.displayName="GroupListHeader";const N=w,T=(0,E.Z)("div",{target:"emaz6xo4"})("display:flex;align-self:center;margin:0 ",(0,b.Z)(2),";"),D=(0,E.Z)(T,{target:"emaz6xo3"})("flex:1;width:66.66%;@media (min-width: ",(e=>e.theme.breakpoints[1]),"){width:50%;}"),_=(0,E.Z)(T,{target:"emaz6xo2"})("justify-content:flex-end;width:60px;@media (min-width: ",(e=>e.theme.breakpoints[3]),"){width:80px;}"),U=(0,E.Z)(T,{target:"emaz6xo1"})({name:"1yz45kt",styles:"justify-content:space-between;width:160px"}),O=(0,E.Z)(T,{target:"emaz6xo0"})({name:"8mimsw",styles:"justify-content:flex-end;width:80px"});class j extends o.Component{constructor(...e){super(...e),(0,r.Z)(this,"state",{loading:!0,error:!1,groups:[],pageLinks:null}),(0,r.Z)(this,"listener",f.Z.listen((()=>this.onGroupChange()),void 0)),(0,r.Z)(this,"_streamManager",new A.Z(f.Z)),(0,r.Z)(this,"fetchData",(()=>{f.Z.loadInitialData([]);const{api:e,orgId:t}=this.props;e.clear(),this.setState({loading:!0,error:!1}),(0,h.MA)(e,t).then((e=>{this.setState({memberList:(0,h.M4)(e)})}));const s=this.getGroupListEndpoint();e.request(s,{success:(e,t,s)=>{var r;this._streamManager.push(e),this.setState({error:!1,loading:!1,pageLinks:null!==(r=null==s?void 0:s.getResponseHeader("Link"))&&void 0!==r?r:null},(()=>{var e,t;null===(e=(t=this.props).onFetchSuccess)||void 0===e||e.call(t,this.state,this.handleCursorChange)}))},error:e=>{n.Tb(e),this.setState({error:!0,loading:!1})}})}))}componentDidMount(){this.fetchData()}shouldComponentUpdate(e,t){return!l()(this.state,t)||e.endpointPath!==this.props.endpointPath||e.query!==this.props.query||!l()(e.queryParams,this.props.queryParams)}componentDidUpdate(e){const t=["end"];e.orgId===this.props.orgId&&e.endpointPath===this.props.endpointPath&&e.query===this.props.query&&l()(d()(e.queryParams,t),d()(this.props.queryParams,t))||this.fetchData()}componentWillUnmount(){f.Z.reset(),(0,C.g)(this.listener)}getGroupListEndpoint(){const{orgId:e,endpointPath:t,queryParams:s}=this.props,r=null!=t?t:"/organizations/".concat(e,"/issues/"),o=null!=s?s:this.getQueryParams();return"".concat(r,"?").concat(p.stringify(o))}getQueryParams(){const{location:e,query:t}=this.props,s=e.query;return s.limit=50,s.sort="new",s.query=t,s}handleCursorChange(e,t,s,r){const o=parseInt(s.page,10);let n=isNaN(o)?r:o+r;n<=0&&(e=void 0,n=void 0),a.browserHistory.push({pathname:t,query:{...s,cursor:e,page:n}})}onGroupChange(){const e=this._streamManager.getAllItems();l()(e,this.state.groups)||this.setState({groups:e})}render(){const{canSelectGroups:e,withChart:t,renderEmptyMessage:s,withPagination:r,useFilteredStats:a,useTintRow:n,customStatsPeriod:i,queryParams:l,queryFilterDescription:c,narrowGroups:d}=this.props,{loading:p,error:h,groups:f,memberList:C,pageLinks:A}=this.state;if(p)return(0,Z.tZ)(v.Z,{});if(h)return(0,Z.tZ)(m.Z,{onRetry:this.fetchData});if(0===f.length)return"function"==typeof s?s():(0,Z.tZ)(y.s_,{children:(0,Z.tZ)(y.N,{children:(0,Z.tZ)(u.Z,{children:(0,Z.tZ)("p",{children:(0,x.t)("There don't seem to be any events fitting the query.")})})})});const R="auto"===(null==l?void 0:l.groupStatsPeriod)?null==l?void 0:l.groupStatsPeriod:g.g;return(0,Z.BX)(o.Fragment,{children:[(0,Z.BX)(y.s_,{children:[(0,Z.tZ)(N,{withChart:!!t,narrowGroups:d}),(0,Z.tZ)(y.N,{children:f.map((({id:s,project:r})=>{const o=null!=C&&C.hasOwnProperty(r.slug)?C[r.slug]:void 0;return(0,Z.tZ)(g.Z,{id:s,canSelect:e,withChart:t,memberList:o,useFilteredStats:a,useTintRow:n,customStatsPeriod:i,statsPeriod:R,queryFilterDescription:c,narrowGroups:d},s)}))})]}),r&&(0,Z.tZ)(S.Z,{pageLinks:A,onCursor:this.handleCursorChange})]})}}j.displayName="GroupList",(0,r.Z)(j,"defaultProps",{canSelectGroups:!0,withChart:!0,withPagination:!0,useFilteredStats:!0,useTintRow:!0,narrowGroups:!1});const L=(0,R.Z)((0,a.withRouter)(j))},"./app/constants/notAvailableMessages.tsx":(e,t,s)=>{s.d(t,{Z:()=>o});var r=s("./app/locale.tsx");const o={performance:(0,r.t)("This view is only available with Performance Monitoring."),discover:(0,r.t)("This view is only available with Discover."),releaseHealth:(0,r.t)("This view is only available with Release Health.")}},"./app/views/releases/detail/overview/chart/releaseChartControls.tsx":(e,t,s)=>{s.d(t,{B2:()=>p,tw:()=>h,cy:()=>u,ZP:()=>g}),s("../node_modules/react/index.js");var r=s("./app/components/charts/optionSelector.tsx"),o=s("./app/components/charts/styles.tsx"),a=s("./app/components/questionTooltip.tsx"),n=s("./app/constants/notAvailableMessages.tsx"),i=s("./app/locale.tsx"),l=s("./app/utils/discover/fields.tsx"),c=s("./app/utils/performance/vitals/constants.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");let p,h;!function(e){e.SESSIONS="sessions",e.USERS="users",e.CRASH_FREE="crashFree",e.SESSION_DURATION="sessionDuration",e.EVENTS="events",e.FAILED_TRANSACTIONS="failedTransactions",e.COUNT_DURATION="countDuration",e.COUNT_VITAL="countVital"}(p||(p={})),function(e){e.ALL="all",e.CSP="csp",e.DEFAULT="default",e.ERROR="error",e.TRANSACTION="transaction"}(h||(h={}));const u=[p.FAILED_TRANSACTIONS,p.COUNT_DURATION,p.COUNT_VITAL],m=({summary:e,yAxis:t,onYAxisChange:s,organization:u,hasHealthData:m,hasDiscover:v,hasPerformance:S,eventType:g=h.ALL,onEventTypeChange:x,vitalType:f=l.Zl.LCP,onVitalTypeChange:C})=>{const A=m?void 0:n.Z.releaseHealth,R=v?void 0:n.Z.discover,E=S?void 0:n.Z.performance,b=[{value:p.SESSIONS,label:(0,i.t)("Session Count"),disabled:!m,tooltip:A},{value:p.SESSION_DURATION,label:(0,i.t)("Session Duration"),disabled:!m,tooltip:A},{value:p.USERS,label:(0,i.t)("User Count"),disabled:!m,tooltip:A},{value:p.CRASH_FREE,label:(0,i.t)("Crash Free Rate"),disabled:!m,tooltip:A},{value:p.FAILED_TRANSACTIONS,label:(0,i.t)("Failure Count"),disabled:!S,tooltip:E},{value:p.COUNT_DURATION,label:(0,i.t)("Slow Duration Count"),disabled:!S,tooltip:E},{value:p.COUNT_VITAL,label:(0,i.t)("Slow Vital Count"),disabled:!S,tooltip:E},{value:p.EVENTS,label:(0,i.t)("Event Count"),disabled:!v&&!S,tooltip:R}];return(0,d.BX)(o.xx,{children:[(0,d.BX)(o.m2,{children:[(0,d.BX)(o.OT,{children:[(()=>{switch(t){case p.USERS:return(0,i.t)("Total Active Users");case p.CRASH_FREE:return(0,i.t)("Average Rate");case p.SESSION_DURATION:return(0,i.t)("Median Duration");case p.EVENTS:return(0,i.t)("Total Events");case p.FAILED_TRANSACTIONS:return(0,i.t)("Failed Transactions");case p.COUNT_DURATION:return(0,i.t)("Count over %sms",u.apdexThreshold);case p.COUNT_VITAL:return f!==l.Zl.CLS?(0,i.t)("Count over %sms",c.r[f].poorThreshold):(0,i.t)("Count over %s",c.r[f].poorThreshold);case p.SESSIONS:default:return(0,i.t)("Total Sessions")}})(),(0,d.tZ)(a.Z,{position:"top",size:"sm",title:(0,i.t)("This value includes only the current release.")})]},"total-label"),(0,d.tZ)(o.uN,{children:e},"total-value")]}),(0,d.BX)(o.m2,{children:[(0,d.tZ)(y,{yAxis:t,eventType:g,onEventTypeChange:x,vitalType:f,onVitalTypeChange:C}),(0,d.tZ)(r.Z,{title:(0,i.t)("Display"),selected:t,options:b,onChange:s})]})]})};m.displayName="ReleaseChartControls";const v=[{value:h.ALL,label:(0,i.t)("All")},{value:h.CSP,label:(0,i.t)("CSP")},{value:h.DEFAULT,label:(0,i.t)("Default")},{value:h.ERROR,label:"Error"},{value:h.TRANSACTION,label:(0,i.t)("Transaction")}],S=[l.Zl.FP,l.Zl.FCP,l.Zl.LCP,l.Zl.FID,l.Zl.CLS].map((e=>({value:e,label:c.r[e].name})));function y({yAxis:e,eventType:t,onEventTypeChange:s,vitalType:o,onVitalTypeChange:a}){switch(e){case p.EVENTS:return(0,d.tZ)(r.Z,{title:(0,i.t)("Event Type"),selected:t,options:v,onChange:s});case p.COUNT_VITAL:return(0,d.tZ)(r.Z,{title:(0,i.t)("Vital"),selected:o,options:S,onChange:a});default:return null}}const g=m},"./app/views/releases/detail/overview/chart/utils.tsx":(e,t,s)=>{s.d(t,{ZS:()=>g,EJ:()=>x,gp:()=>f,j:()=>C,N0:()=>A,NA:()=>R,VY:()=>E,j2:()=>b,UF:()=>w,bi:()=>T,Yw:()=>D,A4:()=>_,Jb:()=>U}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.array.reduce.js");var r=s("../node_modules/color/index.js"),o=s.n(r),a=s("./app/components/charts/utils.tsx"),n=s("./app/constants/chartPalette.tsx"),i=s("./app/locale.tsx"),l=s("./app/utils.tsx"),c=s("./app/utils/dates.tsx"),d=s("./app/utils/discover/eventView.tsx"),p=s("./app/utils/discover/fields.tsx"),h=s("./app/utils/formatters.tsx"),u=s("./app/utils/performance/vitals/constants.tsx"),m=s("./app/utils/tokenizeSearch.tsx"),v=s("./app/views/releases/utils/index.tsx"),S=s("./app/views/releases/utils/sessionTerm.tsx"),y=s("./app/views/releases/detail/overview/chart/releaseChartControls.tsx");function g(e,{highFidelity:t}={}){const s=(0,a.Nm)(e);return t&&s<360?"5m":s>a.$i?"6h":"1h"}function x(e,t,s,r=y.tw.ALL,o=p.Zl.LCP,a,n){const{projects:v,environments:S,datetime:g}=e,{start:x,end:f,period:C}=g,A=n?"release:".concat(t):"",R='to_other(release,"'.concat((0,l.d9)(t),'",others,current)'),E=(0,p.LY)(R),b={id:void 0,version:2,name:"".concat((0,i.t)("Release")," ").concat((0,h.ko)(t)),fields:["count()",R],orderby:E,range:C,environment:S,projects:v,start:x?(0,c.v5)(x):void 0,end:f?(0,c.v5)(f):void 0};switch(s){case y.B2.FAILED_TRANSACTIONS:const e=["ok","cancelled","unknown"].map((e=>"!transaction.status:".concat(e)));return d.ZP.fromSavedQuery({...b,query:new m.an(["event.type:transaction",A,...e].filter(Boolean)).formatString()});case y.B2.COUNT_VITAL:case y.B2.COUNT_DURATION:const n=s===y.B2.COUNT_DURATION?"transaction.duration":o,i=s===y.B2.COUNT_DURATION?null==a?void 0:a.apdexThreshold:u.r[o].poorThreshold;return d.ZP.fromSavedQuery({...b,query:new m.an(["event.type:transaction",A,i?"".concat(n,":>").concat(i):""].filter(Boolean)).formatString()});case y.B2.EVENTS:const l=r===y.tw.ALL?"":"event.type:".concat(r);return d.ZP.fromSavedQuery({...b,query:new m.an([A,l].filter(Boolean)).formatString()});default:return d.ZP.fromSavedQuery({...b,fields:["issue","title","count()","count_unique(user)","project"],query:new m.an(["release:".concat(t),"!event.type:transaction"]).formatString(),orderby:"-count"})}}function f(e){const t=e.charts.getColorPalette(14);return{healthy:{seriesName:S.U1.healthy,data:[],color:e.green300,areaStyle:{color:e.green300,opacity:1},lineStyle:{opacity:0,width:.4}},errored:{seriesName:S.U1.errored,data:[],color:t[12],areaStyle:{color:t[12],opacity:1},lineStyle:{opacity:0,width:.4}},abnormal:{seriesName:S.U1.abnormal,data:[],color:t[15],areaStyle:{color:t[15],opacity:1},lineStyle:{opacity:0,width:.4}},crashed:{seriesName:S.U1.crashed,data:[],color:e.red300,areaStyle:{color:e.red300,opacity:1},lineStyle:{opacity:0,width:.4}}}}function C(e){const t=e.charts.getColorPalette(14);return{healthy:{seriesName:S.U1.otherHealthy,data:[],color:e.green300,areaStyle:{color:e.green300,opacity:.3},lineStyle:{opacity:0,width:.4}},errored:{seriesName:S.U1.otherErrored,data:[],color:t[12],areaStyle:{color:t[12],opacity:.3},lineStyle:{opacity:0,width:.4}},abnormal:{seriesName:S.U1.otherAbnormal,data:[],color:t[15],areaStyle:{color:t[15],opacity:.3},lineStyle:{opacity:0,width:.4}},crashed:{seriesName:S.U1.otherCrashed,data:[],color:e.red300,areaStyle:{color:e.red300,opacity:.3},lineStyle:{opacity:0,width:.4}},...Z()}}function A(){return{users:{seriesName:S.U1["crash-free-users"],data:[],color:n.Z[1][0],lineStyle:{color:n.Z[1][0]}},sessions:{seriesName:S.U1["crash-free-sessions"],data:[],color:n.Z[1][1],lineStyle:{color:n.Z[1][1]}}}}function R(){return{...Z(),users:{seriesName:S.U1.otherCrashFreeUsers,data:[],z:0,color:o()(n.Z[1][0]).lighten(.9).alpha(.9).string(),lineStyle:{color:n.Z[1][0],opacity:.1}},sessions:{seriesName:S.U1.otherCrashFreeSessions,data:[],z:0,color:o()(n.Z[1][1]).lighten(.5).alpha(.9).string(),lineStyle:{color:n.Z[1][1],opacity:.3}}}}function E(){return{0:{seriesName:S.U1.duration,data:[],color:n.Z[0][0],areaStyle:{color:n.Z[0][0],opacity:1},lineStyle:{opacity:0,width:.4}}}}function b(){return{0:{seriesName:S.U1.otherReleases,data:[],z:0,color:o()(n.Z[0][0]).alpha(.4).string(),areaStyle:{color:n.Z[0][0],opacity:.3},lineStyle:{opacity:0,width:.4}}}}function Z(){return{otherReleases:{seriesName:S.U1.otherReleases,data:[],color:o()(n.Z[0][0]).alpha(.4).string()}}}function w(e){return[S.U1.otherCrashed,S.U1.otherAbnormal,S.U1.otherErrored,S.U1.otherHealthy,S.U1.otherCrashFreeUsers,S.U1.otherCrashFreeSessions].includes(e.seriesName)}const N=[S.U1.healthy,S.U1.errored,S.U1.crashed,S.U1.abnormal,S.U1.otherHealthy,S.U1.otherErrored,S.U1.otherCrashed,S.U1.otherAbnormal,S.U1.duration,S.U1["crash-free-sessions"],S.U1["crash-free-users"],S.U1.otherCrashFreeSessions,S.U1.otherCrashFreeUsers,S.U1.otherReleases];function T(e,t){return N.indexOf(e.seriesName)-N.indexOf(t.seriesName)}function D({response:e,field:t}){return e.groups.reduce(((e,s)=>e+s.totals[t]),0)}function _({response:e,field:t,groupBy:s,chartData:r,valueFormatter:o}){return e.intervals.forEach(((a,n)=>{e.groups.forEach((e=>{const i=e.series[t][n];r[null===s?0:e.by[s]].data.push({name:a,value:"function"==typeof o?o(i):i})}))})),r}function U({response:e,field:t,entity:s,chartData:r}){return e.intervals.forEach(((o,a)=>{var n,i;const c=e.groups.reduce(((e,s)=>e+s.series[t][a]),0),d=null!==(n=null===(i=e.groups.find((e=>"crashed"===e.by["session.status"])))||void 0===i?void 0:i.series[t][a])&&void 0!==n?n:0,p=(0,l.aQ)(d,c);r[s].data.push({name:o,value:0===c?null:(0,v.Mf)(100-p)})})),r}},"./app/views/releases/utils/sessionTerm.tsx":(e,t,s)=>{s.d(t,{_k:()=>o,U1:()=>a,w0:()=>n,RE:()=>c});var r=s("./app/locale.tsx");let o;!function(e){e.CRASHES="crashes",e.CRASHED="crashed",e.ABNORMAL="abnormal",e.CRASH_FREE="crashFree",e.CRASH_FREE_USERS="crash-free-users",e.CRASH_FREE_SESSIONS="crash-free-sessions",e.HEALTHY="healthy",e.ERRORED="errored",e.UNHANDLED="unhandled",e.STABILITY="stability",e.ADOPTION="adoption"}(o||(o={}));const a={[o.CRASHES]:(0,r.t)("Crashes"),[o.CRASHED]:(0,r.t)("Crashed"),[o.ABNORMAL]:(0,r.t)("Abnormal"),[o.CRASH_FREE_USERS]:(0,r.t)("Crash Free Users"),[o.CRASH_FREE_SESSIONS]:(0,r.t)("Crash Free Sessions"),[o.HEALTHY]:(0,r.t)("Healthy"),[o.ERRORED]:(0,r.t)("Errored"),[o.UNHANDLED]:(0,r.t)("Unhandled"),[o.ADOPTION]:(0,r.t)("Adoption"),duration:(0,r.t)("Session Duration"),otherCrashed:(0,r.t)("Other Crashed"),otherAbnormal:(0,r.t)("Other Abnormal"),otherErrored:(0,r.t)("Other Errored"),otherHealthy:(0,r.t)("Other Healthy"),otherCrashFreeUsers:(0,r.t)("Other Crash Free Users"),otherCrashFreeSessions:(0,r.t)("Other Crash Free Sessions"),otherReleases:(0,r.t)("Other Releases")},n={[o.CRASHES]:(0,r.t)("Number of sessions with a crashed state"),[o.CRASH_FREE]:(0,r.t)("Percentage of sessions/users who did not experience a crash."),[o.CRASH_FREE_USERS]:(0,r.t)("Percentage of unique users with non-crashed sessions"),[o.CRASH_FREE_SESSIONS]:(0,r.t)("Percentage of non-crashed sessions"),[o.STABILITY]:(0,r.t)("The percentage of crash free sessions."),[o.ADOPTION]:(0,r.t)("Adoption compares the sessions or users of a release with the total sessions or users for this project in the last 24 hours.")},i={[o.CRASHED]:(0,r.t)("The process was terminated due to an unhandled exception or a request to the server that ended with an error"),[o.CRASH_FREE_SESSIONS]:(0,r.t)("Percentage of non-crashed sessions"),[o.ABNORMAL]:(0,r.t)("An unknown session exit. Like due to loss of power or killed by the operating system"),[o.HEALTHY]:(0,r.t)("A session without errors"),[o.ERRORED]:(0,r.t)("A session with errors"),[o.UNHANDLED]:(0,r.t)("Not handled by user code")},l={crashed:(0,r.t)("The application crashed with a hard crash (eg. segfault)"),[o.ABNORMAL]:(0,r.t)("The application did not properly end the session, for example, due to force-quit"),[o.HEALTHY]:(0,r.t)("The application exited normally and did not observe any errors"),[o.ERRORED]:(0,r.t)("The application exited normally but observed error events while running"),[o.UNHANDLED]:(0,r.t)("The application crashed with a hard crash")};function c(e,t){return function(e){switch("react-native"===e||"java-spring"===e||"apple-ios"===e||"dotnet-aspnetcore"===e?e:null==e?void 0:e.split("-")[0]){case"dotnet":case"java":return{...n,...i};case"java-spring":case"dotnet-aspnetcore":return{...n,...i,[o.CRASHES]:(0,r.t)("A request that resulted in an unhandled exception and hence a Server Error response")};case"android":case"cordova":case"react-native":case"flutter":return{...n,...i,[o.CRASHED]:(0,r.t)("An unhandled exception that resulted in the application crashing")};case"apple":return{...n,...i,[o.CRASHED]:(0,r.t)("An error that resulted in the application crashing")};case"node":case"javascript":return{...n,[o.CRASHED]:(0,r.t)("During the session an unhandled global error/promise rejection occurred."),[o.ABNORMAL]:(0,r.t)("Non applicable for Javascript."),[o.HEALTHY]:(0,r.t)("No errors were captured during session life-time."),[o.ERRORED]:(0,r.t)("During the session at least one handled error occurred."),[o.UNHANDLED]:"An error was captured by the global 'onerror' or 'onunhandledrejection' handler."};case"apple-ios":case"minidump":case"native":return{...n,...l};case"rust":return{...n,...l,[o.CRASHED]:(0,r.t)("The application had an unrecoverable error (a panic)")};default:return{...n,[o.CRASHED]:(0,r.t)("Number of users who experienced an unhandled error"),[o.ABNORMAL]:(0,r.t)("An unknown session exit"),[o.HEALTHY]:i.healthy,[o.ERRORED]:i.errored,[o.UNHANDLED]:i.unhandled}}}(t)[e]}}}]);
//# sourceMappingURL=../sourcemaps/app_components_charts_eventsChart_tsx-app_components_charts_stackedAreaChart_tsx-app_componen-4f1b26.ddb6925a58d6f40e1e0fed50871eaf0e.js.map