"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_performance_transactionSummary_transactionEvents_index_tsx","app_components_sentryDocumentTitle_tsx"],{"./app/components/events/searchBar.tsx":(e,t,n)=>{n.d(t,{Z:()=>D});var o,s=n("../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),i=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/core-js/modules/es.string.replace.js"),n("../node_modules/core-js/modules/es.object.from-entries.js"),n("../node_modules/react/index.js")),a=n("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),l=n("../node_modules/lodash/assign.js"),d=n.n(l),c=n("../node_modules/lodash/flatten.js"),p=n.n(c),m=n("../node_modules/lodash/isEqual.js"),u=n.n(m),h=n("../node_modules/lodash/memoize.js"),g=n.n(h),v=n("../node_modules/lodash/omit.js"),y=n.n(v),f=n("./app/actionCreators/tags.tsx"),x=n("./app/components/smartSearchBar/index.tsx"),w=n("./app/constants/index.tsx"),Z=n("./app/types/index.tsx"),b=n("./app/utils.tsx"),j=n("./app/utils/discover/fields.tsx"),k=n("./app/utils/measurements/measurements.tsx"),S=n("./app/utils/withApi.tsx"),z=n("./app/utils/withTags.tsx"),_=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const E=new RegExp("^".concat(w.c$,"|\\").concat(w.ir),"g");class C extends r.PureComponent{constructor(...e){super(...e),(0,i.Z)(this,"getEventFieldValues",g()(((e,t,n)=>{const{api:o,organization:s,projectIds:i}=this.props,r=null==i?void 0:i.map(String);return(0,j.h1)(e.key)||(0,j.Xr)(e.key)?Promise.resolve([]):(0,f.Fo)(o,s.slug,e.key,t,r,n,!0).then((e=>p()(e.filter((({name:e})=>(0,b.ri)(e))).map((({name:e})=>e)))),(()=>{throw new Error("Unable to fetch event field values")}))}),(({key:e},t)=>"".concat(e,"-").concat(t)))),(0,i.Z)(this,"prepareQuery",(e=>e.replace(E,"")))}componentDidMount(){var e,t;null===(e=(t=this.getEventFieldValues.cache).clear)||void 0===e||e.call(t)}componentDidUpdate(e){var t,n;u()(this.props.projectIds,e.projectIds)||null===(t=(n=this.getEventFieldValues.cache).clear)||void 0===t||t.call(n)}getTagList(e){const{fields:t,organization:n,tags:o,omitTags:s}=this.props,i=t?Object.fromEntries(t.filter((e=>!Object.keys(j.wZ).includes(e.field)&&!(0,j.GO)(e.field))).map((e=>[e.field,{key:e.field,name:e.field}]))):{},r=n.features.includes("performance-view")?Object.assign({},e,j.wZ,i):y()(j.wZ,j.J8),a=n.features.includes("semver")?Object.assign({},j.jg,r):r,l=d()({},o,a);return l.has={key:"has",name:"Has property",values:Object.keys(l),predefined:!0},y()(l,null!=s?s:[])}render(){const{organization:e}=this.props;return(0,_.tZ)(k.Z,{organization:e,children:({measurements:e})=>{const t=this.getTagList(e);return(0,_.tZ)(a.ms,{children:({css:e})=>(0,_.tZ)(x.Z,{...this.props,hasRecentSearches:!0,savedSearchType:Z.L4.EVENT,onGetTagValues:this.getEventFieldValues,supportedTags:t,prepareQuery:this.prepareQuery,excludeEnvironment:!0,dropdownClassName:e(o||(o=(0,s.Z)(["\n                    max-height: 300px;\n                    overflow-y: auto;\n                  "])))})})}})}}C.displayName="SearchBar";const D=(0,S.Z)((0,z.Z)(C))},"./app/components/globalSdkUpdateAlert.tsx":(e,t,n)=>{n.d(t,{Z:()=>S});var o=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(n("../node_modules/core-js/modules/es.array.reduce.js"),n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/react/index.js")),r=n("./app/actionCreators/prompts.tsx"),a=n("./app/actions/sidebarPanelActions.tsx"),l=n("./app/components/alert.tsx"),d=n("./app/constants/globalSelectionHeader.tsx"),c=n("./app/icons/index.tsx"),p=n("./app/locale.tsx"),m=n("./app/styles/space.tsx"),u=n("./app/utils/analytics.tsx"),h=n("./app/utils/promptIsDismissed.tsx"),g=n("./app/utils/withApi.tsx"),v=n("./app/utils/withGlobalSelection.tsx"),y=n("./app/utils/withOrganization.tsx"),f=n("./app/utils/withSdkUpdates.tsx"),x=n("./app/components/sidebar/types.tsx"),w=n("./app/components/button.tsx"),Z=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class b extends i.Component{constructor(...e){super(...e),(0,o.Z)(this,"state",{isDismissed:null}),(0,o.Z)(this,"snoozePrompt",(()=>{const{api:e,organization:t}=this.props;(0,r.Xt)(e,{organizationId:t.id,feature:"sdk_updates",status:"snoozed"}),this.setState({isDismissed:!0}),(({organization:e})=>{(0,u.ec)({eventKey:"sdk_updates.snoozed",eventName:"SDK Updates: Snoozed",organization_id:e.id})})({organization:this.props.organization})}))}componentDidMount(){this.promptsCheck(),(({organization:e})=>{(0,u.ec)({eventKey:"sdk_updates.seen",eventName:"SDK Updates: Seen",organization_id:e.id})})({organization:this.props.organization})}async promptsCheck(){const{api:e,organization:t}=this.props,n=await(0,r.vu)(e,{organizationId:t.id,feature:"sdk_updates"});this.setState({isDismissed:(0,h.I)(n)})}render(){const{api:e,selection:t,sdkUpdates:n,organization:o,Wrapper:s,...i}=this.props,{isDismissed:r}=this.state;if(!n||null===r||r)return null;if(0===(m=0===(null==t?void 0:t.projects.length)||(null==t?void 0:t.projects)===[d.mP]?n:n.filter((e=>{var n;return null==t||null===(n=t.projects)||void 0===n?void 0:n.includes(parseInt(e.projectId,10))})),m.reduce(((e,t)=>[...e,...t.suggestions]),[])).length)return null;var m;const h=(0,Z.tZ)(w.ZP,{priority:"link",onClick:()=>{a.Z.activatePanel(x.z.Broadcasts),(({organization:e})=>{(0,u.ec)({eventKey:"sdk_updates.clicked",eventName:"SDK Updates: Clicked",organization_id:e.id})})({organization:o})},children:(0,p.t)("Review updates")}),g=(0,Z.tZ)(l.Z,{type:"info",icon:(0,Z.tZ)(c.XK,{}),...i,children:(0,Z.BX)(j,{children:[(0,p.t)("You have outdated SDKs in your projects. Update them for important fixes and features."),(0,Z.BX)(k,{children:[(0,Z.tZ)(w.ZP,{priority:"link",title:(0,p.t)("Dismiss for the next two weeks"),onClick:this.snoozePrompt,children:(0,p.t)("Remind me later")}),"|",h]})]})});return s?(0,Z.tZ)(s,{children:g}):g}}b.displayName="InnerGlobalSdkSuggestions";const j=(0,s.Z)("div",{target:"e13jrk6t1"})("display:flex;flex-wrap:wrap;@media (min-width: ",(e=>e.theme.breakpoints[0]),"){justify-content:space-between;}"),k=(0,s.Z)("div",{target:"e13jrk6t0"})("display:grid;grid-template-columns:repeat(3, max-content);grid-gap:",(0,m.Z)(1),";"),S=(0,y.Z)((0,f.Z)((0,v.Z)((0,g.Z)(b))))},"./app/components/sentryDocumentTitle.tsx":(e,t,n)=>{n.d(t,{Z:()=>a}),n("../node_modules/react/index.js");var o=n("../node_modules/react-document-title/index.js"),s=n.n(o),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r({title:e,orgSlug:t,projectSlug:n,children:o}){const r=t||n?t&&n?"".concat(e," - ").concat(t," - ").concat(n):t?"".concat(e," - ").concat(t):"".concat(e," - ").concat(n):e;return(0,i.tZ)(s(),{title:"".concat(r," - Sentry"),children:o})}r.displayName="SentryDocumentTitle";const a=r},"./app/utils/discover/discoverQuery.tsx":(e,t,n)=>{n.d(t,{Z:()=>l}),n("../node_modules/react/index.js");var o=n("./app/utils/withApi.tsx"),s=n("./app/utils/discover/genericDiscoverQuery.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(e,t){return e.transactionName!==t.transactionName||e.transactionThreshold!==t.transactionThreshold||e.transactionThresholdMetric!==t.transactionThresholdMetric}function a(e){return(0,i.tZ)(s.Z,{route:"eventsv2",shouldRefetchData:r,...e})}a.displayName="DiscoverQuery";const l=(0,o.Z)(a)},"./app/utils/measurements/measurements.tsx":(e,t,n)=>{n.d(t,{Z:()=>c}),n("../node_modules/core-js/modules/es.object.from-entries.js"),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var o=n("../node_modules/react/index.js"),s=n("./app/utils/performance/vitals/constants.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(e){return Object.fromEntries(Object.entries(e).map((([e,t])=>[e,{name:t.name,key:e}])))}const a=r(s.T),l=r(s.r);function d({organization:e,children:t}){const n=e.features.includes("performance-mobile-vitals")?{...l,...a}:l;return(0,i.tZ)(o.Fragment,{children:t({measurements:n})})}d.displayName="Measurements";const c=d},"./app/utils/withTags.tsx":(e,t,n)=>{n.d(t,{Z:()=>l});var o=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/react/index.js")),i=n("./app/stores/tagStore.tsx"),r=n("./app/utils/getDisplayName.tsx"),a=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=function(e){class t extends s.Component{constructor(...e){super(...e),(0,o.Z)(this,"state",{tags:i.Z.getAllTags()}),(0,o.Z)(this,"unsubscribe",i.Z.listen((e=>this.setState({tags:e})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){const{tags:t,...n}=this.props;return(0,a.tZ)(e,{tags:null!=t?t:this.state.tags,...n})}}return t.displayName="WithTags",(0,o.Z)(t,"displayName","withTags(".concat((0,r.Z)(e),")")),t}},"./app/views/performance/transactionSummary/transactionEvents/index.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ce});var o=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/core-js/modules/es.string.trim.js"),n("../node_modules/core-js/modules/es.string.replace.js"),n("../node_modules/react/index.js")),i=n("../node_modules/react-router/es/index.js"),r=n("./app/components/acl/feature.tsx"),a=n("./app/components/alert.tsx"),l=n("./app/components/lightWeightNoProjectMessage.tsx"),d=n("./app/components/organizations/globalSelectionHeader/index.tsx"),c=n("./app/components/sentryDocumentTitle.tsx"),p=n("./app/locale.tsx"),m=n("./app/utils/analytics.tsx"),u=n("./app/utils/discover/discoverQuery.tsx"),h=n("./app/utils/discover/eventView.tsx"),g=n("./app/utils/discover/fields.tsx"),v=n("./app/utils/performance/histogram/index.tsx"),y=n("./app/utils/queryString.tsx"),f=n("./app/utils/tokenizeSearch.tsx"),x=n("./app/utils/withGlobalSelection.tsx"),w=n("./app/utils/withOrganization.tsx"),Z=n("./app/utils/withProjects.tsx"),b=n("./app/views/performance/utils.tsx"),j=n("./app/views/performance/transactionSummary/filter.tsx"),k=n("./app/views/performance/transactionSummary/latencyChart.tsx"),S=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),z=n("../node_modules/lodash/omit.js"),_=n.n(z),E=n("./app/components/button.tsx"),C=n("./app/components/dropdownControl.tsx"),D=n("./app/components/events/searchBar.tsx"),O=n("./app/components/globalSdkUpdateAlert.tsx"),F=n("./app/components/layouts/thirds.tsx"),N=n("./app/components/loadingIndicator.tsx"),V=n("./app/components/organizations/globalSelectionHeader/getParams.tsx"),P=n("./app/icons/index.tsx"),B=n("./app/styles/space.tsx"),T=n("./app/views/eventsV2/table/cellAction.tsx"),q=n("./app/views/performance/transactionSummary/header.tsx"),I=n("./app/components/gridEditable/index.tsx"),A=n("./app/components/gridEditable/sortLink.tsx"),M=n("./app/components/links/link.tsx"),L=n("./app/components/pagination/index.tsx"),H=n("./app/components/questionTooltip.tsx"),X=n("./app/components/tooltip.tsx"),R=n("./app/utils.tsx"),W=n("./app/utils/discover/fieldRenderers.tsx"),U=n("./app/views/performance/data.tsx"),K=n("./app/views/performance/transactionSummary/utils.tsx"),Q=n("../node_modules/react-dom/index.js"),G=n("../node_modules/react-popper/lib/esm/Popper.js"),Y=n("../node_modules/react-popper/lib/esm/Manager.js"),J=n("../node_modules/react-popper/lib/esm/Reference.js"),$=n("./app/components/menuItem.tsx"),ee=n("./app/components/radio.tsx"),te=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class ne extends s.Component{constructor(e){super(e),(0,o.Z)(this,"state",{isOpen:!1}),(0,o.Z)(this,"portalEl",void 0),(0,o.Z)(this,"menuEl",void 0),(0,o.Z)(this,"handleClickOutside",(e=>{this.menuEl&&e.target instanceof Element&&(this.menuEl.contains(e.target)||this.setState({isOpen:!1}))})),(0,o.Z)(this,"toggleOpen",(()=>{this.setState((({isOpen:e})=>({isOpen:!e})))}));let t=document.getElementById("transaction-events-portal");t||(t=document.createElement("div"),t.setAttribute("id","transaction-events-portal"),document.body.appendChild(t)),this.portalEl=t,this.menuEl=null}componentDidUpdate(e,t){this.state.isOpen&&!1===t.isOpen&&document.addEventListener("click",this.handleClickOutside,!0),!1===this.state.isOpen&&t.isOpen&&document.removeEventListener("click",this.handleClickOutside,!0)}componentWillUnmount(){document.removeEventListener("click",this.handleClickOutside,!0),this.portalEl.remove()}generateSortLink(e){const{eventView:t,tableMeta:n,location:o}=this.props;if(!n)return;const s=t.sortOnField(e,n,"desc").generateQueryStringObject();return{...o,query:{...o.query,sort:s.sort}}}renderMenuItem(e,t){const{eventView:n}=this.props;return(0,te.tZ)(se,{children:(0,te.tZ)(ie,{children:(0,te.BX)(re,{children:[(0,te.tZ)(ae,{readOnly:!0,radioSize:"small",checked:n.sorts.some((({field:t})=>t===e)),onClick:()=>{const t=this.generateSortLink({field:e});t&&i.browserHistory.push(t)}}),(0,te.tZ)("span",{children:t})]})})})}renderMenuContent(){return(0,te.BX)(le,{children:[this.renderMenuItem("spans.http",(0,p.t)("Sort By HTTP")),this.renderMenuItem("spans.db",(0,p.t)("Sort By DB")),this.renderMenuItem("spans.resource",(0,p.t)("Sort By Resource")),this.renderMenuItem("spans.browser",(0,p.t)("Sort By Browser"))]})}renderMenu(){return Q.createPortal((0,te.tZ)(G.ZP,{placement:"top",modifiers:{hide:{enabled:!1},preventOverflow:{padding:10,enabled:!0,boundariesElement:"viewport"}},children:({ref:e,style:t,placement:n})=>(0,te.tZ)(oe,{ref:t=>{e(t),this.menuEl=t},style:t,"data-placement":n,children:this.renderMenuContent()})}),this.portalEl)}render(){const{title:e}=this.props,{isOpen:t}=this.state,n=t?this.renderMenu():null;return(0,te.BX)(Y.ZP,{children:[(0,te.tZ)(J.Z,{children:({ref:t})=>(0,te.tZ)(de,{ref:t,children:(0,te.tZ)(e,{onClick:this.toggleOpen})})}),n]})}}ne.displayName="OperationSort";const oe=(0,S.Z)("div",{target:"e1pnio0z6"})("border:none;border-radius:2px;box-shadow:0 0 0 1px rgba(52, 60, 69, 0.2),0 1px 3px rgba(70, 82, 98, 0.25);background-clip:padding-box;background-color:",(e=>e.theme.background),";width:220px;overflow:visible;z-index:",(e=>e.theme.zIndex.tooltip),";&:before,&:after{width:0;height:0;content:'';display:block;position:absolute;right:auto;}&:before{border-left:9px solid transparent;border-right:9px solid transparent;left:calc(50% - 9px);z-index:-2;}&:after{border-left:8px solid transparent;border-right:8px solid transparent;left:calc(50% - 8px);z-index:-1;}&[data-placement*='bottom']{margin-top:9px;&:before{border-bottom:9px solid ",(e=>e.theme.border),";top:-9px;}&:after{border-bottom:8px solid ",(e=>e.theme.background),";top:-8px;}}&[data-placement*='top']{margin-bottom:9px;&:before{border-top:9px solid ",(e=>e.theme.border),";bottom:-9px;}&:after{border-top:8px solid ",(e=>e.theme.background),";bottom:-8px;}}"),se=(0,S.Z)($.Z,{target:"e1pnio0z5"})("font-size:",(e=>e.theme.fontSizeMedium),";&:not(:last-child){border-bottom:1px solid ",(e=>e.theme.innerBorder),";}"),ie=(0,S.Z)("div",{target:"e1pnio0z4"})({name:"1bxfgt5",styles:"display:flex;flex-direction:row;justify-content:flex-start;align-items:center;width:100%"}),re=(0,S.Z)("label",{target:"e1pnio0z3"})({name:"1oo7s2s",styles:"display:grid;cursor:pointer;grid-gap:0.25em 0.5em;grid-template-columns:max-content auto;align-items:center;outline:none;font-weight:normal;margin:0"}),ae=(0,S.Z)(ee.Z,{target:"e1pnio0z2"})({name:"ti75j2",styles:"margin:0"}),le=(0,S.Z)("div",{target:"e1pnio0z1"})({name:"1okymkx",styles:"max-height:250px;overflow-y:auto"}),de=(0,S.Z)("div",{target:"e1pnio0z0"})({name:"e0dnmk",styles:"cursor:pointer"}),ce=ne;class pe extends s.Component{render(){const{onClick:e}=this.props;return(0,te.BX)("div",{onClick:e,children:[(0,te.tZ)("span",{children:(0,p.t)("operation duration")}),(0,te.tZ)(ue,{size:"xs",position:"top",title:(0,p.t)("Span durations are summed over the course of an entire transaction. Any overlapping spans are only counted once.")})]})}}pe.displayName="OperationTitle";class me extends s.Component{constructor(...e){super(...e),(0,o.Z)(this,"state",{widths:[]}),(0,o.Z)(this,"handleCellAction",(e=>(t,n)=>{const{eventView:o,location:s,organization:r}=this.props;(0,m.ec)({eventKey:"performance_views.transactionEvents.cellaction",eventName:"Performance Views: Transaction Events Tab Cell Action Clicked",organization_id:parseInt(r.id,10),action:t});const a=(0,f.aI)(o.query);a.removeFilter("event.type"),(0,T.rh)(a,t,e,n),i.browserHistory.push({pathname:s.pathname,query:{...s.query,cursor:void 0,query:a.formatString()}})})),(0,o.Z)(this,"renderBodyCellWithData",(e=>(t,n)=>this.renderBodyCell(e,t,n))),(0,o.Z)(this,"renderHeadCellWithMeta",(e=>{var t;const n=null!==(t=this.props.columnTitles)&&void 0!==t?t:U.hj;return(t,o)=>this.renderHeadCell(e,t,n[o])})),(0,o.Z)(this,"handleResizeColumn",((e,t)=>{const n=[...this.state.widths];n[e]=t.width?Number(t.width):I.z7,this.setState({widths:n})}))}renderBodyCell(e,t,n){const{eventView:o,organization:s,location:i,transactionName:r}=this.props;if(!e||!e.meta)return n[t.key];const a=e.meta,l=String(t.key),d=(0,W.Js)(l,a)(n,{organization:s,location:i,eventView:o}),c=[T.eX.ADD,T.eX.EXCLUDE,T.eX.SHOW_GREATER_THAN,T.eX.SHOW_LESS_THAN];if("id"===l||"trace"===l){const e=("id"===l?K.vd:K.Z6)(r)(s,n,i.query);return(0,te.tZ)(T.ZP,{column:t,dataRow:n,handleCellAction:this.handleCellAction(t),allowActions:c,children:(0,te.tZ)(M.Z,{to:e,children:d})})}const p=(0,g.LY)(l),m=n[p];return"integer"===a[p]&&(0,R.ri)(m)&&m>999?(0,te.tZ)(X.Z,{title:m.toLocaleString(),containerDisplayMode:"block",position:"right",children:(0,te.tZ)(T.ZP,{column:t,dataRow:n,handleCellAction:this.handleCellAction(t),allowActions:c,children:d})}):(0,te.tZ)(T.ZP,{column:t,dataRow:n,handleCellAction:this.handleCellAction(t),allowActions:c,children:d})}onSortClick(e,t){const{organization:n}=this.props;(0,m.ec)({eventKey:"performance_views.transactionEvents.sort",eventName:"Performance Views: Transaction Events Tab Sorted",organization_id:parseInt(n.id,10),field:t,direction:e})}renderHeadCell(e,t,n){const{eventView:o,location:s}=this.props,i=(0,g.qG)(t.name,t.type,e),r={field:t.name,width:t.width},a=o.sortForField(r,e),l="id"!==r.field&&"trace"!==r.field&&r.field!==g.zD&&(0,h.M3)(r,e),d=a?a.kind:void 0,c=a?a.field:void 0;return r.field===g.zD&&(n=(0,te.tZ)(ce,{title:pe,eventView:o,tableMeta:e,location:s})),(0,te.tZ)(A.Z,{align:i,title:n||r.field,direction:d,canSort:l,generateSortLink:function(){if(!e)return;const t=o.sortOnField(r,e).generateQueryStringObject();return{...s,query:{...s.query,sort:t.sort}}},onClick:()=>this.onSortClick(d,c)})}render(){const{eventView:e,organization:t,location:n,setError:o}=this.props,{widths:i}=this.state,r=e.getColumns().find((e=>e.name===g.zD)),a=e.getColumns().filter((e=>!r||!(0,g.yK)(e.name))).map(((e,t)=>"number"==typeof i[t]?{...e,width:i[t]}:e));return(0,te.tZ)("div",{children:(0,te.tZ)(u.Z,{eventView:e,orgSlug:t.slug,location:n,setError:o,referrer:"api.performance.transaction-events",children:({pageLinks:t,isLoading:o,tableData:i})=>(0,te.BX)(s.Fragment,{children:[(0,te.tZ)(I.ZP,{isLoading:o,data:i?i.data:[],columnOrder:a,columnSortBy:e.getSorts(),grid:{onResizeColumn:this.handleResizeColumn,renderHeadCell:this.renderHeadCellWithMeta(null==i?void 0:i.meta),renderBodyCell:this.renderBodyCellWithData(i)},location:n}),(0,te.tZ)(L.Z,{pageLinks:t})]})})})}}me.displayName="EventsTable";const ue=(0,S.Z)(H.Z,{target:"e8p3pb0"})({name:"1dgfen9",styles:"position:relative;top:1px;left:4px"}),he=me;var ge=n("./app/views/performance/transactionSummary/transactionEvents/utils.tsx");class ve extends s.Component{constructor(...e){super(...e),(0,o.Z)(this,"state",{incompatibleAlertNotice:null,error:void 0}),(0,o.Z)(this,"handleCellAction",(e=>(t,n)=>{const{eventView:o,location:s}=this.props,r=(0,f.aI)(o.query);r.removeFilter("event.type"),r.removeFilter("transaction"),(0,T.rh)(r,t,e,n),i.browserHistory.push({pathname:s.pathname,query:{...s.query,cursor:void 0,query:r.formatString()}})})),(0,o.Z)(this,"handleIncompatibleQuery",((e,t)=>{const n=e((()=>this.setState({incompatibleAlertNotice:null})));this.setState({incompatibleAlertNotice:n})})),(0,o.Z)(this,"setError",(e=>{this.setState({error:e})}))}renderError(){const{error:e}=this.state;return e?(0,te.tZ)(we,{type:"error",icon:(0,te.tZ)(P.Gy,{size:"md"}),children:e}):null}render(){const{eventView:e,location:t,organization:n,projects:o,transactionName:i,isLoading:r}=this.props,{incompatibleAlertNotice:a}=this.state;return(0,te.BX)(s.Fragment,{children:[(0,te.tZ)(q.Z,{eventView:e,location:t,organization:n,projects:o,transactionName:i,currentTab:q.O.Events,hasWebVitals:"maybe",handleIncompatibleQuery:this.handleIncompatibleQuery}),(0,te.BX)(F.uT,{children:[(0,te.tZ)(je,{}),this.renderError(),a&&(0,te.tZ)(F.or,{fullWidth:!0,children:a}),(0,te.tZ)(F.or,{fullWidth:!0,children:r?(0,te.tZ)(N.Z,{}):(0,te.tZ)(ye,{...this.props,setError:this.setError})})]})]})}}ve.displayName="EventsPageContent";class ye extends s.Component{render(){let{eventView:e}=this.props;const{location:t,organization:n,transactionName:o,spanOperationBreakdownFilter:i,eventsDisplayFilterName:r,onChangeEventsDisplayFilter:a,setError:l,webVital:d}=this.props,c=[(0,p.t)("event id"),(0,p.t)("user"),(0,p.t)("operation duration"),(0,p.t)("total duration"),(0,p.t)("trace id"),(0,p.t)("timestamp")];d&&c.splice(3,0,(0,p.t)(d));const m=(0,j.Is)(i,t);return m&&(e=e.clone(),e.query="".concat(e.query," ").concat(m).trim(),c.splice(2,1,(0,p.t)("".concat(i," duration")))),(0,te.BX)(s.Fragment,{children:[(0,te.tZ)(fe,{...this.props,onChangeEventsDisplayFilter:a,eventsDisplayFilterName:r}),(0,te.tZ)(be,{children:(0,te.tZ)(he,{eventView:e,organization:n,location:t,setError:l,columnTitles:c,transactionName:o})})]})}}ye.displayName="Body";const fe=e=>{const{eventView:t,location:n,organization:o,spanOperationBreakdownFilter:s,onChangeSpanOperationBreakdownFilter:r,eventsDisplayFilterName:a,onChangeEventsDisplayFilter:l,percentileValues:d}=e,c=(0,y.ro)(n.query.query,""),m=(0,ge._S)(s,d);return(0,te.BX)(xe,{children:[(0,te.tZ)(j.ZP,{organization:o,currentFilter:s,onChangeFilter:r}),(0,te.tZ)(Ze,{organization:o,projectIds:t.project,query:c,fields:t.fields,onSearch:e=>{const t=(0,V.Q)({...n.query||{},query:e}),o=_()(t,"cursor");i.browserHistory.push({pathname:n.pathname,query:o})}}),(0,te.tZ)(ke,{children:(0,te.tZ)(C.ZP,{buttonProps:{prefix:(0,p.t)("Percentile")},label:m[a].label,children:Object.entries(m).map((([e,t])=>(0,te.tZ)(C.hP,{onSelect:l,eventKey:e,"data-test-id":e,isActive:a===e,children:t.label},e)))})}),(0,te.tZ)(ke,{children:(0,te.tZ)(E.ZP,{to:t.getResultsViewUrlTarget(o.slug),children:(0,p.t)("Open in Discover")})})]})};fe.displayName="Search";const xe=(0,S.Z)("div",{target:"e1rf7xcw5"})("display:flex;width:100%;margin-bottom:",(0,B.Z)(3),";"),we=(0,S.Z)(a.Z,{target:"e1rf7xcw4"})({name:"3hfw1i",styles:"grid-column:1/3;margin:0"}),Ze=(0,S.Z)(D.Z,{target:"e1rf7xcw3"})({name:"1ff36h2",styles:"flex-grow:1"}),be=(0,S.Z)("div",{target:"e1rf7xcw2"})({name:"1ff36h2",styles:"flex-grow:1"}),je=(0,S.Z)(O.Z,{target:"e1rf7xcw1"})("@media (min-width: ",(e=>e.theme.breakpoints[1]),"){margin-bottom:0;}"),ke=(0,S.Z)("div",{target:"e1rf7xcw0"})("margin-left:",(0,B.Z)(1),";flex-grow:0;");je.defaultProps={Wrapper:e=>(0,te.tZ)(F.or,{fullWidth:!0,...e})};const Se=ve;class ze extends s.Component{constructor(...e){super(...e),(0,o.Z)(this,"state",{spanOperationBreakdownFilter:(0,j.q0)(this.props.location),eventsDisplayFilterName:(0,ge.tb)(this.props.location),eventView:Ee(this.props.location,(0,b.JY)(this.props.location))}),(0,o.Z)(this,"onChangeSpanOperationBreakdownFilter",(e=>{var t;const{location:n,organization:o}=this.props,{spanOperationBreakdownFilter:s,eventsDisplayFilterName:r,eventView:a}=this.state;(0,m.ec)({eventName:"Performance Views: Transaction Events Ops Breakdown Filter Dropdown",eventKey:"performance_views.transactionEvents.ops_filter_dropdown.selection",organization_id:parseInt(o.id,10),action:e});const l=(0,ge._S)(s)[r].sort,d=null==a||null===(t=a.sorts)||void 0===t?void 0:t[0];let c={};(null==l?void 0:l.kind)===(null==d?void 0:d.kind)&&(null==l?void 0:l.field)===(null==d?void 0:d.field)&&(c=(0,ge.qg)(r,e));const p={...(0,v.V)(n,[k.Oo,k.mo]),...(0,j.bz)(e),...c};e===j.f1.None&&delete p.breakdown,i.browserHistory.push({pathname:n.pathname,query:p})})),(0,o.Z)(this,"onChangeEventsDisplayFilter",(e=>{const{organization:t}=this.props;(0,m.ec)({eventName:"Performance Views: Transaction Events Display Filter Dropdown",eventKey:"performance_views.transactionEvents.display_filter_dropdown.selection",organization_id:parseInt(t.id,10),action:e}),this.filterDropdownSortEvents(e)})),(0,o.Z)(this,"filterDropdownSortEvents",(e=>{const{location:t}=this.props,{spanOperationBreakdownFilter:n}=this.state,o={...(0,v.V)(t,[k.Oo,k.mo]),...(0,ge.qg)(e,n)};e===ge.q3.p100&&delete o.showTransaction,i.browserHistory.push({pathname:t.pathname,query:o})})),(0,o.Z)(this,"getFilteredEventView",(e=>{const{eventsDisplayFilterName:t,spanOperationBreakdownFilter:n,eventView:o}=this.state,s=(0,ge._S)(n,e)[t],i=null==o?void 0:o.clone();if(i&&null!=s&&s.query){const e=(0,f.aI)(i.query);s.query.forEach((t=>e.setFilterValues(t[0],[t[1]]))),i.query=e.formatString()}return i})),(0,o.Z)(this,"renderNoAccess",(()=>(0,te.tZ)(a.Z,{type:"warning",children:(0,p.t)("You don't have access to this feature")})))}static getDerivedStateFromProps(e,t){return{...t,spanOperationBreakdownFilter:(0,j.q0)(e.location),eventsDisplayFilterName:(0,ge.tb)(e.location),eventView:Ee(e.location,(0,b.JY)(e.location))}}getDocumentTitle(){const e=(0,b.JY)(this.props.location);return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,p.t)("Events")].join(" — "):[(0,p.t)("Summary"),(0,p.t)("Events")].join(" — ")}getPercentilesEventView(e){return e.withColumns([{kind:"function",function:["p100","",void 0,void 0]},{kind:"function",function:["p99","",void 0,void 0]},{kind:"function",function:["p95","",void 0,void 0]},{kind:"function",function:["p75","",void 0,void 0]},{kind:"function",function:["p50","",void 0,void 0]}])}render(){const{organization:e,projects:t,location:n}=this.props,{eventView:o}=this.state,s=(0,b.JY)(n),a=_e(n);if(!o||void 0===s)return i.browserHistory.replace({pathname:"/organizations/".concat(e.slug,"/performance/"),query:{...n.query}}),null;const m=this.getPercentilesEventView(o),h=1===o.project.length,g=h?t.find((e=>parseInt(e.id,10)===o.project[0])):void 0,v=o.project.map((e=>t.find((t=>parseInt(t.id,10)===e)))).filter((e=>void 0!==e)).map((e=>e.slug));return(0,te.tZ)(c.Z,{title:this.getDocumentTitle(),orgSlug:e.slug,projectSlug:null==g?void 0:g.slug,children:(0,te.tZ)(r.Z,{features:["performance-events-page"],organization:e,renderDisabled:this.renderNoAccess,children:(0,te.tZ)(d.Z,{lockedMessageSubject:(0,p.t)("transaction"),shouldForceProject:h,forceProject:g,specificProjectSlugs:v,disableMultipleProjectSelection:!0,showProjectSettingsLink:!0,children:(0,te.tZ)(l.Z,{organization:e,children:(0,te.tZ)(u.Z,{eventView:m,orgSlug:e.slug,location:n,referrer:"api.performance.transaction-events",children:({isLoading:o,tableData:i})=>{var r;const l=null==i||null===(r=i.data)||void 0===r?void 0:r[0];return(0,te.tZ)(Se,{location:n,eventView:this.getFilteredEventView(l),transactionName:s,organization:e,projects:t,spanOperationBreakdownFilter:this.state.spanOperationBreakdownFilter,onChangeSpanOperationBreakdownFilter:this.onChangeSpanOperationBreakdownFilter,eventsDisplayFilterName:this.state.eventsDisplayFilterName,onChangeEventsDisplayFilter:this.onChangeEventsDisplayFilter,percentileValues:l,isLoading:o,webVital:a})}})})})})})}}function _e(e){const t=(0,y.ro)(e.query.webVital,"");if(Object.values(g.Zl).includes(t))return t}function Ee(e,t){if(void 0===t)return;const n=(0,y.ro)(e.query.query,""),o=(0,f.aI)(n);o.setFilterValues("event.type",["transaction"]).setFilterValues("transaction",[t]),Object.keys(o.filters).forEach((e=>{(0,g.h1)(e)&&o.removeFilter(e)}));const s=["id","user.display",g.zD,"transaction.duration","trace","timestamp"],i=(0,j.q0)(e);i!==j.f1.None?s.splice(2,1,"spans.".concat(i)):s.push(...g.$4);const r=_e(e);return r&&s.splice(3,0,r),h.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:t,fields:s,query:o.formatString(),projects:[],orderby:(0,y.ro)(e.query.sort,"-timestamp")},e)}ze.displayName="TransactionEvents";const Ce=(0,x.Z)((0,Z.Z)((0,w.Z)(ze)))}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_transactionEvents_index_tsx.ac08d3d400b498b41b1612d0effde5fd.js.map