"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_organizationGroupDetails_grouping_index_tsx"],{"./app/views/organizationGroupDetails/grouping/index.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>ne});var i=n("./app/components/acl/feature.tsx"),o=n("./app/components/alert.tsx"),a=n("./app/locale.tsx"),r=n("./app/styles/organization.tsx"),s=n("./app/utils/withOrganization.tsx"),l=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),d=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/core-js/modules/es.string.replace.js"),n("../node_modules/react/index.js")),u=n("../node_modules/lodash/debounce.js"),c=n.n(u),p=n("./app/components/links/externalLink.tsx"),g=n("./app/components/loadingIndicator.tsx"),m=n("./app/components/pagination/index.tsx"),h=n("./app/styles/space.tsx"),Z=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function f({caption:e}){return(0,Z.tZ)(x,{children:e})}f.displayName="PaginationCaption";const v=f,x=(0,l.Z)("span",{target:"e1apkaoh0"})("color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeMedium),";margin-right:",(0,h.Z)(2),";");var y=n("./app/components/panels/index.tsx"),b=n("./app/constants/index.tsx"),w=n("./app/icons/index.tsx"),k=n("./app/utils.tsx"),S=n("./app/utils/parseLinkHeader.tsx"),j=n("./app/utils/withApi.tsx"),_=n("./app/views/settings/components/forms/controls/rangeSlider.tsx"),z=n("./app/components/button.tsx"),B=n("./app/components/buttonBar.tsx"),C=n("./app/components/loadingError.tsx"),N=n("./app/views/settings/components/emptyMessage.tsx");function T({error:e,groupId:t,onRetry:n,orgSlug:i,projSlug:r}){var s;if("string"==typeof e)return(0,Z.tZ)(o.Z,{type:"warning",children:e});if(403===e.status&&null!==(s=e.responseJSON)&&void 0!==s&&s.detail){const{code:n,message:o}=e.responseJSON.detail,{action:s,title:l,subTitle:u,leftAligned:c}=function(e){switch(e){case"merged_issues":return{title:(0,a.t)("Grouping breakdown is not available in this issue"),subTitle:(0,a.t)("This issue needs to be fully unmerged before grouping breakdown is available"),action:(0,Z.tZ)(z.ZP,{priority:"primary",to:"/organizations/sentry/issues/".concat(t,"/merged/?").concat(location.search),children:(0,a.t)("Unmerge issue")})};case"missing_feature":return{title:(0,a.t)("This project does not have the grouping breakdown available. Is your organization still an early adopter?")};case"no_events":return{title:(0,a.t)("This issue has no events")};case"issue_not_hierarchical":return{title:(0,a.t)("Grouping breakdown is not available in this issue"),subTitle:(0,a.t)("Only new issues with the latest grouping strategy have this feature available")};case"project_not_hierarchical":return{title:(0,a.t)("Update your Grouping Config"),subTitle:(0,Z.BX)(d.Fragment,{children:[(0,Z.tZ)("p",{children:(0,a.t)("Enable advanced grouping insights and functionality by updating this project to the latest Grouping Config:")}),(0,Z.BX)("ul",{children:[(0,Z.tZ)("li",{children:(0,a._N)("[strong:Breakdowns:] Explore events in this issue by call hierarchy.",{strong:(0,Z.tZ)("strong",{})})}),(0,Z.tZ)("li",{children:(0,a._N)("[strong:Stack trace annotations:] See important frames Sentry uses to group issues directly in the stack trace.",{strong:(0,Z.tZ)("strong",{})})})]})]}),leftAligned:!0,action:(0,Z.BX)(B.ZP,{gap:1,children:[(0,Z.tZ)(z.ZP,{priority:"primary",to:"/settings/".concat(i,"/projects/").concat(r,"/issue-grouping/#upgrade-grouping"),children:(0,a.t)("Upgrade Grouping Config")}),(0,Z.tZ)(z.ZP,{href:"https://docs.sentry.io/product/data-management-settings/event-grouping/grouping-breakdown/",children:(0,a.t)("Read the docs")})]})};default:return{}}}(n);return(0,Z.tZ)(y.s_,{children:(0,Z.tZ)(N.Z,{size:"large",title:null!=l?l:o,description:u,action:s,leftAligned:c})})}return(0,Z.tZ)(C.Z,{message:(0,a.t)("Unable to load grouping levels, please try again later"),onRetry:n})}T.displayName="ErrorMessage";const E=T;var G=n("./app/components/eventOrGroupHeader.tsx"),X=n("./app/components/timeSince.tsx");function I({sampleEvent:e,eventCount:t,organization:n}){return(0,Z.BX)(d.Fragment,{children:[(0,Z.BX)(A,{children:[(0,Z.tZ)(G.Z,{data:e,organization:n,hideIcons:!0,hideLevel:!0}),(0,Z.tZ)(L,{children:(0,Z.BX)(U,{children:[(0,Z.tZ)(F,{size:"11px"}),(0,Z.tZ)(X.Z,{date:e.dateCreated,suffix:(0,a.t)("old")})]})})]}),(0,Z.tZ)(q,{children:t})]})}I.displayName="NewIssue";const R=I,A=(0,l.Z)("div",{target:"ebu51d34"})({name:"1eiwmge",styles:"overflow:hidden;line-height:1.1"}),L=(0,l.Z)("div",{target:"ebu51d33"})("display:grid;grid-auto-flow:column;grid-gap:",(0,h.Z)(2),";justify-content:flex-start;"),U=(0,l.Z)("div",{target:"ebu51d32"})("display:grid;grid-gap:",(0,h.Z)(.5),";grid-template-columns:max-content 1fr;align-items:center;font-size:",(e=>e.theme.fontSizeSmall),";"),q=(0,l.Z)("div",{target:"ebu51d31"})({name:"ygmdwl",styles:"align-items:center;line-height:1.1"}),F=(0,l.Z)(w.jo,{target:"ebu51d30"})("color:",(e=>e.theme.subText),";");function P(){return(0,Z.tZ)(K,{children:(0,Z.BX)(p.Z,{href:"mailto:grouping@sentry.io?subject=".concat(encodeURIComponent("Grouping Feedback"),"&body=").concat(encodeURIComponent("URL: ".concat(window.location.href,"\n\nThanks for taking the time to provide us feedback. What's on your mind?"))),children:[(0,Z.tZ)(D,{})," ",(0,a.t)("Give Feedback")]})})}function M({api:e,groupId:t,location:n,organization:i,router:o,projSlug:r}){var s,l;const{cursor:u,level:p}=n.query,[m,h]=(0,d.useState)(!1),[f,x]=(0,d.useState)(!1),[y,w]=(0,d.useState)(void 0),[j,_]=(0,d.useState)([]),[z,B]=(0,d.useState)(void 0),[C,N]=(0,d.useState)([]),[T,G]=(0,d.useState)("");(0,d.useEffect)((()=>{I()}),[]),(0,d.useEffect)((()=>{!function(){if(j.length)if((0,k.ri)(p)){if(!(0,k.ri)(j[p]))return void w((0,a.t)("The level you were looking for was not found."));if(p===z)return;B(p)}else j.length>1?B(j[1].id):B(j[0].id)}()}),[j]),(0,d.useEffect)((()=>{(0,k.ri)(z)&&p!==z&&o.replace({pathname:n.pathname,query:{...n.query,cursor:void 0,level:z}})}),[z]),(0,d.useEffect)((()=>{!async function(){if(j.length&&(0,k.ri)(z)){x(!0),w(void 0);try{var i;const[o,,a]=await e.requestPromise("/issues/".concat(t,"/grouping/levels/").concat(z,"/new-issues/"),{method:"GET",includeAllArgs:!0,query:{...n.query,per_page:10}}),r=null==a||null===(i=a.getResponseHeader)||void 0===i?void 0:i.call(a,"Link");G(null!=r?r:""),N(Array.isArray(o)?o:[o]),x(!1)}catch(e){x(!1),w(e)}}}()}),[z,u]);const X=c()((e=>{B(Number(e))}),b.Dk);async function I(){h(!0),w(void 0);try{const n=await e.requestPromise("/issues/".concat(t,"/grouping/levels/"));h(!1),_(n.levels)}catch(e){h(!1),w(e)}}if(m)return(0,Z.tZ)(g.Z,{});if(y)return(0,Z.BX)(d.Fragment,{children:[(0,Z.tZ)(E,{onRetry:I,groupId:t,error:y,projSlug:r,orgSlug:i.slug}),(0,Z.tZ)(P,{})]});if(!C.length)return(0,Z.tZ)(g.Z,{});const A=(0,S.Z)(T),L=(null===(s=A.previous)||void 0===s?void 0:s.results)||(null===(l=A.next)||void 0===l?void 0:l.results),U=C.length;return(0,Z.BX)(H,{children:[(0,Z.tZ)(J,{children:(0,a.t)("This issue is an aggregate of multiple events that sentry determined originate from the same root-cause. Use this page to explore more detailed groupings that exist within this issue.")}),(0,Z.BX)(V,{children:[(0,Z.BX)($,{children:[(0,a.t)("Fewer issues"),(0,Z.tZ)(ee,{name:"grouping-level",allowedValues:j.map((e=>Number(e.id))),value:null!=z?z:0,onChange:X,showLabel:!1}),(0,a.t)("More issues")]}),(0,Z.BX)(Q,{isReloading:f,children:[(0,Z.tZ)(W,{headers:["",(0,a.t)("Events")],children:C.map((({hash:e,title:t,metadata:n,latestEvent:o,eventCount:a})=>(0,Z.tZ)(R,{sampleEvent:{...o,metadata:n||o.metadata,title:t||o.title},eventCount:a,organization:i},e)))}),(0,Z.tZ)(Y,{pageLinks:T,disabled:f,caption:(0,Z.tZ)(v,{caption:(0,a._N)("Showing [current] of [total] [result]",{result:L?(0,a.t)("results"):(0,a.tn)("result","results",U),current:U,total:L?"".concat(U,"+"):U})})})]})]}),(0,Z.tZ)(P,{})]})}P.displayName="LinkFooter",M.displayName="Grouping";const O=(0,j.Z)(M),D=(0,l.Z)(w.I8,{target:"e1m7ctwt9"})("margin-right:",(0,h.Z)(.5),";"),H=(0,l.Z)("div",{target:"e1m7ctwt8"})("flex:1;display:grid;align-content:flex-start;margin:-",(0,h.Z)(3)," -",(0,h.Z)(4),";padding:",(0,h.Z)(3)," ",(0,h.Z)(4),";"),J=(0,l.Z)("p",{target:"e1m7ctwt7"})("&&{margin-bottom:",(0,h.Z)(2),";}"),K=(0,l.Z)("p",{target:"e1m7ctwt6"})("&&{margin-top:",(0,h.Z)(2),";}"),V=(0,l.Z)("div",{target:"e1m7ctwt5"})("display:grid;grid-gap:",(0,h.Z)(3),";"),W=(0,l.Z)(y.KB,{target:"e1m7ctwt4"})("grid-template-columns:1fr minmax(60px, auto);>*{padding:",(0,h.Z)(1.5)," ",(0,h.Z)(2),";:nth-child(-n + 2){padding:",(0,h.Z)(2),";}:nth-child(2n){display:flex;text-align:right;justify-content:flex-end;}}@media (min-width: ",(e=>e.theme.breakpoints[3]),"){grid-template-columns:1fr minmax(80px, auto);}"),Y=(0,l.Z)(m.Z,{target:"e1m7ctwt3"})({name:"1i9vogi",styles:"margin-top:0"}),Q=(0,l.Z)("div",{target:"e1m7ctwt2"})((e=>e.isReloading&&"\n      ".concat(W,", ").concat(Y," {\n        opacity: 0.5;\n        pointer-events: none;\n      }\n    ")),";"),$=(0,l.Z)("div",{target:"e1m7ctwt1"})("display:grid;grid-gap:",(0,h.Z)(1.5),";grid-template-columns:max-content max-content;justify-content:space-between;align-items:flex-start;position:relative;font-size:",(e=>e.theme.fontSizeMedium),";color:",(e=>e.theme.subText),";padding-bottom:",(0,h.Z)(2),";@media (min-width: 700px){grid-template-columns:max-content minmax(270px, auto) max-content;align-items:center;justify-content:flex-start;padding-bottom:0;}"),ee=(0,l.Z)(_.Z,{target:"e1m7ctwt0"})(_.i,"{background:transparent;margin-top:0;margin-bottom:0;::-ms-thumb{box-shadow:0 0 0 3px ",(e=>e.theme.backgroundSecondary),";}::-moz-range-thumb{box-shadow:0 0 0 3px ",(e=>e.theme.backgroundSecondary),";}::-webkit-slider-thumb{box-shadow:0 0 0 3px ",(e=>e.theme.backgroundSecondary),";}}position:absolute;bottom:0;left:",(0,h.Z)(1.5),";right:",(0,h.Z)(1.5),";@media (min-width: 700px){position:static;left:auto;right:auto;}");function te({organization:e,location:t,group:n,router:s,project:l}){return(0,Z.tZ)(i.Z,{features:["grouping-tree-ui"],organization:e,renderDisabled:()=>(0,Z.tZ)(r.JH,{children:(0,Z.tZ)(o.Z,{type:"warning",children:(0,a.t)("You don't have access to this feature")})}),children:(0,Z.tZ)(O,{location:t,groupId:n.id,organization:e,router:s,projSlug:l.slug})})}te.displayName="GroupingContainer";const ne=(0,s.Z)(te)}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationGroupDetails_grouping_index_tsx.83cee72dd8e47c471502ede4611a4514.js.map