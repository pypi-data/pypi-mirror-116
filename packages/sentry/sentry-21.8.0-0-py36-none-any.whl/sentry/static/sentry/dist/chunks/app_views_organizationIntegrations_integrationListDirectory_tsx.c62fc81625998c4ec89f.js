"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_organizationIntegrations_integrationListDirectory_tsx","app_components_sentryDocumentTitle_tsx"],{"./app/components/sentryDocumentTitle.tsx":(t,e,s)=>{s.d(e,{Z:()=>r}),s("../node_modules/react/index.js");var n=s("../node_modules/react-document-title/index.js"),i=s.n(n),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o({title:t,orgSlug:e,projectSlug:s,children:n}){const o=e||s?e&&s?"".concat(t," - ").concat(e," - ").concat(s):e?"".concat(t," - ").concat(e):"".concat(t," - ").concat(s):t;return(0,a.tZ)(i(),{title:"".concat(o," - Sentry"),children:n})}o.displayName="SentryDocumentTitle";const r=o},"./app/utils/createFuzzySearch.tsx":(t,e,s)=>{s.d(e,{I:()=>i}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=s("./app/constants/index.tsx");async function i(t,e){if(!e.keys)throw new Error("You need to define `options.keys`");const{default:i}=await s.e("node_modules_fuse_js_dist_fuse_js").then(s.t.bind(s,"../node_modules/fuse.js/dist/fuse.js",23));return new i(t,{...n.UT,...e})}},"./app/views/organizationIntegrations/integrationListDirectory.tsx":(t,e,s)=>{s.r(e),s.d(e,{IntegrationListDirectory:()=>tt,default:()=>at});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/core-js/modules/web.url.js"),s("../node_modules/react/index.js")),o=s("../node_modules/react-router/es/index.js"),r=s("../node_modules/lodash/debounce.js"),l=s.n(r),c=s("../node_modules/lodash/flatten.js"),d=s.n(c),p=s("../node_modules/lodash/groupBy.js"),g=s.n(p),u=s("../node_modules/lodash/startCase.js"),h=s.n(u),m=s("../node_modules/lodash/uniq.js"),y=s.n(m),Z=s("../node_modules/query-string/index.js"),f=s("./app/components/asyncComponent.tsx"),x=s("./app/components/forms/selectControl.tsx"),v=s("./app/components/panels/index.tsx"),w=s("./app/components/searchBar.tsx"),j=s("./app/components/sentryDocumentTitle.tsx"),b=s("./app/locale.tsx"),_=s("./app/styles/space.tsx"),I=s("./app/utils/createFuzzySearch.tsx"),z=s("./app/utils/integrationUtil.tsx"),k=s("./app/utils/withOrganization.tsx"),S=s("./app/views/settings/components/settingsPageHeader.tsx"),A=s("./app/views/settings/organization/permissionAlert.tsx"),C=s("./app/views/organizationIntegrations/constants.tsx"),P=s("./app/components/alert.tsx"),L=s("./app/components/button.tsx"),B=s("./app/components/links/link.tsx"),N=s("./app/icons/index.tsx"),D=s("./app/plugins/components/pluginIcon.tsx"),T=s("./app/views/organizationIntegrations/integrationStatus.tsx"),O=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const F={plugin:"plugins",firstParty:"integrations",sentryApp:"sentry-apps",documentIntegration:"document-integrations"},X=t=>{const{organization:e,type:s,slug:n,displayName:i,status:a,publishStatus:o,configurations:r,categories:l,alertText:c}=t,d="internal"===o?"/settings/".concat(e.slug,"/developer-settings/").concat(n,"/"):"/settings/".concat(e.slug,"/").concat(F[s],"/").concat(n,"/");return(0,O.BX)(q,{noPadding:!0,"data-test-id":n,children:[(0,O.BX)(R,{children:[(0,O.tZ)(D.ZP,{size:36,pluginId:n}),(0,O.BX)(E,{children:[(0,O.tZ)(G,{to:d,children:i}),(0,O.BX)(U,{children:[a?(0,O.tZ)(T.Z,{status:a}):(0,O.tZ)(Q,{to:d,children:(0,b.t)("Learn More")}),"sentryApp"===s?"published"!==o&&(0,O.tZ)(W,{status:o}):r>0?(0,O.tZ)(H,{to:"".concat(d,"?tab=configurations"),children:"".concat(r," Configuration").concat(r>1?"s":"")}):null]})]}),(0,O.tZ)(V,{children:null==l?void 0:l.map((t=>(0,O.tZ)(M,{category:h()(t),priority:t===o},t)))})]}),c&&(0,O.tZ)(J,{children:(0,O.BX)(P.Z,{type:"warning",icon:(0,O.tZ)(N.FC,{size:"sm"}),children:[(0,O.tZ)("span",{children:c}),(0,O.tZ)(Y,{href:"".concat(d,"?tab=configurations&referrer=directory_resolve_now"),size:"xsmall",onClick:()=>(0,z.pd)("integrations.resolve_now_clicked",{integration_type:(0,z.ts)(s),integration:n,organization:e}),children:(0,b.t)("Resolve Now")})]})})]})};X.displayName="IntegrationRow";const q=(0,i.Z)(v.Lv,{target:"ejka4t011"})({name:"qdeacm",styles:"flex-direction:column"}),R=(0,i.Z)("div",{target:"ejka4t010"})("display:flex;align-items:center;padding:",(0,_.Z)(2),";"),V=(0,i.Z)(R,{target:"ejka4t09"})("padding:0 ",(0,_.Z)(2),";"),E=(0,i.Z)("div",{target:"ejka4t08"})({name:"1uy7vsb",styles:"flex:1;padding:0 16px"}),G=(0,i.Z)(B.Z,{target:"ejka4t07"})({name:"1efi8gv",styles:"font-weight:bold"}),U=(0,i.Z)("div",{target:"ejka4t06"})({name:"4xwio5",styles:"display:flex;align-items:center;margin-top:6px;font-size:0.8em"}),H=(0,i.Z)(B.Z,{target:"ejka4t05"})("color:",(t=>t.theme.gray300),";&:before{content:'|';color:",(t=>t.theme.gray200),";margin-right:",(0,_.Z)(.75),";font-weight:normal;}"),Q=(0,i.Z)(B.Z,{target:"ejka4t04"})("color:",(t=>t.theme.gray300),";"),W=(0,i.Z)((({status:t,...e})=>(0,O.tZ)("div",{...e,children:(0,b.t)("".concat(t))})),{target:"ejka4t03"})("color:",(t=>"published"===t.status?t.theme.success:t.theme.gray300),";font-weight:light;margin-right:",(0,_.Z)(.75),";text-transform:capitalize;&:before{content:'|';color:",(t=>t.theme.gray200),";margin-right:",(0,_.Z)(.75),";font-weight:normal;}"),M=(0,i.Z)((({priority:t,category:e,...s})=>(0,O.tZ)("div",{...s,children:e})),{target:"ejka4t02"})("display:flex;flex-direction:row;padding:1px 10px;background:",(t=>t.priority?t.theme.purple200:t.theme.gray100),";border-radius:20px;font-size:",(0,_.Z)(1.5),";margin-right:",(0,_.Z)(1),";line-height:",(0,_.Z)(3),";text-align:center;color:",(t=>t.priority?t.theme.white:t.theme.gray500),";"),Y=(0,i.Z)(L.ZP,{target:"ejka4t01"})("color:",(t=>t.theme.subText),";float:right;"),J=(0,i.Z)("div",{target:"ejka4t00"})("padding:0px ",(0,_.Z)(3)," 0px 68px;"),K=X,$={threshold:.3,location:0,distance:100,includeScore:!0,keys:["slug","key","name","id"]};class tt extends f.Z{constructor(...t){super(...t),(0,n.Z)(this,"shouldReload",!0),(0,n.Z)(this,"reloadOnVisible",!0),(0,n.Z)(this,"shouldReloadOnVisible",!0),(0,n.Z)(this,"getAppInstall",(t=>{var e;return null===(e=this.state.appInstalls)||void 0===e?void 0:e.find((e=>e.app.slug===t.slug))})),(0,n.Z)(this,"getPopularityWeight",(t=>{var e;return null!==(e=C.ek[t.slug])&&void 0!==e?e:1})),(0,n.Z)(this,"sortByName",((t,e)=>t.slug.localeCompare(e.slug))),(0,n.Z)(this,"sortByPopularity",((t,e)=>{const s=this.getPopularityWeight(t);return this.getPopularityWeight(e)-s})),(0,n.Z)(this,"sortByInstalled",((t,e)=>this.getInstallValue(e)-this.getInstallValue(t))),(0,n.Z)(this,"debouncedTrackIntegrationSearch",l()(((t,e)=>{(0,z.pd)("integrations.directory_item_searched",{view:"integrations_directory",search_term:t,num_results:e,organization:this.props.organization})}),1e3)),(0,n.Z)(this,"getFilterParameters",(()=>{const{category:t,search:e}=Z.parse(this.props.location.search),s=Array.isArray(t)?t[0]:t||"";return{searchInput:Array.isArray(e)?e[0]:e||"",selectedCategory:s}})),(0,n.Z)(this,"updateQueryString",(()=>{const{searchInput:t,selectedCategory:e}=this.state,s=Z.stringify({...Z.parse(this.props.location.search),search:t||void 0,category:e||void 0});o.browserHistory.replace({pathname:this.props.location.pathname,search:s?"?".concat(s):void 0})})),(0,n.Z)(this,"updateDisplayedList",(()=>{const{fuzzy:t,list:e,searchInput:s,selectedCategory:n}=this.state;let i=e;if(s&&t){const e=t.search(s);i=this.sortIntegrations(e.map((t=>t.item)))}return n&&(i=i.filter((t=>(0,z.G2)(t).includes(n)))),this.setState({displayedList:i}),i})),(0,n.Z)(this,"handleSearchChange",(async t=>{this.setState({searchInput:t},(()=>{this.updateQueryString();const e=this.updateDisplayedList();t&&this.debouncedTrackIntegrationSearch(t,e.length)}))})),(0,n.Z)(this,"onCategorySelect",(({value:t})=>{this.setState({selectedCategory:t},(()=>{this.updateQueryString(),this.updateDisplayedList(),t&&(0,z.pd)("integrations.directory_category_selected",{view:"integrations_directory",category:t,organization:this.props.organization})}))})),(0,n.Z)(this,"renderProvider",(t=>{var e,s;const{organization:n}=this.props,i=null!==(e=null===(s=this.state.integrations)||void 0===s?void 0:s.filter((e=>e.provider.key===t.key)))&&void 0!==e?e:[];return(0,O.tZ)(K,{"data-test-id":"integration-row",organization:n,type:"firstParty",slug:t.slug,displayName:t.name,status:i.length?"Installed":"Not Installed",publishStatus:"published",configurations:i.length,categories:(0,z.G2)(t)},"row-".concat(t.key))})),(0,n.Z)(this,"renderPlugin",(t=>{const{organization:e}=this.props,s=t.isHidden,n="".concat(t.name," ").concat(s?"(Legacy)":"");return s&&!t.projectList.length?null:(0,O.tZ)(K,{"data-test-id":"integration-row",organization:e,type:"plugin",slug:t.slug,displayName:n,status:t.projectList.length?"Installed":"Not Installed",publishStatus:"published",configurations:t.projectList.length,categories:(0,z.G2)(t)},"row-plugin-".concat(t.id))})),(0,n.Z)(this,"renderSentryApp",(t=>{const{organization:e}=this.props,s=(0,z.Az)(this.getAppInstall(t)),n=(0,z.G2)(t);return(0,O.tZ)(K,{"data-test-id":"integration-row",organization:e,type:"sentryApp",slug:t.slug,displayName:t.name,status:s,publishStatus:t.status,configurations:0,categories:n},"sentry-app-row-".concat(t.slug))})),(0,n.Z)(this,"renderDocumentIntegration",(t=>{const{organization:e}=this.props;return(0,O.tZ)(K,{organization:e,type:"documentIntegration",slug:t.slug,displayName:t.name,publishStatus:"published",configurations:0,categories:(0,z.G2)(t)},"doc-int-".concat(t.slug))})),(0,n.Z)(this,"renderIntegration",(t=>(0,z.OI)(t)?this.renderSentryApp(t):(0,z.vg)(t)?this.renderPlugin(t):(0,z.jn)(t)?this.renderDocumentIntegration(t):this.renderProvider(t)))}getDefaultState(){return{...super.getDefaultState(),list:[],displayedList:[],selectedCategory:""}}onLoadAllEndpointsSuccess(){const{publishedApps:t,orgOwnedApps:e,extraApp:s,plugins:n}=this.state,i=t||[];null!==e&&s&&e.push(s);const a=null==e?void 0:e.filter((t=>!i.find((e=>e.slug===t.slug)))),o=[].concat(i).concat(null!=a?a:[]).concat(this.providers).concat(null!=n?n:[]).concat(Object.values(C.Uc)),r=this.sortIntegrations(o),{searchInput:l,selectedCategory:c}=this.getFilterParameters();this.setState({list:r,searchInput:l,selectedCategory:c},(()=>{this.updateDisplayedList(),this.trackPageViewed()}))}trackPageViewed(){const{integrations:t,publishedApps:e,plugins:s}=this.state,n=new Set;null==t||t.forEach((t=>{n.add(t.provider.key)})),null==e||e.filter(this.getAppInstall).forEach((t=>{n.add(t.slug)})),null==s||s.forEach((t=>{t.projectList.length&&n.add(t.slug)})),(0,z.pd)("integrations.index_viewed",{integrations_installed:n.size,view:"integrations_directory",organization:this.props.organization},{startSession:!0})}getEndpoints(){const{orgId:t}=this.props.params,e=[["config","/organizations/".concat(t,"/config/integrations/")],["integrations","/organizations/".concat(t,"/integrations/"),{query:{includeConfig:0}}],["orgOwnedApps","/organizations/".concat(t,"/sentry-apps/")],["publishedApps","/sentry-apps/",{query:{status:"published"}}],["appInstalls","/organizations/".concat(t,"/sentry-app-installations/")],["plugins","/organizations/".concat(t,"/plugins/configs/")]],s=new URLSearchParams(this.props.location.search).get("extra_app");return s&&e.push(["extraApp","/sentry-apps/".concat(s,"/")]),e}get unmigratableReposByOrg(){return g()(this.state.unmigratableRepos,(t=>t.name.split("/")[0]))}get providers(){var t,e;return null!==(t=null===(e=this.state.config)||void 0===e?void 0:e.providers)&&void 0!==t?t:[]}getInstallValue(t){const{integrations:e}=this.state;if((0,z.vg)(t))return t.projectList.length>0?2:0;if((0,z.OI)(t)){const e=this.getAppInstall(t);return e?"pending"===e.status?1:2:0}return(0,z.jn)(t)?0:null!=e&&e.find((e=>e.provider.key===t.key))?2:0}sortIntegrations(t){return t.sort(((t,e)=>{const s=this.sortByInstalled(t,e);if(0!==s)return s;const n=this.sortByPopularity(t,e);return 0!==n?n:this.sortByName(t,e)}))}async componentDidUpdate(t,e){this.state.list.length!==e.list.length&&await this.createSearch()}async createSearch(){const{list:t}=this.state;this.setState({fuzzy:await(0,I.I)(t||[],$)})}renderBody(){const{orgId:t}=this.props.params,{displayedList:e,list:s,searchInput:n,selectedCategory:i}=this.state,o=(0,b.t)("Integrations"),r=y()(d()(s.map(z.G2))).sort();return(0,O.BX)(a.Fragment,{children:[(0,O.tZ)(j.Z,{title:o,orgSlug:t}),!this.props.hideHeader&&(0,O.tZ)(S.Z,{title:o,action:(0,O.BX)(et,{children:[(0,O.tZ)(x.Z,{name:"select-categories",onChange:this.onCategorySelect,value:i,choices:[["",(0,b.t)("All Categories")],...r.map((t=>[t,h()(t)]))]}),(0,O.tZ)(w.Z,{query:n||"",onChange:this.handleSearchChange,placeholder:(0,b.t)("Filter Integrations..."),width:"25em"})]})}),(0,O.tZ)(A.Z,{access:["org:integrations"]}),(0,O.tZ)(v.s_,{children:(0,O.tZ)(v.N,{children:e.length?e.map(this.renderIntegration):(0,O.BX)(st,{children:[(0,O.tZ)(nt,{children:(0,b._N)('No Integrations found for "[searchTerm]".',{searchTerm:n})}),(0,O.tZ)(it,{children:(0,b.t)("Not seeing what you're looking for?")}),(0,O.tZ)(nt,{children:(0,b._N)("[link:Build it on the Sentry Integration Platform.]",{link:(0,O.tZ)("a",{href:"https://docs.sentry.io/product/integrations/integration-platform/"})})})]})})})]})}}const et=(0,i.Z)("div",{target:"e623bgk3"})("display:grid;grid-template-columns:240px max-content;grid-gap:",(0,_.Z)(2),";"),st=(0,i.Z)("div",{target:"e623bgk2"})({name:"1nm5mqn",styles:"height:200px;display:flex;flex-direction:column;align-items:center;justify-content:center"}),nt=(0,i.Z)("div",{target:"e623bgk1"})("font-size:16px;line-height:28px;color:",(t=>t.theme.gray300),";padding-bottom:",(0,_.Z)(2),";"),it=(0,i.Z)(nt,{target:"e623bgk0"})({name:"1efi8gv",styles:"font-weight:bold"}),at=(0,k.Z)(tt)},"./app/views/settings/organization/permissionAlert.tsx":(t,e,s)=>{s.d(e,{Z:()=>c}),s("../node_modules/react/index.js");var n=s("./app/components/acl/access.tsx"),i=s("./app/components/alert.tsx"),a=s("./app/icons/index.tsx"),o=s("./app/locale.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=({access:t=["org:write"],...e})=>(0,r.tZ)(n.Z,{access:t,children:({hasAccess:t})=>!t&&(0,r.tZ)(i.Z,{type:"warning",icon:(0,r.tZ)(a.FC,{size:"sm"}),...e,children:(0,o.t)("These settings can only be edited by users with the organization owner or manager role.")})});l.displayName="PermissionAlert";const c=l}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationIntegrations_integrationListDirectory_tsx.0fa104e74b575bf9a23dd618d1cda0be.js.map