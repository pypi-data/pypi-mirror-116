"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_components_events_eventTags_eventTagsPill_tsx-app_components_events_interfaces_spans_anch-b62b10"],{"./app/components/deviceName.tsx":(e,t,r)=>{r.d(t,{qW:()=>i,f:()=>a,ZP:()=>l});var s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js")),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e,t){const r=e.split(" ")[0],s=e.split(" ").splice(1).join(" "),n=t.generationByIdentifier(r);return void 0===n?e:n+" "+s}async function a(){return r.e("vendors-node_modules_ios-device-list_dist_ios-device-list_min_js").then(r.t.bind(r,"../node_modules/ios-device-list/dist/ios-device-list.min.js",23))}class l extends n.Component{constructor(e){super(e),(0,s.Z)(this,"_isMounted",void 0),this.state={iOSDeviceList:null}}componentDidMount(){this._isMounted=!0,a().then((e=>{this._isMounted&&this.setState({iOSDeviceList:e})}))}componentWillUnmount(){this._isMounted=!1}render(){const{value:e,children:t}=this.props,{iOSDeviceList:r}=this.state;if(!e)return null;if(!r)return e;const s=i(e,r);return(0,o.tZ)("span",{"data-test-id":"loaded-device-name",children:t?t(s):s})}}l.displayName="DeviceName"},"./app/components/events/eventTags/eventTagsPill.tsx":(e,t,r)=>{r.d(t,{Z:()=>b});var s=r("../node_modules/react-router/es/index.js"),n=r("../node_modules/query-string/index.js"),o=r("./app/components/events/meta/annotatedText/index.tsx"),i=r("./app/components/events/meta/metaProxy.tsx"),a=r("./app/components/links/externalLink.tsx"),l=r("./app/components/pill.tsx"),d=r("./app/components/versionHoverCard.tsx"),c=r("./app/icons/index.tsx"),p=r("./app/utils.tsx"),h=r("./app/components/deviceName.tsx"),u=r("./app/components/links/link.tsx"),m=r("./app/components/version.tsx"),g=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const v=({tag:{key:e,value:t},meta:r,isRelease:s,streamPath:n,locationSearch:i})=>{var a;const l=s?(0,g.tZ)(m.Z,{version:String(t),anchor:!1,tooltipRawVersion:!0,truncate:!0}):(0,g.tZ)(o.Z,{value:(0,p.ri)(t)&&(0,g.tZ)(h.ZP,{value:String(t)}),meta:r});return null!=r&&null!==(a=r.err)&&void 0!==a&&a.length||!(0,p.ri)(e)?l:(0,g.tZ)(u.Z,{to:{pathname:n,search:i},children:l})},f={name:"1w4n49d",styles:"position:relative;top:1px"},x=({tag:e,query:t,organization:r,projectId:h,streamPath:u,releasesPath:m})=>{const x="?".concat(n.stringify(t)),{key:b,value:y}=e,w="release"===b,S=b||(0,g.tZ)(o.Z,{value:b,meta:(0,i.xZ)(e,"key")}),Z=b?void 0:"error";return(0,g.BX)(l.Z,{name:S,value:y,type:Z,children:[(0,g.tZ)(v,{tag:e,meta:(0,i.xZ)(e,"value"),streamPath:u,locationSearch:x,isRelease:w}),(0,p.CB)(y)&&(0,g.tZ)(a.Z,{href:y,className:"external-icon",children:(0,g.tZ)(c.V$,{size:"xs",css:f})}),w&&(0,g.tZ)("div",{className:"pill-icon",children:(0,g.tZ)(d.Z,{organization:r,projectSlug:h,releaseVersion:y,children:(0,g.tZ)(s.Link,{to:{pathname:"".concat(m).concat(y,"/"),search:x},children:(0,g.tZ)(c.aU,{size:"xs",css:f})})})})]})};x.displayName="EventTagsPill";const b=x},"./app/components/events/interfaces/spans/anchorLinkManager.tsx":(e,t,r)=>{r.d(t,{z:()=>a,$:()=>l});var s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js")),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=n.createContext({registerScrollFn:()=>()=>{},scrollToHash:()=>{}});class a extends n.Component{constructor(...e){super(...e),(0,s.Z)(this,"scrollFns",new Map),(0,s.Z)(this,"scrollToHash",(e=>{var t;null===(t=this.scrollFns.get(e))||void 0===t||t()})),(0,s.Z)(this,"registerScrollFn",((e,t)=>{this.scrollFns.set(e,t)}))}componentDidMount(){this.scrollToHash(location.hash)}render(){const e={registerScrollFn:this.registerScrollFn,scrollToHash:this.scrollToHash};return(0,o.tZ)(i.Provider,{value:e,children:this.props.children})}}a.displayName="Provider";const l=i.Consumer},"./app/components/events/interfaces/spans/constants.tsx":(e,t,r)=>{r.d(t,{DX:()=>s,rz:()=>n,bl:()=>o,h0:()=>i,ZR:()=>a,S5:()=>l});const s=120,n=4,o=s/n,i=20,a=s+i+20+1,l=18},"./app/components/events/interfaces/spans/cursorGuideHandler.tsx":(e,t,r)=>{r.d(t,{z:()=>l,$:()=>d});var s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js")),o=r("./app/components/performance/waterfall/utils.tsx"),i=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=n.createContext({showCursorGuide:!1,mouseLeft:void 0,traceViewMouseLeft:void 0,displayCursorGuide:()=>{},hideCursorGuide:()=>{}});class l extends n.Component{constructor(...e){super(...e),(0,s.Z)(this,"state",{showCursorGuide:!1,mouseLeft:void 0,traceViewMouseLeft:void 0}),(0,s.Z)(this,"hasInteractiveLayer",(()=>!!this.props.interactiveLayerRef.current)),(0,s.Z)(this,"displayCursorGuide",(e=>{if(!this.hasInteractiveLayer())return;const{trace:t,dragProps:r}=this.props,s=this.props.interactiveLayerRef.current,n=(0,o.FV)(s),i=t.traceEndTimestamp-t.traceStartTimestamp,a=r.viewWindowStart,l=r.viewWindowEnd,d=t.traceStartTimestamp+a*i,c=t.traceEndTimestamp-(1-l)*i-d,p=(0,o.uZ)((e-n.x)/n.width,0,1),h=p*Math.abs(t.traceEndTimestamp-t.traceStartTimestamp),u=(t.traceStartTimestamp+h-d)/c;this.setState({showCursorGuide:!0,mouseLeft:p,traceViewMouseLeft:u})})),(0,s.Z)(this,"hideCursorGuide",(()=>{this.hasInteractiveLayer()&&this.setState({showCursorGuide:!1,mouseLeft:void 0,traceViewMouseLeft:void 0})}))}render(){const e={showCursorGuide:this.state.showCursorGuide,mouseLeft:this.state.mouseLeft,traceViewMouseLeft:this.state.traceViewMouseLeft,displayCursorGuide:this.displayCursorGuide,hideCursorGuide:this.hideCursorGuide};return(0,i.tZ)(a.Provider,{value:e,children:this.props.children})}}l.displayName="Provider";const d=a.Consumer},"./app/components/events/interfaces/spans/header.tsx":(e,t,r)=>{r.d(t,{i:()=>ce,Z:()=>ue});var s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.array.reduce.js"),r("../node_modules/react/index.js")),i=(r("../node_modules/core-js/modules/es.symbol.description.js"),r("../node_modules/lodash/isFinite.js")),a=r.n(i),l=r("./app/components/charts/styles.tsx"),d=r("./app/components/events/interfaces/spans/utils.tsx"),c=r("./app/components/performance/waterfall/utils.tsx"),p=r("./app/components/questionTooltip.tsx"),h=r("./app/locale.tsx"),u=r("./app/styles/space.tsx"),m=r("./app/types/event.tsx"),g=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const v=Symbol("Other");class f extends o.Component{getTransactionEvent(){const{event:e}=this.props;if("transaction"===e.type)return e}generateStats(){var e,t;const{topN:r,operationNameFilters:s}=this.props,n=this.getTransactionEvent();if(!n)return[];const o=null==n||null===(e=n.contexts)||void 0===e?void 0:e.trace;if(!o)return[];const i=n.entries.find((e=>e.type===m.U.SPANS));let a=null!==(t=null==i?void 0:i.data)&&void 0!==t?t:[];const l={op:o.op,timestamp:n.endTimestamp,start_timestamp:n.startTimestamp,trace_id:o.trace_id||"",span_id:o.span_id||"",data:{}};a=a.length>0?a:[l],"active_filter"===s.type&&(a=[...a,l],a=a.filter((e=>{const t=(0,d.yk)(e);return!("string"==typeof t&&!s.operationNames.has(t))})));const c=a.reduce(((e,t)=>{let r=t.start_timestamp,s=t.timestamp;s<r&&(r=t.timestamp,s=t.start_timestamp);let n=t.op;"string"!=typeof n&&(n="unknown");const o=[r,s],i=e[n];return Array.isArray(i)?(i.push(o),e[n]=function(e){e.sort(((e,t)=>e[0]<t[0]?-1:t[0]<e[0]?1:0));const t=[];for(const r of e){if(0===t.length){t.push(r);continue}const e=t[t.length-1],s=e[1],[n,o]=r;s<n?t.push(r):e[1]=Math.max(s,o)}return t}(i),e):(e[n]=[o],e)}),{}),p=Object.entries(c).reduce(((e,[t,r])=>{const s=r.reduce(((e,[t,r])=>e+Math.abs(r-t)),0);return e[t]=s,e}),{}),h=Object.entries(p).sort(((e,t)=>{const r=e[1],s=t[1];return r===s?0:r<s?1:-1})),u=h.slice(0,r).map((([e,t])=>({name:e,percentage:0,totalInterval:t}))),g=h.slice(r).reduce(((e,[t,r])=>(e.totalInterval+=r,e)),{name:v,percentage:0,totalInterval:0});g.totalInterval>0&&u.push(g);const f=u.reduce(((e,t)=>e+t.totalInterval),0);return u.forEach((e=>{e.percentage=e.totalInterval/f})),u}render(){const{hideHeader:e}=this.props;if(!this.getTransactionEvent())return null;const t=this.generateStats().map((e=>{const{name:t,percentage:r,totalInterval:s}=e,n=t===v,o="string"==typeof t?t:(0,h.t)("Other"),i=Math.round(1e3*s*100)/100,l=a()(r)?Math.round(100*r):"âˆž",d=(0,c.hd)(o);return(0,g.BX)(y,{children:[(0,g.BX)(Z,{children:[(0,g.tZ)(w,{style:{backgroundColor:n?"transparent":d}}),(0,g.tZ)(j,{children:o})]}),(0,g.BX)(S,{children:[(0,g.BX)(C,{children:[i,"ms"]}),(0,g.BX)(_,{children:[l,"%"]})]})]},o)}));return e?(0,g.tZ)(b,{children:t}):(0,g.BX)(x,{children:[(0,g.BX)(l.OT,{children:[(0,h.t)("Operation Breakdown"),(0,g.tZ)(p.Z,{position:"top",size:"sm",containerDisplayMode:"block",title:(0,h.t)("Span durations are summed over the course of an entire transaction. Any overlapping spans are only counted once. Percentages are calculated by dividing the summed span durations by the total of all span durations.")})]}),t]})}}f.displayName="OpsBreakdown",(0,s.Z)(f,"defaultProps",{topN:4,hideHeader:!1});const x=(0,n.Z)("div",{target:"ebxobs98"})("font-size:",(e=>e.theme.fontSizeMedium),";margin-bottom:",(0,u.Z)(4),";"),b=(0,n.Z)("div",{target:"ebxobs97"})("font-size:",(e=>e.theme.fontSizeMedium),";margin:",(0,u.Z)(2)," ",(0,u.Z)(3),";"),y=(0,n.Z)("div",{target:"ebxobs96"})("display:flex;justify-content:space-between;margin-bottom:",(0,u.Z)(.5),";*+*{margin-left:",(0,u.Z)(.5),";}"),w=(0,n.Z)("div",{target:"ebxobs95"})("content:'';display:block;width:8px;min-width:8px;height:8px;margin-right:",(0,u.Z)(1),";border-radius:100%;"),S=(0,n.Z)("div",{target:"ebxobs94"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),Z=(0,n.Z)(S,{target:"ebxobs93"})({name:"d3v9zr",styles:"overflow:hidden"}),j=(0,n.Z)("div",{target:"ebxobs92"})({name:"l8l8b8",styles:"white-space:nowrap;overflow:hidden;text-overflow:ellipsis"}),C=(0,n.Z)("div",{target:"ebxobs91"})("color:",(e=>e.theme.gray300),";"),_=(0,n.Z)("div",{target:"ebxobs90"})({name:"myuf92",styles:"min-width:40px;text-align:right"}),D=f;var M=r("./app/components/performance/waterfall/miniHeader.tsx"),k=r("./app/stores/configStore.tsx"),L=r("./app/components/events/interfaces/spans/constants.tsx"),T=r("./app/components/events/interfaces/spans/cursorGuideHandler.tsx"),B=r("./app/components/events/interfaces/spans/dividerHandlerManager.tsx"),I=r("./app/components/tooltip.tsx"),P=r("./app/utils.tsx"),R=r("./app/utils/performance/vitals/constants.tsx");class E extends o.PureComponent{render(){const{event:e,generateBounds:t,dividerPosition:r}=this.props,s=(0,d.is)(e);return(0,g.tZ)(X,{style:{width:"calc(".concat((0,c.yI)(1-r)," - 0.5px)")},children:Array.from(s).map((([e,r])=>{const s=(0,d.vu)(e,t);if(!(0,P.ri)(s.left)||!(0,P.ri)(s.width)||!s.isSpanVisibleInView)return null;const n=Object.keys(r.marks).map((e=>R.r["measurements.".concat(e)])),o=n.map((e=>e.acronym)),i=o.pop(),a=o.length?"".concat(o.join(", ")," & ").concat(i):i,l=n.map((e=>e.name)),p=l.pop(),h=l.length?"".concat(l.join(", ")," & ").concat(p):p;return(0,g.tZ)(z,{failedThreshold:r.failedThreshold,label:a,tooltipLabel:h,left:(0,c.yI)(s.left||0)},String(e))}))})}}E.displayName="MeasurementsPanel";const X=(0,n.Z)("div",{target:"ebsav3l2"})({name:"1ite3ux",styles:"position:relative;overflow:hidden;height:20px"}),N=(0,n.Z)("div",{target:"ebsav3l1"})({name:"snm0j3",styles:"position:absolute;top:0;height:100%;user-select:none;white-space:nowrap"}),G=(0,n.Z)("div",{target:"ebsav3l0"})("transform:translateX(-50%);font-size:",(e=>e.theme.fontSizeExtraSmall),";font-weight:600;",(e=>e.failedThreshold?"color: ".concat(e.theme.red300,";"):null),";"),W=E;class z extends o.Component{constructor(...e){super(...e),(0,s.Z)(this,"state",{width:1}),(0,s.Z)(this,"elementDOMRef",(0,o.createRef)())}componentDidMount(){const{current:e}=this.elementDOMRef;e&&this.setState({width:e.clientWidth})}render(){const{left:e,label:t,tooltipLabel:r,failedThreshold:s}=this.props;return(0,g.tZ)(N,{ref:this.elementDOMRef,style:{left:"clamp(calc(0.5 * ".concat(this.state.width,"px), ").concat(e,", calc(100% - 0.5 * ").concat(this.state.width,"px))")},children:(0,g.tZ)(G,{failedThreshold:s,children:(0,g.tZ)(I.Z,{title:r,position:"top",containerDisplayMode:"inline-block",children:t})})})}}z.displayName="LabelContainer";var A=r("./app/components/events/interfaces/spans/scrollbarManager.tsx"),H=r("./app/components/events/interfaces/spans/types.tsx");class V extends o.Component{constructor(...e){super(...e),(0,s.Z)(this,"state",{minimapWidth:void 0})}componentDidMount(){this.fetchMinimapWidth()}componentDidUpdate(){this.fetchMinimapWidth()}fetchMinimapWidth(){const{minimapInteractiveRef:e}=this.props;if(e.current){const t=e.current.getBoundingClientRect().width;t!==this.state.minimapWidth&&this.setState({minimapWidth:t})}}renderCursorGuide({cursorGuideHeight:e,showCursorGuide:t,mouseLeft:r}){return t&&r?(0,g.tZ)(ae,{style:{left:(0,c.yI)(r),height:"".concat(e,"px")}}):null}renderViewHandles({isDragging:e,onLeftHandleDragStart:t,leftHandlePosition:r,onRightHandleDragStart:s,rightHandlePosition:n,viewWindowStart:i,viewWindowEnd:a}){const l=e?(0,g.tZ)(le,{left:i,onMouseDown:()=>{},isDragging:!1}):null,d=(0,g.tZ)(le,{left:r,onMouseDown:t,isDragging:e}),c=(0,g.tZ)(le,{left:n,onMouseDown:s,isDragging:e}),p=e?(0,g.tZ)(le,{left:a,onMouseDown:()=>{},isDragging:!1}):null;return(0,g.BX)(o.Fragment,{children:[l,p,d,c]})}renderFog(e){return(0,g.BX)(o.Fragment,{children:[(0,g.tZ)(ne,{style:{height:"100%",width:(0,c.yI)(e.viewWindowStart)}}),(0,g.tZ)(ne,{style:{height:"100%",width:(0,c.yI)(1-e.viewWindowEnd),left:(0,c.yI)(e.viewWindowEnd)}})]})}renderDurationGuide({showCursorGuide:e,mouseLeft:t}){if(!e||!t)return null;const r=this.props.minimapInteractiveRef.current;if(!r)return null;const s=(0,c.FV)(r),{trace:n}=this.props,o=t*Math.abs(n.traceEndTimestamp-n.traceStartTimestamp),i={top:0,left:"calc(".concat(100*t,"% + 4px)")},a=(1-t)*s.width<=100;return(0,g.tZ)(Y,{style:i,alignLeft:a,children:(0,g.tZ)("span",{children:(0,c.bQ)(o)})})}renderTicks(){const{trace:e}=this.props,{minimapWidth:t}=this.state,r=Math.abs(e.traceEndTimestamp-e.traceStartTimestamp);let s=5;if(t&&(t<=350&&(s=4),t<=280&&(s=3),t<=160&&(s=2),t<=130&&(s=1)),1===s)return(0,g.tZ)(q,{duration:.5*r,style:{left:(0,c.yI)(.5)}},"1");const n=1/(s-1),o=[];for(let e=0;e<s;e++){if(0===e){o.push((0,g.tZ)(q,{align:H.t.Left,hideTickMarker:!0,duration:0,style:{left:(0,u.Z)(1)}},"first"));continue}if(e===s-1){o.push((0,g.tZ)(q,{duration:r,align:H.t.Right,hideTickMarker:!0,style:{right:(0,u.Z)(1)}},"last"));continue}const t=n*e;o.push((0,g.tZ)(q,{duration:r*t,style:{left:(0,c.yI)(t)}},String(e)))}return o}renderTimeAxis({showCursorGuide:e,mouseLeft:t}){return(0,g.BX)(O,{children:[this.renderTicks(),this.renderCursorGuide({showCursorGuide:e,mouseLeft:t,cursorGuideHeight:L.h0}),this.renderDurationGuide({showCursorGuide:e,mouseLeft:t})]})}renderWindowSelection(e){if(!e.isWindowSelectionDragging)return null;const t=Math.min(e.windowSelectionInitial,e.windowSelectionCurrent);return(0,g.tZ)(de,{style:{left:(0,c.yI)(t),width:(0,c.yI)(e.windowSelectionSize)}})}generateBounds(){const{dragProps:e,trace:t}=this.props;return(0,d.IG)({traceStartTimestamp:t.traceStartTimestamp,traceEndTimestamp:t.traceEndTimestamp,viewStart:e.viewWindowStart,viewEnd:e.viewWindowEnd})}renderSecondaryHeader(){var e;const{event:t}=this.props,r=Object.keys(null!==(e=t.measurements)&&void 0!==e?e:{}).length>0;return(0,g.tZ)(B.$,{children:e=>{const{dividerPosition:s}=e;return(0,g.BX)(ce,{children:[(0,g.tZ)(A.$6,{children:({virtualScrollbarRef:e,scrollBarAreaRef:t,onDragStart:r,onScroll:n})=>(0,g.BX)(M.cs,{ref:this.props.virtualScrollBarContainerRef,style:{width:"calc(".concat((0,c.yI)(s)," - 0.5px)")},onScroll:n,children:[(0,g.tZ)("div",{style:{width:0,height:"1px"},ref:t}),(0,g.tZ)(M.Qk,{"data-type":"virtual-scrollbar",ref:e,onMouseDown:r,children:(0,g.tZ)(M.v6,{})})]})}),(0,g.tZ)(M._i,{}),r?(0,g.tZ)(W,{event:t,generateBounds:this.generateBounds(),dividerPosition:s}):null]})}})}render(){return(0,g.tZ)(J,{children:(0,g.tZ)(B.$,{children:e=>{const{dividerPosition:t}=e;return(0,g.BX)(o.Fragment,{children:[(0,g.tZ)(pe,{style:{width:"calc(".concat((0,c.yI)(t)," - 0.5px)")},children:this.props.event&&(0,g.tZ)(D,{operationNameFilters:this.props.operationNameFilters,event:this.props.event,topN:3,hideHeader:!0})}),(0,g.tZ)(M._i,{style:{position:"absolute",top:0,left:"calc(".concat((0,c.yI)(t)," - 0.5px)"),height:"".concat(L.DX+L.h0,"px")}}),(0,g.tZ)(F,{trace:this.props.trace,dividerPosition:t}),(0,g.tZ)(T.$,{children:({displayCursorGuide:e,hideCursorGuide:r,mouseLeft:s,showCursorGuide:n})=>(0,g.BX)(he,{ref:this.props.minimapInteractiveRef,style:{width:"calc(".concat((0,c.yI)(1-t)," - 0.5px)"),left:"calc(".concat((0,c.yI)(t)," + 0.5px)")},onMouseEnter:t=>{e(t.pageX)},onMouseLeave:()=>{r()},onMouseMove:t=>{e(t.pageX)},onMouseDown:e=>{const t=e.target;t instanceof Element&&t.getAttribute&&t.getAttribute("data-ignore")||this.props.dragProps.onWindowSelectionDragStart(e)},children:[(0,g.BX)(ee,{children:[this.renderFog(this.props.dragProps),this.renderCursorGuide({showCursorGuide:n,mouseLeft:s,cursorGuideHeight:L.DX}),this.renderViewHandles(this.props.dragProps),this.renderWindowSelection(this.props.dragProps)]}),this.renderTimeAxis({showCursorGuide:n,mouseLeft:s})]})}),this.renderSecondaryHeader()]})}})})}}V.displayName="TraceViewHeader";class F extends o.PureComponent{renderRootSpan(){const{trace:e}=this.props,t=(0,d.IG)({traceStartTimestamp:e.traceStartTimestamp,traceEndTimestamp:e.traceEndTimestamp,viewStart:0,viewEnd:1}),r={trace_id:e.traceID,span_id:e.rootSpanID,start_timestamp:e.traceStartTimestamp,timestamp:e.traceEndTimestamp,op:e.op,data:{}};return this.renderSpan({spanNumber:0,generateBounds:t,span:r,childSpans:e.childSpans}).spanTree}getBounds(e){switch(e.type){case"TRACE_TIMESTAMPS_EQUAL":case"INVALID_VIEW_WINDOW":return{left:(0,c.yI)(0),width:"0px"};case"TIMESTAMPS_EQUAL":return{left:(0,c.yI)(e.start),width:"".concat(e.width,"px")};case"TIMESTAMPS_REVERSED":case"TIMESTAMPS_STABLE":return{left:(0,c.yI)(e.start),width:(0,c.yI)(e.end-e.start)};default:return e}}renderSpan({spanNumber:e,childSpans:t,generateBounds:r,span:s}){var n,i;const a=(0,c.hd)((0,d.yk)(s)),l=r({startTimestamp:s.start_timestamp,endTimestamp:s.timestamp}),{left:p,width:h}=this.getBounds(l),u=null!==(n=null===(i=t)||void 0===i?void 0:i[(0,d.Rr)(s)])&&void 0!==n?n:[];delete(t={...t})[(0,d.Rr)(s)];const m=u.reduce(((e,s,n)=>{const i="".concat((0,d.Rr)(s,String(n))),a=this.renderSpan({spanNumber:e.nextSpanNumber,childSpans:t,generateBounds:r,span:s});return e.renderedSpanChildren.push((0,g.tZ)(o.Fragment,{children:a.spanTree},i)),e.nextSpanNumber=a.nextSpanNumber,e}),{renderedSpanChildren:[],nextSpanNumber:e+1});return{nextSpanNumber:m.nextSpanNumber,spanTree:(0,g.BX)(o.Fragment,{children:[(0,g.tZ)(oe,{style:{backgroundColor:a,left:p,width:h}}),m.renderedSpanChildren]})}}render(){const{dividerPosition:e}=this.props;return(0,g.tZ)(K,{style:{width:"calc(".concat((0,c.yI)(1-e)," - 0.5px)"),left:"calc(".concat((0,c.yI)(e)," + 0.5px)")},children:(0,g.tZ)(ie,{id:"minimap-background-slider",children:this.renderRootSpan()})})}}F.displayName="ActualMinimap";const O=(0,n.Z)("div",{target:"e1jbvrxt18"})("width:100%;position:absolute;left:0;top:",L.DX,"px;border-top:1px solid ",(e=>e.theme.border),";height:",L.h0,"px;background-color:",(e=>e.theme.background),";color:",(e=>e.theme.gray300),";font-size:10px;font-weight:500;overflow:hidden;"),U=(0,n.Z)("div",{target:"e1jbvrxt17"})("height:",L.h0,"px;position:absolute;top:0;display:flex;align-items:center;user-select:none;"),$=(0,n.Z)("span",{target:"e1jbvrxt16"})("position:absolute;line-height:1;white-space:nowrap;",(({align:e})=>{switch(e){case H.t.Center:return"transform: translateX(-50%)";case H.t.Left:return null;case H.t.Right:return"transform: translateX(-100%)";default:throw Error("Invalid tick alignment: ".concat(e))}}),";"),Q=(0,n.Z)("div",{target:"e1jbvrxt15"})("width:1px;height:4px;background-color:",(e=>e.theme.gray200),";position:absolute;top:0;left:0;transform:translateX(-50%);"),q=e=>{const{style:t,duration:r,hideTickMarker:s=!1,align:n=H.t.Center}=e;return(0,g.BX)(U,{style:t,children:[s?null:(0,g.tZ)(Q,{}),(0,g.tZ)($,{align:n,children:(0,c.bQ)(r)})]})};q.displayName="TickLabel";const Y=(0,n.Z)("div",{target:"e1jbvrxt14"})("position:absolute;background-color:",(e=>e.theme.background),";padding:4px;height:100%;border-radius:3px;border:1px solid rgba(0, 0, 0, 0.1);line-height:1;white-space:nowrap;",(({alignLeft:e})=>e?"transform: translateX(-100%) translateX(-8px);":null),";"),J=(0,n.Z)("div",{target:"e1jbvrxt13"})("width:100%;position:sticky;left:0;top:",(e=>k.Z.get("demoMode")?e.theme.demo.headerSize:0),";z-index:",(e=>e.theme.zIndex.traceView.minimapContainer),";background-color:",(e=>e.theme.background),";border-bottom:1px solid ",(e=>e.theme.border),";height:",L.ZR,"px;border-top-left-radius:",(e=>e.theme.borderRadius),";border-top-right-radius:",(e=>e.theme.borderRadius),";"),K=(0,n.Z)("div",{target:"e1jbvrxt12"})("height:",L.DX,"px;max-height:",L.DX,"px;overflow:hidden;position:absolute;top:0;"),ee=(0,n.Z)("div",{target:"e1jbvrxt11"})("height:",L.DX,"px;width:100%;position:relative;left:0;"),te=(0,n.Z)("div",{target:"e1jbvrxt10"})("position:absolute;top:0;height:",L.DX,"px;"),re=(0,n.Z)("div",{target:"e1jbvrxt9"})("height:",L.DX-L.S5,"px;width:2px;background-color:",(e=>e.theme.textColor),";"),se=(0,n.Z)("div",{target:"e1jbvrxt8"})("position:absolute;background-color:",(e=>e.theme.textColor),";cursor:col-resize;width:8px;height:",L.S5,"px;bottom:0;left:-3px;"),ne=(0,n.Z)("div",{target:"e1jbvrxt7"})("background-color:",(e=>e.theme.textColor),";opacity:0.1;position:absolute;top:0;"),oe=(0,n.Z)("div",{target:"e1jbvrxt6"})({name:"11gdjgd",styles:"position:relative;height:2px;min-height:2px;max-height:2px;margin:2px 0;min-width:1px;border-radius:1px"}),ie=(0,n.Z)("div",{target:"e1jbvrxt5"})({name:"bjn8wh",styles:"position:relative"}),ae=(0,n.Z)("div",{target:"e1jbvrxt4"})("position:absolute;top:0;width:1px;background-color:",(e=>e.theme.red300),";transform:translateX(-50%);"),le=({left:e,onMouseDown:t,isDragging:r})=>(0,g.BX)(te,{style:{left:(0,c.yI)(e)},children:[(0,g.tZ)(re,{}),(0,g.tZ)(se,{"data-ignore":"true",onMouseDown:t,isDragging:r,style:{height:"".concat(L.S5,"px")}})]});le.displayName="Handle";const de=(0,n.Z)("div",{target:"e1jbvrxt3"})("position:absolute;top:0;height:",L.DX,"px;background-color:",(e=>e.theme.textColor),";opacity:0.1;"),ce=(0,n.Z)("div",{target:"e1jbvrxt2"})("position:absolute;top:",L.DX+L.h0,"px;left:0;height:",L.h0,"px;width:100%;background-color:",(e=>e.theme.backgroundSecondary),";display:flex;border-top:1px solid ",(e=>e.theme.border),";overflow:hidden;"),pe=(0,n.Z)("div",{target:"e1jbvrxt1"})("height:",L.DX+L.h0,"px;position:absolute;left:0;top:0;overflow:hidden;"),he=(0,n.Z)("div",{target:"e1jbvrxt0"})("height:",L.DX+L.h0,"px;position:absolute;top:0;"),ue=V},"./app/components/events/interfaces/spans/scrollbarManager.tsx":(e,t,r)=>{r.d(t,{zt:()=>h,$6:()=>u,Iw:()=>m});var s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.array.reduce.js"),r("../node_modules/react/index.js")),o=r("./app/components/performance/waterfall/utils.tsx"),i=r("./app/utils/getDisplayName.tsx"),a=r("./app/utils/userselect.tsx"),l=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const d=n.createContext({generateContentSpanBarRef:()=>()=>{},virtualScrollbarRef:n.createRef(),scrollBarAreaRef:n.createRef(),onDragStart:()=>{},onScroll:()=>{},updateScrollState:()=>{}}),c=(e,t)=>{e instanceof Set?e.forEach((e=>{document.body.contains(e)&&t(e)})):e.current&&t(e.current)},p=(e,t,r)=>e+r*(t-e);class h extends n.Component{constructor(...e){super(...e),(0,s.Z)(this,"state",{maxContentWidth:void 0}),(0,s.Z)(this,"contentSpanBar",new Set),(0,s.Z)(this,"virtualScrollbar",n.createRef()),(0,s.Z)(this,"scrollBarArea",n.createRef()),(0,s.Z)(this,"isDragging",!1),(0,s.Z)(this,"previousUserSelect",null),(0,s.Z)(this,"initializeScrollState",(()=>{if(0===this.contentSpanBar.size||!this.hasInteractiveLayer())return;c(this.contentSpanBar,(e=>{e.style.removeProperty("width"),e.style.removeProperty("max-width"),e.style.removeProperty("overflow"),e.style.removeProperty("transform")}));const e=Array.from(this.contentSpanBar).reduce(((e,t)=>{const r=null===t.offsetParent;if(!document.body.contains(t)||r)return e;const s=t.scrollWidth;return s>e?s:e}),0);c(this.contentSpanBar,(t=>{t.style.width="".concat(e,"px"),t.style.maxWidth="".concat(e,"px"),t.style.overflow="hidden"})),c(this.scrollBarArea,(t=>{t.style.width="".concat(e,"px"),t.style.maxWidth="".concat(e,"px")})),c(this.props.interactiveLayerRef,(e=>{e.scrollLeft=0}));const t=this.getReferenceSpanBar();t&&this.syncVirtualScrollbar(t)})),(0,s.Z)(this,"syncVirtualScrollbar",(e=>{if(!this.virtualScrollbar.current||!this.hasInteractiveLayer())return;const t=this.virtualScrollbar.current,r=e.getBoundingClientRect().width;if(void 0===r||r<=0)return void(t.style.width="0");const s=this.props.interactiveLayerRef.current.getBoundingClientRect().width,n=s/(s+(r-s));n>=1?t.style.width="0":(t.style.width="max(50px, ".concat((0,o.yI)(n),")"),t.style.removeProperty("transform"))})),(0,s.Z)(this,"generateContentSpanBarRef",(()=>{let e=null;return t=>{e&&(this.contentSpanBar.delete(e),e=null),t&&(this.contentSpanBar.add(t),e=t)}})),(0,s.Z)(this,"hasInteractiveLayer",(()=>!!this.props.interactiveLayerRef.current)),(0,s.Z)(this,"initialMouseClickX",void 0),(0,s.Z)(this,"onScroll",(()=>{if(this.isDragging||!this.hasInteractiveLayer())return;const e=this.props.interactiveLayerRef.current,t=e.getBoundingClientRect(),r=e.scrollLeft;c(this.scrollBarArea,(e=>{c(this.virtualScrollbar,(s=>{const n=e.getBoundingClientRect(),i=r/n.width,a=1-(0,o.FV)(s).width/t.width,l=(0,o.uZ)(i,0,a)*t.width;s.style.transform="translate3d(".concat(l,"px, 0, 0)"),s.style.transformOrigin="left"}))})),c(this.contentSpanBar,(e=>{const t=-r;e.style.transform="translate3d(".concat(t,"px, 0, 0)"),e.style.transformOrigin="left"}))})),(0,s.Z)(this,"onDragStart",(e=>{if(this.isDragging||"mousedown"!==e.type||!this.hasInteractiveLayer()||!this.virtualScrollbar.current)return;e.stopPropagation();const t=(0,o.FV)(this.virtualScrollbar.current);this.initialMouseClickX=Math.abs(e.clientX-t.x),this.previousUserSelect=(0,a.l)({userSelect:"none",MozUserSelect:"none",msUserSelect:"none",webkitUserSelect:"none"}),window.addEventListener("mousemove",this.onDragMove),window.addEventListener("mouseup",this.onDragEnd),this.isDragging=!0,c(this.virtualScrollbar,(e=>{e.classList.add("dragging"),document.body.style.setProperty("cursor","grabbing","important")}))})),(0,s.Z)(this,"onDragMove",(e=>{if(!this.isDragging||"mousemove"!==e.type||!this.hasInteractiveLayer()||!this.virtualScrollbar.current||void 0===this.initialMouseClickX)return;const t=this.virtualScrollbar.current,r=this.props.interactiveLayerRef.current.getBoundingClientRect(),s=(0,o.FV)(t),n=(e.pageX-r.x-this.initialMouseClickX)/r.width,i=1-s.width/r.width,a=(0,o.uZ)(n,0,1),l=(0,o.uZ)(a,0,i)*r.width;t.style.transform="translate3d(".concat(l,"px, 0, 0)"),t.style.transformOrigin="left";const d=(0,o.uZ)(n/i,0,1);c(this.contentSpanBar,(e=>{const t=e.getBoundingClientRect().width-r.width,s=-p(0,t,d);e.style.transform="translate3d(".concat(s,"px, 0, 0)"),e.style.transformOrigin="left"})),c(this.props.interactiveLayerRef,(e=>{c(this.scrollBarArea,(t=>{const s=t.getBoundingClientRect().width-r.width,n=p(0,s,d);e.scrollLeft=n}))}))})),(0,s.Z)(this,"onDragEnd",(e=>{this.isDragging&&"mouseup"===e.type&&this.hasInteractiveLayer()&&(this.cleanUpListeners(),this.previousUserSelect&&((0,a.l)(this.previousUserSelect),this.previousUserSelect=null),this.isDragging=!1,c(this.virtualScrollbar,(e=>{e.classList.remove("dragging"),document.body.style.removeProperty("cursor")})))})),(0,s.Z)(this,"cleanUpListeners",(()=>{this.isDragging&&(window.removeEventListener("mousemove",this.onDragMove),window.removeEventListener("mouseup",this.onDragEnd))}))}componentDidMount(){this.initializeScrollState()}componentDidUpdate(e){const t=this.props.dividerPosition!==e.dividerPosition,r=e.dragProps&&this.props.dragProps&&(e.dragProps.viewWindowStart!==this.props.dragProps.viewWindowStart||e.dragProps.viewWindowEnd!==this.props.dragProps.viewWindowEnd);(t||r)&&this.initializeScrollState()}componentWillUnmount(){this.cleanUpListeners()}getReferenceSpanBar(){for(const e of this.contentSpanBar){const t=null===e.offsetParent;if(document.body.contains(e)&&!t)return e}}render(){const e={generateContentSpanBarRef:this.generateContentSpanBarRef,onDragStart:this.onDragStart,onScroll:this.onScroll,virtualScrollbarRef:this.virtualScrollbar,scrollBarAreaRef:this.scrollBarArea,updateScrollState:this.initializeScrollState};return(0,l.tZ)(d.Provider,{value:e,children:this.props.children})}}h.displayName="Provider";const u=d.Consumer,m=e=>{var t,r;return r=t=class extends n.Component{render(){return(0,l.tZ)(d.Consumer,{children:t=>{const r={...this.props,...t};return(0,l.tZ)(e,{...r})}})}},(0,s.Z)(t,"displayName","withScrollbarManager(".concat((0,i.Z)(e),")")),r}},"./app/components/performance/waterfall/messageRow.tsx":(e,t,r)=>{r.d(t,{V:()=>a});var s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=r("./app/components/performance/waterfall/constants.tsx"),o=r("./app/components/performance/waterfall/row.tsx"),i=r("./app/styles/space.tsx");const a=(0,s.Z)(o.X2,{target:"e1khbnog0"})("display:block;cursor:auto;line-height:",n.d,"px;padding-left:",(0,i.Z)(1),";padding-right:",(0,i.Z)(1),";color:",(e=>e.theme.gray300),";background-color:",(e=>e.theme.backgroundSecondary),";outline:1px solid ",(e=>e.theme.border),";font-size:",(e=>e.theme.fontSizeSmall),";z-index:",(e=>e.theme.zIndex.traceView.rowInfoMessage),";>*+*{margin-left:",(0,i.Z)(2),";}")},"./app/components/performance/waterfall/miniHeader.tsx":(e,t,r)=>{r.d(t,{_i:()=>n,cs:()=>o,Qk:()=>i,v6:()=>a});var s=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");const n=(0,s.Z)("div",{target:"e1663mch3"})("width:1px;background-color:",(e=>e.theme.border),";"),o=(0,s.Z)("div",{target:"e1663mch2"})("display:block;width:100%;height:",70,"px;&>div[data-type='virtual-scrollbar'].dragging>div{background-color:",(e=>e.theme.textColor),";opacity:0.8;cursor:grabbing;}overflow-x:scroll;"),i=(0,s.Z)("div",{target:"e1663mch1"})("height:8px;width:0;padding-left:4px;padding-right:4px;position:sticky;top:",6,"px;left:0;cursor:grab;"),a=(0,s.Z)("div",{target:"e1663mch0"})("height:8px;width:100%;border-radius:20px;transition:background-color 150ms ease;background-color:",(e=>e.theme.textColor),";opacity:0.5;")},"./app/utils/createFuzzySearch.tsx":(e,t,r)=>{r.d(t,{I:()=>n}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var s=r("./app/constants/index.tsx");async function n(e,t){if(!t.keys)throw new Error("You need to define `options.keys`");const{default:n}=await r.e("node_modules_fuse_js_dist_fuse_js").then(r.t.bind(r,"../node_modules/fuse.js/dist/fuse.js",23));return new n(e,{...s.UT,...t})}}}]);
//# sourceMappingURL=../sourcemaps/app_components_events_eventTags_eventTagsPill_tsx-app_components_events_interfaces_spans_anch-b62b10.e4e6b45fa25012bf6a8fb143ea8aede3.js.map