"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_organizationGroupDetails_groupActivity_tsx"],{"./app/components/commitLink.tsx":(e,t,s)=>{s.d(t,{Z:()=>d}),s("../node_modules/react/index.js");var r=s("./app/components/button.tsx"),i=s("./app/components/links/externalLink.tsx"),n=s("./app/icons/index.tsx"),o=s("./app/locale.tsx"),a=s("./app/utils.tsx"),c=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const u=[{icon:(0,c.tZ)(n.Uv,{size:"xs"}),providerIds:["github","integrations:github","integrations:github_enterprise"],commitUrl:({baseUrl:e,commitId:t})=>"".concat(e,"/commit/").concat(t)},{icon:(0,c.tZ)(n.Ub,{size:"xs"}),providerIds:["bitbucket","integrations:bitbucket"],commitUrl:({baseUrl:e,commitId:t})=>"".concat(e,"/commits/").concat(t)},{icon:(0,c.tZ)(n.mT,{size:"xs"}),providerIds:["visualstudio","integrations:vsts"],commitUrl:({baseUrl:e,commitId:t})=>"".concat(e,"/commit/").concat(t)},{icon:(0,c.tZ)(n.Et,{size:"xs"}),providerIds:["gitlab","integrations:gitlab"],commitUrl:({baseUrl:e,commitId:t})=>"".concat(e,"/commit/").concat(t)}],d=function({inline:e,commitId:t,repository:s}){if(!t||!s)return(0,c.tZ)("span",{children:(0,o.t)("Unknown Commit")});const n=(0,a.e4)(t),d=u.find((e=>!!s.provider&&e.providerIds.includes(s.provider.id)));if(void 0===d)return(0,c.tZ)("span",{children:n});const p=s.url&&d.commitUrl({commitId:t,baseUrl:s.url});return e?(0,c.BX)(i.Z,{className:"inline-commit",href:p,children:[d.icon," "+n]}):(0,c.tZ)(r.ZP,{external:!0,href:p,size:"small",icon:d.icon,children:n})}},"./app/components/pullRequestLink.tsx":(e,t,s)=>{s.d(t,{Z:()=>a});var r=s("./app/components/links/externalLink.tsx"),i=s("./app/icons/index.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(e){if(!e.provider)return null;const{id:t}=e.provider;switch(t.includes(":")?t.split(":").pop():t){case"github":return(0,n.tZ)(i.Uv,{size:"xs"});case"gitlab":return(0,n.tZ)(i.Et,{size:"xs"});case"bitbucket":return(0,n.tZ)(i.Ub,{size:"xs"});default:return null}}const a=({pullRequest:e,repository:t,inline:s})=>{const i="".concat(t.name," #").concat(e.id,": ").concat(e.title);return e.externalUrl?(0,n.BX)(r.Z,{className:s?"inline-commit":"btn btn-default btn-sm",href:e.externalUrl,children:[o(t),s?"":" ",i]}):(0,n.tZ)("span",{children:i})}},"./app/components/reprocessedBox.tsx":(e,t,s)=>{s.d(t,{Z:()=>h});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),o=s("./app/components/events/styles.tsx"),a=s("./app/components/links/link.tsx"),c=s("./app/icons/index.tsx"),u=s("./app/locale.tsx"),d=s("./app/styles/space.tsx"),p=s("./app/utils/localStorage.tsx"),l=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class m extends n.Component{constructor(...e){super(...e),(0,r.Z)(this,"state",{isBannerHidden:"true"===p.Z.getItem(this.getBannerUniqueId())}),(0,r.Z)(this,"handleBannerDismiss",(()=>{p.Z.setItem(this.getBannerUniqueId(),"true"),this.setState({isBannerHidden:!0})}))}getBannerUniqueId(){const{reprocessActivity:e}=this.props,{id:t}=e;return"reprocessed-activity-".concat(t,"-banner-dismissed")}renderMessage(){const{orgSlug:e,reprocessActivity:t,groupCount:s,groupId:r}=this.props,{data:i}=t,{eventCount:n,oldGroupId:o,newGroupId:c}=i,d="/organizations/".concat(e,"/issues/?query=reprocessing.original_issue_id:").concat(o);return 0===s?(0,u._N)("All events in this issue were moved during reprocessing. [link]",{link:(0,l.tZ)(a.Z,{to:d,children:(0,u.tn)("See %s new event","See %s new events",n)})}):(0,u._N)("Events in this issue were successfully reprocessed. [link]",{link:(0,l.tZ)(a.Z,{to:d,children:c===Number(r)?(0,u.tn)("See %s reprocessed event","See %s reprocessed events",n):(0,u.tn)("See %s new event","See %s new events",n)})})}render(){const{isBannerHidden:e}=this.state;if(e)return null;const{className:t}=this.props;return(0,l.tZ)(o.UP,{priority:"success",className:t,children:(0,l.BX)(g,{children:[(0,l.tZ)(c.DL,{color:"green300",isCircled:!0}),(0,l.tZ)("span",{children:this.renderMessage()}),(0,l.tZ)(v,{color:"green300","aria-label":(0,u.t)("Dismiss"),isCircled:!0,onClick:this.handleBannerDismiss})]})})}}m.displayName="ReprocessedBox";const h=m,g=(0,i.Z)(o._B,{target:"e17keqf51"})("&>svg:last-child{margin-right:0;margin-left:",(0,d.Z)(1),";}"),v=(0,i.Z)(c.bM,{target:"e17keqf50"})({name:"e0dnmk",styles:"cursor:pointer"})},"./app/views/organizationGroupDetails/groupActivity.tsx":(e,t,s)=>{s.r(t),s.d(t,{GroupActivity:()=>D,default:()=>T});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),o=s("./app/actionCreators/group.tsx"),a=s("./app/actionCreators/indicator.tsx"),c=s("./app/components/activity/author.tsx"),u=s("./app/components/activity/item/index.tsx"),d=s("./app/components/activity/note/index.tsx"),p=s("./app/components/activity/note/inputWithStorage.tsx"),l=s("./app/components/errorBoundary.tsx"),m=s("./app/components/reprocessedBox.tsx"),h=s("./app/constants/index.tsx"),g=s("./app/locale.tsx"),v=s("./app/stores/configStore.tsx"),Z=s("./app/styles/space.tsx"),_=s("./app/types/index.tsx"),x=s("./app/utils/guid.tsx"),N=s("./app/utils/withApi.tsx"),E=s("./app/utils/withOrganization.tsx"),S=s("./app/components/commitLink.tsx"),f=s("./app/components/duration.tsx"),y=s("./app/components/links/externalLink.tsx"),I=s("./app/components/links/link.tsx"),b=s("./app/components/pullRequestLink.tsx"),w=s("./app/components/version.tsx"),k=s("./app/stores/memberListStore.tsx"),U=s("./app/stores/teamStore.tsx"),R=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function C({activity:e,orgSlug:t,projectId:s,author:r}){const i="/organizations/".concat(t,"/issues/");return(0,R.tZ)(n.Fragment,{children:function(){switch(e.type){case _.fc.NOTE:return(0,g._N)("[author] left a comment",{author:r});case _.fc.SET_RESOLVED:return(0,g._N)("[author] marked this issue as resolved",{author:r});case _.fc.SET_RESOLVED_BY_AGE:return(0,g._N)("[author] marked this issue as resolved due to inactivity",{author:r});case _.fc.SET_RESOLVED_IN_RELEASE:const{current_release_version:n,version:o}=e.data;return n?(0,g._N)("[author] marked this issue as resolved in releases greater than [version]",{author:r,version:(0,R.tZ)(w.Z,{version:n,projectId:s,tooltipRawVersion:!0})}):o?(0,g._N)("[author] marked this issue as resolved in [version]",{author:r,version:(0,R.tZ)(w.Z,{version:o,projectId:s,tooltipRawVersion:!0})}):(0,g._N)("[author] marked this issue as resolved in the upcoming release",{author:r});case _.fc.SET_RESOLVED_IN_COMMIT:return(0,g._N)("[author] marked this issue as resolved in [version]",{author:r,version:(0,R.tZ)(S.Z,{inline:!0,commitId:e.data.commit.id,repository:e.data.commit.repository})});case _.fc.SET_RESOLVED_IN_PULL_REQUEST:{const{data:t}=e,{pullRequest:s}=t;return(0,g._N)("[author] marked this issue as resolved in [version]",{author:r,version:(0,R.tZ)(b.Z,{inline:!0,pullRequest:s,repository:s.repository})})}case _.fc.SET_UNRESOLVED:return(0,g._N)("[author] marked this issue as unresolved",{author:r});case _.fc.SET_IGNORED:{const{data:t}=e;return function(e){return e.ignoreDuration?(0,g._N)("[author] ignored this issue for [duration]",{author:r,duration:(0,R.tZ)(f.Z,{seconds:60*e.ignoreDuration})}):e.ignoreCount&&e.ignoreWindow?(0,g._N)("[author] ignored this issue until it happens [count] time(s) in [duration]",{author:r,count:e.ignoreCount,duration:(0,R.tZ)(f.Z,{seconds:60*e.ignoreWindow})}):e.ignoreCount?(0,g._N)("[author] ignored this issue until it happens [count] time(s)",{author:r,count:e.ignoreCount}):e.ignoreUserCount&&e.ignoreUserWindow?(0,g._N)("[author] ignored this issue until it affects [count] user(s) in [duration]",{author:r,count:e.ignoreUserCount,duration:(0,R.tZ)(f.Z,{seconds:60*e.ignoreUserWindow})}):e.ignoreUserCount?(0,g._N)("[author] ignored this issue until it affects [count] user(s)",{author:r,count:e.ignoreUserCount}):(0,g._N)("[author] ignored this issue",{author:r})}(t)}case _.fc.SET_PUBLIC:return(0,g._N)("[author] made this issue public",{author:r});case _.fc.SET_PRIVATE:return(0,g._N)("[author] made this issue private",{author:r});case _.fc.SET_REGRESSION:{const{data:t}=e;return t.version?(0,g._N)("[author] marked this issue as a regression in [version]",{author:r,version:(0,R.tZ)(w.Z,{version:t.version,projectId:s,tooltipRawVersion:!0})}):(0,g._N)("[author] marked this issue as a regression",{author:r})}case _.fc.CREATE_ISSUE:{const{data:t}=e;return(0,g._N)("[author] created an issue on [provider] titled [title]",{author:r,provider:t.provider,title:(0,R.tZ)(y.Z,{href:t.location,children:t.title})})}case _.fc.UNMERGE_SOURCE:{const{data:t}=e,{destination:s,fingerprints:n}=t;return(0,g.tn)("%2$s migrated %1$s fingerprint to %3$s","%2$s migrated %1$s fingerprints to %3$s",n.length,r,s?(0,R.tZ)(I.Z,{to:"".concat(i).concat(s.id),children:s.shortId}):(0,g.t)("a group"))}case _.fc.UNMERGE_DESTINATION:{const{data:t}=e,{source:s,fingerprints:n}=t;return(0,g.tn)("%2$s migrated %1$s fingerprint from %3$s","%2$s migrated %1$s fingerprints from %3$s",n.length,r,s?(0,R.tZ)(I.Z,{to:"".concat(i).concat(s.id),children:s.shortId}):(0,g.t)("a group"))}case _.fc.FIRST_SEEN:return(0,g._N)("[author] first saw this issue",{author:r});case _.fc.ASSIGNED:{const{data:t}=e;return function(t){var s;let i;if("team"===t.assigneeType){const e=U.Z.getById(t.assignee);return i=e?e.slug:"<unknown-team>",(0,g._N)("[author] assigned this issue to #[assignee]",{author:r,assignee:i})}return e.user&&e.assignee===e.user.id?(0,g._N)("[author] assigned this issue to themselves",{author:r}):(i=k.Z.getById(t.assignee),"object"==typeof i&&null!==(s=i)&&void 0!==s&&s.email?(0,g._N)("[author] assigned this issue to [assignee]",{author:r,assignee:i.email}):(0,g._N)("[author] assigned this issue to an unknown user",{author:r}))}(t)}case _.fc.UNASSIGNED:return(0,g._N)("[author] unassigned this issue",{author:r});case _.fc.MERGE:return(0,g.tn)("%2$s merged %1$s issue into this issue","%2$s merged %1$s issues into this issue",e.data.issues.length,r);case _.fc.REPROCESS:{const{data:s}=e,{oldGroupId:i,eventCount:n}=s;return(0,g._N)("[author] reprocessed the events in this issue. [new-events]",{author:r,"new-events":(0,R.tZ)(I.Z,{to:"/organizations/".concat(t,"/issues/?query=reprocessing.original_issue_id:").concat(i),children:(0,g.tn)("See %s new event","See %s new events",n)})})}case _.fc.MARK_REVIEWED:return(0,g._N)("[author] marked this issue as reviewed",{author:r});default:return""}}()})}C.displayName="GroupActivityItem";const j=C;var B=s("./app/views/organizationGroupDetails/utils.tsx");class D extends n.Component{constructor(...e){super(...e),(0,r.Z)(this,"state",{createBusy:!1,error:!1,errorJSON:null,inputId:(0,x.E)()}),(0,r.Z)(this,"handleNoteDelete",(async({modelId:e,text:t})=>{const{api:s,group:r}=this.props;(0,a.E3)((0,g.t)("Removing comment..."));try{await(0,o.f_)(s,r,e,t),(0,a.B8)()}catch(e){(0,a.Iw)((0,g.t)("Failed to delete comment"))}})),(0,r.Z)(this,"handleNoteCreate",(async e=>{const{api:t,group:s}=this.props;this.setState({createBusy:!0}),(0,a.E3)((0,g.t)("Posting comment..."));try{await(0,o.kT)(t,s,e),this.setState({createBusy:!1,inputId:(0,x.E)()}),(0,a.B8)()}catch(e){this.setState({createBusy:!1,error:!0,errorJSON:e.responseJSON||h.N7}),(0,a.Iw)((0,g.t)("Unable to post comment"))}})),(0,r.Z)(this,"handleNoteUpdate",(async(e,{modelId:t,text:s})=>{const{api:r,group:i}=this.props;(0,a.E3)((0,g.t)("Updating comment..."));try{await(0,o.Qk)(r,i,e,t,s),(0,a.B8)()}catch(e){this.setState({error:!0,errorJSON:e.responseJSON||h.N7}),(0,a.Iw)((0,g.t)("Unable to update comment"))}}))}render(){const{group:e,organization:t}=this.props,{activity:s,count:r,id:i}=e,o=Number(r),a=(0,B.Ad)(s),m=(0,B.M3)(e,a),h=v.Z.get("user"),Z=e&&e.project?[e.project.slug]:[],x={minHeight:140,group:e,projectSlugs:Z,placeholder:(0,g.t)("Add details or updates to this event. \nTag users with @, or teams with #")};return(0,R.BX)(n.Fragment,{children:[(m===B.m7.REPROCESSED_AND_HASNT_EVENT||m===B.m7.REPROCESSED_AND_HAS_EVENT)&&(0,R.tZ)(A,{reprocessActivity:a,groupCount:o,orgSlug:t.slug,groupId:i}),(0,R.tZ)("div",{className:"row",children:(0,R.tZ)("div",{className:"col-md-9",children:(0,R.BX)("div",{children:[(0,R.tZ)(u.Z,{author:{type:"user",user:h},children:()=>(0,R.tZ)(p.Z,{storageKey:"groupinput:latest",itemKey:e.id,onCreate:this.handleNoteCreate,busy:this.state.createBusy,error:this.state.error,errorJSON:this.state.errorJSON,...x},this.state.inputId)}),e.activity.map((t=>{var s;const r=t.user?t.user.name:"Sentry";return t.type===_.fc.NOTE?(0,R.tZ)(l.Z,{mini:!0,children:(0,R.tZ)(d.Z,{showTime:!1,text:t.data.text,modelId:t.id,user:t.user,dateCreated:t.dateCreated,authorName:r,onDelete:this.handleNoteDelete,onUpdate:this.handleNoteUpdate,...x})},"note-".concat(t.id)):(0,R.tZ)(l.Z,{mini:!0,children:(0,R.tZ)(u.Z,{author:{type:t.user?"user":"system",user:null!==(s=t.user)&&void 0!==s?s:void 0},date:t.dateCreated,header:(0,R.tZ)(j,{author:(0,R.tZ)(c.Z,{children:r}),activity:t,orgSlug:this.props.params.orgId,projectId:e.project.id})})},"item-".concat(t.id))}))]})})})]})}}D.displayName="GroupActivity";const T=(0,N.Z)((0,E.Z)(D)),A=(0,i.Z)(m.Z,{target:"e1emkr30"})("margin:-",(0,Z.Z)(3)," -",(0,Z.Z)(4)," ",(0,Z.Z)(4)," -",(0,Z.Z)(4),";z-index:1;")}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationGroupDetails_groupActivity_tsx.e7d53f9439595910f517846b7cb43b36.js.map