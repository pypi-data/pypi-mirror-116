"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_components_events_searchBar_tsx-app_components_sentryDocumentTitle_tsx-app_views_performa-4a30a0","app_components_sentryDocumentTitle_tsx"],{"./app/components/events/searchBar.tsx":(e,t,n)=>{n.d(t,{Z:()=>D});var s,o=n("../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),i=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/core-js/modules/es.string.replace.js"),n("../node_modules/core-js/modules/es.object.from-entries.js"),n("../node_modules/react/index.js")),a=n("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),l=n("../node_modules/lodash/assign.js"),d=n.n(l),c=n("../node_modules/lodash/flatten.js"),u=n.n(c),p=n("../node_modules/lodash/isEqual.js"),m=n.n(p),h=n("../node_modules/lodash/memoize.js"),v=n.n(h),g=n("../node_modules/lodash/omit.js"),f=n.n(g),x=n("./app/actionCreators/tags.tsx"),Z=n("./app/components/smartSearchBar/index.tsx"),y=n("./app/constants/index.tsx"),j=n("./app/types/index.tsx"),b=n("./app/utils.tsx"),w=n("./app/utils/discover/fields.tsx"),_=n("./app/utils/measurements/measurements.tsx"),k=n("./app/utils/withApi.tsx"),S=n("./app/utils/withTags.tsx"),N=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const P=new RegExp("^".concat(y.c$,"|\\").concat(y.ir),"g");class C extends r.PureComponent{constructor(...e){super(...e),(0,i.Z)(this,"getEventFieldValues",v()(((e,t,n)=>{const{api:s,organization:o,projectIds:i}=this.props,r=null==i?void 0:i.map(String);return(0,w.h1)(e.key)||(0,w.Xr)(e.key)?Promise.resolve([]):(0,x.Fo)(s,o.slug,e.key,t,r,n,!0).then((e=>u()(e.filter((({name:e})=>(0,b.ri)(e))).map((({name:e})=>e)))),(()=>{throw new Error("Unable to fetch event field values")}))}),(({key:e},t)=>"".concat(e,"-").concat(t)))),(0,i.Z)(this,"prepareQuery",(e=>e.replace(P,"")))}componentDidMount(){var e,t;null===(e=(t=this.getEventFieldValues.cache).clear)||void 0===e||e.call(t)}componentDidUpdate(e){var t,n;m()(this.props.projectIds,e.projectIds)||null===(t=(n=this.getEventFieldValues.cache).clear)||void 0===t||t.call(n)}getTagList(e){const{fields:t,organization:n,tags:s,omitTags:o}=this.props,i=t?Object.fromEntries(t.filter((e=>!Object.keys(w.wZ).includes(e.field)&&!(0,w.GO)(e.field))).map((e=>[e.field,{key:e.field,name:e.field}]))):{},r=n.features.includes("performance-view")?Object.assign({},e,w.wZ,i):f()(w.wZ,w.J8),a=n.features.includes("semver")?Object.assign({},w.jg,r):r,l=d()({},s,a);return l.has={key:"has",name:"Has property",values:Object.keys(l),predefined:!0},f()(l,null!=o?o:[])}render(){const{organization:e}=this.props;return(0,N.tZ)(_.Z,{organization:e,children:({measurements:e})=>{const t=this.getTagList(e);return(0,N.tZ)(a.ms,{children:({css:e})=>(0,N.tZ)(Z.Z,{...this.props,hasRecentSearches:!0,savedSearchType:j.L4.EVENT,onGetTagValues:this.getEventFieldValues,supportedTags:t,prepareQuery:this.prepareQuery,excludeEnvironment:!0,dropdownClassName:e(s||(s=(0,o.Z)(["\n                    max-height: 300px;\n                    overflow-y: auto;\n                  "])))})})}})}}C.displayName="SearchBar";const D=(0,k.Z)((0,S.Z)(C))},"./app/components/sentryDocumentTitle.tsx":(e,t,n)=>{n.d(t,{Z:()=>a}),n("../node_modules/react/index.js");var s=n("../node_modules/react-document-title/index.js"),o=n.n(s),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r({title:e,orgSlug:t,projectSlug:n,children:s}){const r=t||n?t&&n?"".concat(e," - ").concat(t," - ").concat(n):t?"".concat(e," - ").concat(t):"".concat(e," - ").concat(n):e;return(0,i.tZ)(o(),{title:"".concat(r," - Sentry"),children:s})}r.displayName="SentryDocumentTitle";const a=r},"./app/utils/measurements/measurements.tsx":(e,t,n)=>{n.d(t,{Z:()=>c}),n("../node_modules/core-js/modules/es.object.from-entries.js"),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var s=n("../node_modules/react/index.js"),o=n("./app/utils/performance/vitals/constants.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(e){return Object.fromEntries(Object.entries(e).map((([e,t])=>[e,{name:t.name,key:e}])))}const a=r(o.T),l=r(o.r);function d({organization:e,children:t}){const n=e.features.includes("performance-mobile-vitals")?{...l,...a}:l;return(0,i.tZ)(s.Fragment,{children:t({measurements:n})})}d.displayName="Measurements";const c=d},"./app/utils/performance/vitals/vitalsCardsDiscoverQuery.tsx":(e,t,n)=>{n.d(t,{Z:()=>u}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/react/index.js");var s=n("../node_modules/lodash/pick.js"),o=n.n(s),i=n("./app/utils/discover/genericDiscoverQuery.tsx"),r=n("./app/utils/performance/constants.tsx"),a=n("./app/utils/withApi.tsx"),l=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d(e){const{eventView:t,vitals:n}=e,s=null==t?void 0:t.getEventsAPIPayload(e.location);return{vital:n,...o()(s,["query",...Object.values(r.s)])}}function c(e){return(0,l.tZ)(i.Z,{getRequestPayload:d,route:"events-vitals",...e,children:({tableData:t,...n})=>e.children({vitalsData:t,...n})})}c.displayName="VitalsCardsDiscoverQuery";const u=(0,a.Z)(c)},"./app/utils/withTags.tsx":(e,t,n)=>{n.d(t,{Z:()=>l});var s=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/react/index.js")),i=n("./app/stores/tagStore.tsx"),r=n("./app/utils/getDisplayName.tsx"),a=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=function(e){class t extends o.Component{constructor(...e){super(...e),(0,s.Z)(this,"state",{tags:i.Z.getAllTags()}),(0,s.Z)(this,"unsubscribe",i.Z.listen((e=>this.setState({tags:e})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){const{tags:t,...n}=this.props;return(0,a.tZ)(e,{tags:null!=t?t:this.state.tags,...n})}}return t.displayName="WithTags",(0,s.Z)(t,"displayName","withTags(".concat((0,r.Z)(e),")")),t}},"./app/views/performance/landing/vitalsCards.tsx":(e,t,n)=>{n.d(t,{M9:()=>W,q7:()=>H,aU:()=>J,JO:()=>ee});var s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(n("../node_modules/core-js/modules/es.symbol.description.js"),n("../node_modules/core-js/modules/es.array.reduce.js"),n("../node_modules/react/index.js")),i=n("../node_modules/@sentry/minimal/esm/index.js"),r=n("./app/components/card.tsx"),a=n("./app/components/charts/eventsRequest.tsx"),l=n("./app/components/charts/styles.tsx"),d=n("./app/components/charts/utils.tsx"),c=n("./app/components/emptyStateWarning.tsx"),u=n("./app/components/links/link.tsx"),p=n("./app/components/placeholder.tsx"),m=n("./app/components/questionTooltip.tsx"),h=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),v=n("../node_modules/react-sparklines/build/index.js"),g=n("../node_modules/prop-types/index.js"),f=n.n(g);class x extends v.Sparklines{}(0,h.Z)(x,"propTypes",{children:f().node,data:f().array,limit:f().number,width:f().number,height:f().number,svgWidth:f().number,svgHeight:f().number,preserveAspectRatio:f().string,margin:f().number,style:f().object,min:f().number,max:f().number,onMouseMove:f().func});var Z=n("./app/locale.tsx"),y=n("./app/styles/overflowEllipsis.tsx"),j=n("./app/styles/space.tsx"),b=n("./app/utils.tsx"),w=n("./app/utils/dates.tsx"),_=n("./app/utils/discover/discoverQuery.tsx"),k=n("./app/utils/discover/fields.tsx"),S=n("./app/utils/performance/vitals/constants.tsx"),N=n("./app/utils/performance/vitals/vitalsCardsDiscoverQuery.tsx"),P=n("./app/utils/queryString.tsx"),C=n("./app/utils/theme.tsx"),D=n("./app/utils/withApi.tsx"),O=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const T=e=>(0,O.tZ)(A,{fractions:e.colorStops.map((({percent:e})=>e)),children:e.colorStops.map((e=>(0,O.tZ)(E,{color:e.color},e.color)))});T.displayName="ColorBar";const A=(0,s.Z)("div",{target:"etd41501"})("height:16px;width:100%;overflow:hidden;position:relative;background:",(e=>e.theme.gray100),";display:grid;grid-template-columns:",(e=>e.fractions.map((e=>"".concat(e,"fr"))).join(" ")),";margin-bottom:",(0,j.Z)(1),";border-radius:2px;"),E=(0,s.Z)("div",{target:"etd41500"})("background-color:",(e=>e.theme[e.color]),";"),z=T;var V=n("./app/views/performance/vitalDetail/utils.tsx"),B=n("./app/components/tooltip.tsx"),L=n("./app/utils/formatters.tsx");function M(e,t){const n=Array.isArray(e)||e===k.Zl.CLS?"":"ms";switch(t){case V.SP.POOR:return Array.isArray(e)?(0,Z.t)("Poor"):(0,Z._N)("Poor: >[threshold][unit]",{threshold:V.eE[e],unit:n});case V.SP.MEH:return Array.isArray(e)?(0,Z.t)("Meh"):(0,Z._N)("Meh: >[threshold][unit]",{threshold:V.MN[e],unit:n});case V.SP.GOOD:return Array.isArray(e)?(0,Z.t)("Good"):(0,Z._N)("Good: <[threshold][unit]",{threshold:V.MN[e],unit:n});default:return null}}function F(e){return(0,O.tZ)(q,{children:e.percents.map((t=>(0,O.tZ)(B.Z,{title:M(e.vital,t.vitalState),children:(0,O.BX)(I,{children:[V.Np[t.vitalState],(0,O.BX)("span",{children:[e.showVitalPercentNames&&(0,Z.t)("".concat(t.vitalState))," ",(0,L.rl)(t.percent,0)]})]})},t.vitalState)))})}F.displayName="VitalPercents";const q=(0,s.Z)("div",{target:"ex3thpn1"})("display:inline-grid;grid-auto-flow:column;gap:",(0,j.Z)(2),";"),I=(0,s.Z)("div",{target:"ex3thpn0"})("display:flex;align-items:center;gap:",(0,j.Z)(.5),";font-size:",(e=>e.theme.fontSizeMedium),";");var G=n("./app/views/performance/landing/utils.tsx");function H(e){const{eventView:t,location:n,organization:s,projects:o,frontendOnly:i=!1}=e;if(i&&(0,G.Oo)(o,t)!==G.BY.FRONTEND_PAGELOAD)return null;const r=[k.Zl.FCP,k.Zl.LCP,k.Zl.FID,k.Zl.CLS];return(0,O.tZ)(N.Z,{eventView:t,location:n,orgSlug:s.slug,vitals:r,children:({isLoading:e,vitalsData:o})=>(0,O.tZ)(K,{children:r.map((i=>{var r,a,l;const d=(0,V.i4)({orgSlug:s.slug,query:t.generateQueryStringObject(),vitalName:i,projectID:(0,P.qP)(n.query.project)}),c=e?"—":ie(null!==(r=null==o?void 0:o[i])&&void 0!==r?r:null,i),p=(0,O.tZ)(Q,{children:(0,O.tZ)(ee,{isLoading:e,vital:i,data:o})});return(0,O.tZ)(u.Z,{to:d,"data-test-id":"vitals-linked-card-".concat(V.a7[i]),children:(0,O.tZ)(ne,{title:null!==(a=V.jo[i])&&void 0!==a?a:"",tooltip:null!==(l=S.r[i].description)&&void 0!==l?l:"",value:e?"—":c,chart:p,minHeight:150})},i)}))})})}H.displayName="FrontendCards";const Q=(0,s.Z)("div",{target:"e1he14ku8"})("margin-top:",(0,j.Z)(1.5),";");function X(e){const{api:t,eventView:n,location:s,organization:o,functions:r}=e,{query:l}=s,c=n.withColumns(r),u=c.getGlobalSelection(),p=u.datetime.start?(0,w.hC)(u.datetime.start):void 0,m=u.datetime.end?(0,w.hC)(u.datetime.end):void 0,h="string"==typeof l.sparkInterval?l.sparkInterval:(0,d.ZS)({start:p||null,end:m||null,period:u.datetime.period},"low"),v=c.getEventsAPIPayload(s);return(0,O.tZ)(_.Z,{location:s,eventView:c,orgSlug:o.slug,limit:1,referrer:"api.performance.vitals-cards",children:({isLoading:e,tableData:n})=>(0,O.tZ)(a.Z,{api:t,organization:o,period:u.datetime.period,project:u.projects,environment:u.environments,team:v.team,start:p,end:m,interval:h,query:v.query,includePrevious:!1,yAxis:c.getFields(),partial:!0,children:({results:t})=>{const s=null==t?void 0:t.reduce(((e,t)=>(e[t.seriesName]=t.data.map((e=>e.value)),e)),{}),a=(0,G.hv)(o);return(0,O.tZ)(K,{children:r.map((t=>{var o,r;let l=(0,k.sN)(t);l.includes("apdex")&&(l="apdex()");const d=a[l];if(!d)return i.uT("Missing field '".concat(l,"' in vital cards.")),null;const{title:c,tooltip:u,formatter:p}=d,m=(0,k.LY)(l),h=null==n||null===(o=n.data)||void 0===o||null===(r=o[0])||void 0===r?void 0:r[m],v=null==s?void 0:s[l],g=e||!(0,b.ri)(h)?"—":p(h),f=(0,O.tZ)(Y,{data:v});return(0,O.tZ)(ne,{title:c,tooltip:u,value:g,chart:f,horizontal:!0,minHeight:96,isNotInteractive:!0},l)}))})}})})}function R(e){const{organization:t}=e,n=[{kind:"function",function:["p75","transaction.duration",void 0,void 0]},{kind:"function",function:["tpm","",void 0,void 0]},{kind:"function",function:["failure_rate","",void 0,void 0]},t.features.includes("project-transaction-threshold")?{kind:"function",function:["apdex","",void 0,void 0]}:{kind:"function",function:["apdex","".concat(t.apdexThreshold),void 0,void 0]}];return(0,O.tZ)(X,{...e,functions:n})}X.displayName="GenericCards",R.displayName="_BackendCards";const W=(0,D.Z)(R);function U(e){const t=[{kind:"function",function:["p75","measurements.app_start_cold",void 0,void 0]},{kind:"function",function:["p75","measurements.app_start_warm",void 0,void 0]}];return e.showStallPercentage?t.push({kind:"function",function:["p75","measurements.stall_percentage",void 0,void 0]}):(t.push({kind:"function",function:["p75","measurements.frames_slow_rate",void 0,void 0]}),t.push({kind:"function",function:["p75","measurements.frames_frozen_rate",void 0,void 0]})),(0,O.tZ)(X,{...e,functions:t})}U.displayName="_MobileCards";const J=(0,D.Z)(U);function Y(e){const{data:t}=e,n=C.ZP.charts.getColorPalette(1)[0];return(0,O.tZ)($,{"data-test-id":"sparkline",width:150,height:24,children:(0,O.tZ)(x,{data:t,width:150,height:24,children:(0,O.tZ)(v.SparklinesLine,{style:{stroke:n,fill:"none",strokeWidth:3}})})})}Y.displayName="SparklineChart";const $=(0,s.Z)("div",{target:"e1he14ku7"})("flex-grow:4;max-height:",(e=>e.height),"px;max-width:",(e=>e.width),"px;margin:",(0,j.Z)(1)," ",(0,j.Z)(0)," ",(0,j.Z)(.5)," ",(0,j.Z)(3),";"),K=(0,s.Z)("div",{target:"e1he14ku6"})("display:grid;grid-template-columns:1fr;grid-column-gap:",(0,j.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints[0]),"){grid-template-columns:repeat(2, 1fr);}@media (min-width: ",(e=>e.theme.breakpoints[2]),"){grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));}");function ee(e){var t;const{isLoading:n,data:s,vital:i,value:r,showBar:a=!0,showStates:l=!1,showDurationDetail:d=!1,showVitalPercentNames:c=!1}=e;if(n)return l?(0,O.tZ)(p.Z,{height:"48px"}):null;const u=l?(0,O.tZ)(te,{small:!0,children:(0,Z.t)("No vitals found")}):null;if(!s)return u;const m={poor:0,meh:0,good:0,total:0};if((Array.isArray(i)?i:[i]).forEach((e=>{var t;const n=null!==(t=null==s?void 0:s[e])&&void 0!==t?t:{};Object.keys(m).forEach((e=>m[e]+=n[e]))})),!m.total)return u;const h=Array.isArray(i)?null:null!=r?r:ie(null!==(t=null==s?void 0:s[i])&&void 0!==t?t:null,i),v=function({poor:e,meh:t,good:n,total:s}){const o=e/s,i=t/s,r=n/s;return[{vitalState:V.SP.GOOD,percent:r},{vitalState:V.SP.MEH,percent:i},{vitalState:V.SP.POOR,percent:o}]}(m),g=function(e){return e.map((({percent:e,vitalState:t})=>({percent:e,color:V.fL[t]})))}(v);return(0,O.BX)(o.Fragment,{children:[a&&(0,O.tZ)(z,{colorStops:g}),(0,O.BX)(re,{children:[d&&h&&(0,O.BX)("div",{"data-test-id":"vital-bar-p75",children:[(0,Z.t)("The p75 for all transactions is "),(0,O.tZ)("strong",{children:h})]}),(0,O.tZ)(F,{vital:i,percents:v,showVitalPercentNames:c})]})]})}ee.displayName="VitalBar";const te=(0,s.Z)(c.Z,{target:"e1he14ku5"})("height:48px;padding:",(0,j.Z)(1.5)," 15%;");function ne(e){const{chart:t,minHeight:n,horizontal:s,title:o,tooltip:i,value:r,isNotInteractive:a}=e;return(0,O.BX)(oe,{interactive:!a,minHeight:n,children:[(0,O.BX)(l.Gh,{children:[(0,O.tZ)(le,{children:(0,Z.t)(o)}),(0,O.tZ)(m.Z,{size:"sm",position:"top",title:i})]}),(0,O.BX)(se,{horizontal:s,children:[(0,O.tZ)(ae,{children:r}),t]})]})}ne.displayName="VitalCard";const se=(0,s.Z)("div",{target:"e1he14ku4"})("width:100%;display:flex;flex-direction:",(e=>e.horizontal?"row":"column"),";justify-content:space-between;"),oe=(0,s.Z)(r.Z,{target:"e1he14ku3"})("color:",(e=>e.theme.textColor),";padding:",(0,j.Z)(2)," ",(0,j.Z)(3),";align-items:flex-start;margin-bottom:",(0,j.Z)(2),";",(e=>e.minHeight&&"min-height: ".concat(e.minHeight,"px")),";");function ie(e,t){var n;const s=null!==(n=null==e?void 0:e.p75)&&void 0!==n?n:null;return null===s?"—":t===k.Zl.CLS?s.toFixed(2):"".concat(s.toFixed(0),"ms")}const re=(0,s.Z)("div",{target:"e1he14ku2"})("font-size:",(e=>e.theme.fontSizeMedium),";@media (min-width: ",(e=>e.theme.breakpoints[0]),"){display:flex;justify-content:space-between;}"),ae=(0,s.Z)("div",{target:"e1he14ku1"})("font-size:32px;margin-top:",(0,j.Z)(1),";"),le=(0,s.Z)("div",{target:"e1he14ku0"})(y.Z,";")}}]);
//# sourceMappingURL=../sourcemaps/app_components_events_searchBar_tsx-app_components_sentryDocumentTitle_tsx-app_views_performa-4a30a0.275e96cbaee76886a98cf800ad756534.js.map