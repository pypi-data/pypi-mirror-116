"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_releases_list_index_tsx"],{"./app/components/charts/chartZoom.tsx":(e,t,s)=>{s.d(t,{Z:()=>g});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=s("../node_modules/react/index.js"),r=s("../node_modules/moment/moment.js"),i=s.n(r),n=s("../node_modules/query-string/index.js"),l=s("./app/actionCreators/globalSelection.tsx"),d=s("./app/components/charts/components/dataZoomInside.tsx"),c=s("./app/components/charts/components/toolBox.tsx"),p=s("./app/utils/callIfFunction.tsx"),h=s("./app/utils/dates.tsx");const u=e=>e?i().utc(e).format(i().HTML5_FMT.DATETIME_LOCAL_SECONDS):null;class m extends a.Component{constructor(e){super(e),(0,o.Z)(this,"history",void 0),(0,o.Z)(this,"currentPeriod",void 0),(0,o.Z)(this,"zooming",null),(0,o.Z)(this,"saveCurrentPeriod",(e=>{this.currentPeriod={period:e.period,start:u(e.start),end:u(e.end)}})),(0,o.Z)(this,"setPeriod",(({period:e,start:t,end:s},o=!1)=>{const{router:a,onZoom:r,usePageDate:i}=this.props,d=u(t),c=u(s);o&&this.history.push(this.currentPeriod),(0,p.g)(r,{period:e,start:d,end:c}),this.zooming=()=>{if(i&&a){const o={...a.location.query,pageStart:t?(0,h.v5)(t):void 0,pageEnd:s?(0,h.v5)(s):void 0,pageStatsPeriod:null!=e?e:void 0};n.stringify(o)!==n.stringify(a.location.query)&&a.push({pathname:a.location.pathname,query:o})}else(0,l.dR)({period:e,start:d?(0,h.hC)(d):d,end:c?(0,h.hC)(c):c},a);this.saveCurrentPeriod({period:e,start:t,end:s})}})),(0,o.Z)(this,"handleChartReady",(e=>{e.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0}),(0,p.g)(this.props.onChartReady,e)})),(0,o.Z)(this,"handleZoomRestore",((e,t)=>{this.history.length&&(this.setPeriod(this.history[0]),this.history=[],(0,p.g)(this.props.onRestore,e,t))})),(0,o.Z)(this,"handleDataZoom",((e,t)=>{const s=t.getModel(),{xAxis:o}=s.option,a=o[0];if(null===a.rangeStart&&null===a.rangeEnd){const e=this.history.pop();if(!e)return;this.setPeriod(e)}else{const e=i().utc(a.rangeStart),t=i().utc(a.rangeEnd);this.setPeriod({period:null,start:e,end:t},!0)}(0,p.g)(this.props.onDataZoom,e,t)})),(0,o.Z)(this,"handleChartFinished",(()=>{"function"==typeof this.zooming&&(this.zooming(),this.zooming=null),(0,p.g)(this.props.onFinished)})),this.history=[],this.saveCurrentPeriod(e)}componentDidUpdate(){this.props.disabled||this.saveCurrentPeriod(this.props)}render(){const{utc:e,start:t,end:s,disabled:o,children:a,xAxisIndex:r,router:i,onZoom:n,onRestore:l,onChartReady:p,onDataZoom:u,onFinished:m,...g}=this.props,y=null!=e?e:void 0,v=t?(0,h.hC)(t):void 0,Z=s?(0,h.hC)(s):void 0;return a(o?{utc:y,start:v,end:Z,...g}:{isGroupedByDate:!0,onChartReady:this.handleChartReady,utc:y,start:v,end:Z,dataZoom:(0,d.Z)({xAxisIndex:r}),showTimeInTooltip:!0,toolBox:(0,c.Z)({},{dataZoom:{title:{zoom:"",back:""},iconStyle:{borderWidth:0,color:"transparent",opacity:0}}}),onDataZoom:this.handleDataZoom,onFinished:this.handleChartFinished,onRestore:this.handleZoomRestore,...g})}}m.displayName="ChartZoom";const g=m},"./app/components/charts/lineChart.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});var o=s("../node_modules/react/index.js"),a=s("./app/components/charts/series/lineSeries.tsx"),r=s("./app/components/charts/baseChart.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class n extends o.Component{render(){const{series:e,seriesOptions:t,...s}=this.props;return(0,i.tZ)(r.Z,{...s,series:e.map((({seriesName:e,data:s,dataArray:o,...r})=>(0,a.Z)({...t,...r,name:e,data:o||s.map((({value:e,name:t})=>[t,e])),animation:!1,animationThreshold:1,animationDuration:0})))})}}n.displayName="LineChart"},"./app/components/charts/transitionChart.tsx":(e,t,s)=>{s.d(t,{Z:()=>l});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),r=s("./app/components/charts/loadingPanel.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class n extends a.Component{constructor(...e){super(...e),(0,o.Z)(this,"state",{prevReloading:this.props.reloading,prevLoading:this.props.loading,key:1})}static getDerivedStateFromProps(e,t){const s=t.prevReloading,o=e.reloading,a=t.prevLoading,r=e.loading;return a!==r?{prevReloading:o,prevLoading:r,key:t.key+1}:r?{prevReloading:o,prevLoading:r,key:t.key}:s&&!o?{prevReloading:o,prevLoading:r,key:t.key+1}:{prevReloading:o,prevLoading:r,key:t.key}}render(){const{height:e,loading:t,reloading:s}=this.props;return t&&!s?(0,i.tZ)(r.Z,{height:e,"data-test-id":"events-request-loading"}):(0,i.tZ)(a.Fragment,{children:this.props.children},String(this.state.key))}}n.displayName="TransitionChart",(0,o.Z)(n,"defaultProps",{height:"200px"});const l=n},"./app/components/charts/transparentLoadingMask.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(s("../node_modules/react/index.js"),s("./app/components/loadingMask.tsx")),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i=(0,o.Z)((({className:e,visible:t,children:s,...o})=>{const i=t?{...o,"data-test-id":"loading-placeholder"}:o;return(0,r.tZ)(a.Z,{className:e,...i,children:s})}),{target:"ewtkxp50"})((e=>!e.visible&&"display: none;"),";opacity:0.4;z-index:1;")},"./app/components/notAvailable.tsx":(e,t,s)=>{s.d(t,{Z:()=>d});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(s("../node_modules/react/index.js"),s("./app/components/tooltip.tsx")),r=s("./app/utils.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function n({tooltip:e,className:t}){return(0,i.tZ)(l,{className:t,children:(0,i.tZ)(a.Z,{title:e,disabled:!(0,r.ri)(e),children:"â€”"})})}n.displayName="NotAvailable";const l=(0,o.Z)("div",{target:"e1ickyb10"})("color:",(e=>e.theme.gray200),";"),d=n},"./app/utils/routeTitle.tsx":(e,t,s)=>{s.d(t,{Z:()=>o});const o=function(e,t,s=!0,o){const a="".concat(e," - ").concat(t),r=o?"".concat(a," - ").concat(o):a;return s?"".concat(r," - Sentry"):r}},"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>n}),s("../node_modules/react/index.js");var o=s("../node_modules/react-document-title/index.js"),a=s.n(o),r=s("./app/components/asyncComponent.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class n extends r.Z{getTitle(){return""}render(){const e=this.getTitle();return(0,i.tZ)(a(),{title:"".concat(e?"".concat(e," - "):"","Sentry"),children:this.renderComponent()})}}n.displayName="AsyncView"},"./app/views/releases/detail/overview/releaseArchivedNotice.tsx":(e,t,s)=>{s.d(t,{Z:()=>h});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=s("../node_modules/react/index.js"),r=s("./app/components/alert.tsx"),i=s("./app/components/button.tsx"),n=s("./app/icons/index.tsx"),l=s("./app/locale.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function c({onRestore:e,multi:t}){return(0,d.BX)(r.Z,{icon:(0,d.tZ)(n.aU,{size:"md"}),type:"warning",children:[t?(0,l.t)("These releases have been archived."):(0,l.t)("This release has been archived."),!t&&e&&(0,d.BX)(a.Fragment,{children:[" ",(0,d.tZ)(p,{size:"zero",priority:"link",onClick:e,children:(0,l.t)("Restore this release")})]})]})}c.displayName="ReleaseArchivedNotice";const p=(0,o.Z)(i.ZP,{target:"ed64kpf0"})("font-size:inherit;text-decoration:underline;&,&:hover,&:focus,&:active{color:",(e=>e.theme.textColor),";}"),h=c},"./app/views/releases/list/crashFree.tsx":(e,t,s)=>{s.d(t,{Z:()=>m});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=s("./app/icons/index.tsx"),r=s("./app/styles/overflowEllipsis.tsx"),i=s("./app/styles/space.tsx"),n=s("./app/utils.tsx"),l=s("./app/views/releases/utils/index.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const c=(e,t)=>e<98?(0,d.tZ)(a.zC,{color:"red300",size:t}):e<99.5?(0,d.tZ)(a.FC,{color:"yellow300",size:t}):(0,d.tZ)(a.DL,{isCircled:!0,color:"green300",size:t});c.displayName="getIcon";const p=({percent:e,iconSize:t="sm",displayOption:s})=>(0,d.BX)(h,{children:[c(e,t),(0,d.BX)(u,{children:[(0,l.zB)(e)," ",(0,n.ri)(s)&&(0,l.gs)(s,2)]})]});p.displayName="CrashFree";const h=(0,o.Z)("div",{target:"eogay0f1"})("display:inline-grid;grid-auto-flow:column;grid-column-gap:",(0,i.Z)(1),";align-items:center;vertical-align:middle;"),u=(0,o.Z)("div",{target:"eogay0f0"})(r.Z,";"),m=p},"./app/views/releases/list/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{ReleasesList:()=>qt,default:()=>Ht,isProjectMobileForReleases:()=>At});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),i=s("../node_modules/react-lazyload/lib/index.js"),n=s("../node_modules/lodash/pick.js"),l=s.n(n),d=s("./app/actionCreators/tags.tsx"),c=s("./app/components/acl/feature.tsx"),p=s("./app/components/alert.tsx"),h=s("./app/components/assistant/guideAnchor.tsx"),u=s("./app/components/emptyStateWarning.tsx"),m=s("./app/components/lightWeightNoProjectMessage.tsx"),g=s("./app/components/links/externalLink.tsx"),y=s("./app/components/loadingIndicator.tsx"),v=s("./app/components/organizations/globalSelectionHeader/index.tsx"),Z=s("./app/components/organizations/timeRangeSelector/utils.tsx"),S=s("./app/components/pageHeading.tsx"),x=s("./app/components/pagination/index.tsx"),f=s("./app/components/searchBar.tsx"),b=s("./app/components/smartSearchBar/index.tsx"),R=s("./app/constants/index.tsx"),j=s("./app/constants/globalSelectionHeader.tsx"),w=s("./app/data/platformCategories.tsx"),C=s("./app/icons/index.tsx"),_=s("./app/locale.tsx"),E=s("./app/stores/projectsStore.tsx"),P=s("./app/styles/organization.tsx"),z=s("./app/styles/space.tsx"),I=s("./app/types/index.tsx"),B=s("./app/utils/analytics.tsx"),k=s("./app/utils/projects.tsx"),A=s("./app/utils/routeTitle.tsx"),q=s("./app/utils/withGlobalSelection.tsx"),N=s("./app/utils/withOrganization.tsx"),T=s("./app/views/asyncView.tsx"),D=s("./app/views/releases/detail/overview/releaseArchivedNotice.tsx"),H=s("./app/views/releases/utils/releaseHealthRequest.tsx"),O=(s("../node_modules/core-js/modules/es.array.reduce.js"),s("../node_modules/lodash/compact.js")),U=s.n(O),Y=s("../node_modules/moment/moment.js"),L=s.n(Y),F=s("./app/components/asyncComponent.tsx"),M=s("./app/components/charts/chartZoom.tsx"),X=s("./app/components/charts/lineChart.tsx"),V=s("./app/components/charts/styles.tsx"),Q=s("./app/components/charts/transitionChart.tsx"),$=s("./app/components/charts/transparentLoadingMask.tsx"),G=s("./app/components/charts/utils.tsx"),W=s("./app/components/count.tsx"),J=s("./app/components/organizations/globalSelectionHeader/getParams.tsx"),K=s("./app/components/panels/index.tsx"),ee=s("./app/components/placeholder.tsx"),te=s("./app/utils.tsx"),se=s("./app/utils/formatters.tsx"),oe=s("./app/utils/withApi.tsx"),ae=s("./app/views/releases/list/utils.tsx"),re=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class ie extends F.Z{constructor(...e){super(...e),(0,o.Z)(this,"shouldReload",!0),(0,o.Z)(this,"handleClick",(e=>{const{organization:t,router:s,selection:o,location:a}=this.props,r=o.projects[0];s.push({pathname:"/organizations/".concat(null==t?void 0:t.slug,"/releases/").concat(encodeURIComponent(e.seriesId),"/"),query:{project:r,environment:a.query.environment}})}))}getInterval(){const{organization:e,location:t}=this.props,s={start:t.query.start,end:t.query.end,period:t.query.statsPeriod,utc:t.query.utc},o=(0,G.Nm)(s);return e.features.includes("minute-resolution-sessions")&&o<360?"10m":o>=G.IZ?"1d":"1h"}getEndpoints(){const{organization:e,location:t,activeDisplay:s}=this.props,o=e.features.includes("semver");return[["sessions","/organizations/".concat(e.slug,"/sessions/"),{query:{interval:this.getInterval(),...(0,J.Q)(l()(t.query,Object.values(j.nF))),groupBy:["release"],field:[(0,H.pE)(s)],query:t.query.query?o?t.query.query:"release:".concat(t.query.query):void 0}}]]}getReleasesSeries(){var e;const{activeDisplay:t}=this.props,{sessions:s}=this.state,o=null==s?void 0:s.groups.map((e=>e.by.release));if(!o)return null;const a=null==s||null===(e=s.groups)||void 0===e?void 0:e.reduce(((e,s)=>(0,H.Yr)(e,s,(0,H.pE)(t))),[]);return o.map((e=>{var o,r;const i=null==s||null===(o=s.groups.find((({by:t})=>t.release===e)))||void 0===o?void 0:o.series[(0,H.pE)(t)];return{id:e,seriesName:(0,se.ko)(e),data:null!==(r=null==s?void 0:s.intervals.map(((e,t)=>{var s,o;return{name:L()(e).valueOf(),value:(0,te.aQ)(null!==(s=null==i?void 0:i[t])&&void 0!==s?s:0,null!==(o=null==a?void 0:a[t])&&void 0!==o?o:0)}})))&&void 0!==r?r:[]}}))}getTotal(){const{activeDisplay:e}=this.props,{sessions:t}=this.state;return(null==t?void 0:t.groups.reduce(((t,s)=>t+s.totals[(0,H.pE)(e)]),0))||0}renderEmpty(){return(0,re.BX)(K.s_,{children:[(0,re.BX)(K.N,{withPadding:!0,children:[(0,re.tZ)(le,{children:(0,re.tZ)(ee.Z,{height:"24px"})}),(0,re.tZ)(ee.Z,{height:"200px"})]}),(0,re.tZ)(ce,{children:(0,re.tZ)(ee.Z,{height:"34px"})})]})}render(){const{activeDisplay:e,router:t,selection:s}=this.props,{start:o,end:a,period:r,utc:i}=s.datetime,{loading:n,reloading:l,sessions:d}=this.state,c=this.getReleasesSeries(),p=this.getTotal();if(n&&!l||l&&0===p||!d)return this.renderEmpty();if(null==c||!c.length)return null;const h=this.getInterval(),u=c[0].data.length;return(0,re.BX)(K.s_,{children:[(0,re.BX)(K.N,{withPadding:!0,children:[(0,re.tZ)(le,{children:(0,re.tZ)(de,{children:(0,_.t)("Release Adoption")})}),(0,re.BX)(Q.Z,{loading:n,reloading:l,children:[(0,re.tZ)($.Z,{visible:l}),(0,re.tZ)(M.Z,{router:t,period:r,utc:i,start:o,end:a,children:e=>(0,re.tZ)(X.Z,{...e,grid:{left:"10px",right:"10px",top:"40px",bottom:"0px"},series:c,yAxis:{min:0,max:100,type:"value",interval:10,splitNumber:10,data:[0,10,20,30,40,50,60,70,80,90,100],axisLabel:{formatter:"{value}%"}},tooltip:{formatter:e=>{const t=Array.isArray(e)?e:[e],s=t[0].data[0],[o,a,r,...i]=t.filter((e=>e.data[1]>0)).sort(((e,t)=>t.data[1]-e.data[1])),n=i.reduce(((e,t)=>e+t.data[1]),0),l=U()([o,a,r]);if(i.length&&l.push({seriesName:(0,_.tn)("%s Other","%s Others",i.length),data:[s,n],marker:'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;"></span>'}),!l.length)return"<div/>";const c=(0,J.s)(h)||{periodLength:"d",period:"1"},p=L()(s).format("MMM D LT"),m=(t[0].dataIndex===u-1?L()(d.end):L()(s).add(parseInt(c.period,10),c.periodLength)).format("MMM D LT");return['<div class="tooltip-series">',l.map((e=>'<div><span class="tooltip-label">'.concat(e.marker,"<strong>").concat(e.seriesName&&(0,G.oS)(e.seriesName,12),"</strong></span>").concat(e.data[1].toFixed(2),"%</div>"))).join(""),"</div>",'<div class="tooltip-date">'.concat(p," &mdash; ").concat(m,"</div>"),'<div class="tooltip-arrow"></div>'].join("")}},onClick:this.handleClick})})]})]}),(0,re.tZ)(ce,{children:(0,re.BX)(V.m2,{children:[(0,re.tZ)(V.OT,{children:(0,_._N)("Total [display]",{display:e===ae.zY.USERS?"Users":"Sessions"})}),(0,re.tZ)(V.uN,{children:(0,re.tZ)(W.Z,{value:p||0})})]})})]})}}ie.displayName="ReleaseAdoptionChart";const ne=(0,oe.Z)(ie),le=(0,a.Z)(V.ws,{target:"e1lgospg2"})("margin-bottom:",(0,z.Z)(1),";"),de=(0,a.Z)("header",{target:"e1lgospg1"})({name:"ho1qnd",styles:"display:flex;flex-direction:row"}),ce=(0,a.Z)(K.jH,{target:"e1lgospg0"})("display:flex;align-items:center;padding:",(0,z.Z)(1)," 20px;");var pe=s("./app/components/globalSelectionLink.tsx"),he=s("./app/components/avatar/avatarList.tsx");const ue=({release:e,withHeading:t=!0})=>{const s=e.commitCount||0,o=e.authors&&e.authors.length||0;if(0===s)return null;const a=[(0,_.tn)("%s commit","%s commits",s),(0,_.t)("by"),(0,_.tn)("%s author","%s authors",o)].join(" ");return(0,re.BX)("div",{className:"release-stats",children:[t&&(0,re.tZ)(me,{children:a}),(0,re.tZ)("span",{style:{display:"inline-block"},children:(0,re.tZ)(he.Z,{users:e.authors,avatarSize:25,typeMembers:"authors"})})]})};ue.displayName="ReleaseStats";const me=(0,a.Z)("div",{target:"e3opf5t0"})("color:",(e=>e.theme.gray300),";font-size:",(e=>e.theme.fontSizeSmall),";line-height:1.2;font-weight:600;text-transform:uppercase;margin-bottom:",(0,z.Z)(.5),";"),ge=ue;var ye=s("./app/components/textOverflow.tsx"),ve=s("./app/components/timeSince.tsx"),Ze=s("./app/components/version.tsx"),Se=s("./app/styles/overflowEllipsis.tsx"),xe=s("../node_modules/lodash/partition.js"),fe=s.n(xe),be=s("./app/components/tooltip.tsx"),Re=s("./app/components/button.tsx"),je=s("./app/components/collapsible.tsx"),we=s("./app/components/idBadge/projectBadge.tsx"),Ce=s("./app/components/links/link.tsx"),_e=s("./app/components/notAvailable.tsx"),Ee=s("./app/components/tag.tsx"),Pe=s("./app/views/releases/utils/index.tsx"),ze=s("./app/views/releases/list/crashFree.tsx"),Ie=s("../node_modules/@emotion/react/dist/emotion-element-a8309070.browser.esm.js"),Be=s("./app/components/charts/miniBarChart.tsx");class ke extends r.Component{constructor(...e){super(...e),(0,o.Z)(this,"formatTooltip",(e=>{const{activeDisplay:t}=this.props,s=t===ae.zY.USERS?(0,_.tn)("user","users",e):(0,_.tn)("session","sessions",e);return"".concat(e.toLocaleString()," ").concat(s)}))}render(){const{height:e,data:t,theme:s}=this.props;return(0,re.tZ)(i.ZP,{debounce:50,height:e,children:(0,re.tZ)(Be.Z,{series:t,height:e,isGroupedByDate:!0,showTimeInTooltip:!0,hideDelay:50,tooltipFormatter:this.formatTooltip,colors:[s.purple300,s.gray200]})})}}ke.displayName="HealthStatsChart",(0,o.Z)(ke,"defaultProps",{height:24});const Ae=(0,Ie.b)(ke),qe=({location:e,selection:t})=>{var s;const o=e.query.healthStatsPeriod||I.$A.TWENTY_FOUR_HOURS,{pathname:a,query:r}=e;return(0,re.BX)(Ne,{children:[t.datetime.period!==I.$A.TWENTY_FOUR_HOURS&&(0,re.tZ)(Te,{to:{pathname:a,query:{...r,healthStatsPeriod:I.$A.TWENTY_FOUR_HOURS}},selected:o===I.$A.TWENTY_FOUR_HOURS,children:(0,_.t)("24h")}),(0,re.tZ)(Te,{to:{pathname:a,query:{...r,healthStatsPeriod:I.$A.AUTO}},selected:o===I.$A.AUTO,children:t.datetime.start?(0,_.t)("Custom"):null!==(s=t.datetime.period)&&void 0!==s?s:(0,_.t)("14d")})]})};qe.displayName="HealthStatsPeriod";const Ne=(0,a.Z)("div",{target:"e1ejmp341"})("display:grid;grid-auto-flow:column;grid-column-gap:",(0,z.Z)(.75),";flex:1;justify-content:flex-end;text-align:right;margin-left:",(0,z.Z)(.5),";"),Te=(0,a.Z)(Ce.Z,{target:"e1ejmp340"})("color:",(e=>e.selected?e.theme.gray400:e.theme.gray300),";&:hover,&:focus{color:",(e=>e.selected?e.theme.gray400:e.theme.gray300),";}"),De=(0,q.Z)(qe),He=(0,a.Z)(K.V9,{target:"e1lwwxwr0"})("border-top-left-radius:0;padding:",(0,z.Z)(1.5)," ",(0,z.Z)(2),";font-size:",(e=>e.theme.fontSizeSmall),";");var Oe=s("./app/views/releases/list/releaseHealth/projectLink.tsx");const Ue={low_adoption:{name:(0,_.t)("Low Adoption"),tooltipTitle:(0,_.t)("Never exceeded 10% adoption in a 6 hour period"),type:"warning"},adopted:{name:(0,_.t)("Adopted"),tooltipTitle:(0,_.t)("At least 10% adoption in the last 6 hours"),type:"success"},replaced:{name:(0,_.t)("Replaced"),tooltipTitle:(0,_.t)("Was previously adopted"),type:"default"}},Ye=({projects:e,showReleaseAdoptionStages:t,adoptionStages:s,releaseVersion:o,location:a,organization:i,activeDisplay:n,showPlaceholders:l,isTopRelease:d,getHealthData:c})=>(0,re.BX)(r.Fragment,{children:[(0,re.tZ)(He,{children:(0,re.BX)(Qe,{showReleaseAdoptionStages:t,children:[(0,re.tZ)($e,{children:(0,_.t)("Project Name")}),t&&(0,re.tZ)(Je,{children:(0,_.t)("Adoption Stage")}),(0,re.BX)(We,{children:[(0,re.tZ)("span",{children:(0,_.t)("Adoption")}),(0,re.tZ)(De,{location:a})]}),(0,re.tZ)(et,{children:(0,_.t)("Crash Free Rate")}),(0,re.tZ)(tt,{children:(0,_.t)("Crashes")}),(0,re.tZ)(Ge,{children:(0,_.t)("New Issues")})]})}),(0,re.tZ)(Fe,{children:(0,re.tZ)(je.Z,{expandButton:({onExpand:e,numberOfHiddenItems:t})=>(0,re.tZ)(Me,{children:(0,re.tZ)(Re.ZP,{priority:"primary",size:"xsmall",onClick:e,children:(0,_._N)("Show [numberOfHiddenItems] More",{numberOfHiddenItems:t})})}),collapseButton:({onCollapse:e})=>(0,re.tZ)(Xe,{children:(0,re.tZ)(Re.ZP,{priority:"primary",size:"xsmall",onClick:e,children:(0,_.t)("Collapse")})}),children:e.map(((e,r)=>{const{id:p,slug:u,newGroups:m}=e,g=c.getCrashCount(o,p,ae.zY.SESSIONS),y=c.getCrashFreeRate(o,p,n),v=c.get24hCountByProject(p,n),Z=c.getTimeSeries(o,p,n),S=c.getAdoption(o,p,n),x=(null==Z?void 0:Z[0].data.length)>7&&Z[0].data.some((e=>e.value>0)),f=t&&(null==s?void 0:s[e.slug])&&(null==s?void 0:s[e.slug].stage),b=At(e.platform),R=Boolean(v&&f&&b)&&Ue[f];return(0,re.tZ)(Ve,{children:(0,re.BX)(Qe,{showReleaseAdoptionStages:t,children:[(0,re.tZ)($e,{children:(0,re.tZ)(we.Z,{project:e,avatarSize:16})}),t&&(0,re.tZ)(Je,{children:R?(0,re.tZ)(Ce.Z,{to:{pathname:"/organizations/".concat(i.slug,"/releases/"),query:{...a.query,query:"release.stage:".concat(f)}},children:(0,re.tZ)(be.Z,{title:R.tooltipTitle,children:(0,re.tZ)(Ee.Z,{type:R.type,children:R.name})})}):(0,re.tZ)(_e.Z,{})}),(0,re.tZ)(We,{children:l?(0,re.tZ)(ot,{width:"100px"}):S&&x?(0,re.BX)(Ke,{children:[(0,re.BX)("span",{children:[Math.round(S),"%"]}),(0,re.tZ)(Ae,{data:Z,height:20,activeDisplay:n})]}):(0,re.tZ)(_e.Z,{})}),(0,re.tZ)(et,{children:l?(0,re.tZ)(ot,{width:"60px"}):(0,te.ri)(y)?(0,re.tZ)(ze.Z,{percent:y}):(0,re.tZ)(_e.Z,{})}),(0,re.tZ)(tt,{children:l?(0,re.tZ)(ot,{width:"30px"}):(0,te.ri)(g)?(0,re.tZ)(be.Z,{title:(0,_.t)("Open in Issues"),children:(0,re.tZ)(pe.Z,{to:(0,Pe.eY)(i.slug,e.id,o),children:(0,re.tZ)(W.Z,{value:g})})}):(0,re.tZ)(_e.Z,{})}),(0,re.tZ)(Ge,{children:(0,re.tZ)(be.Z,{title:(0,_.t)("Open in Issues"),children:(0,re.tZ)(pe.Z,{to:(0,Pe.PS)(i.slug,e.id,o),children:(0,re.tZ)(W.Z,{value:m||0})})})}),(0,re.tZ)(st,{children:(0,re.tZ)(h.Z,{disabled:!d||0!==r,target:"view_release",children:(0,re.tZ)(Oe.Z,{orgSlug:i.slug,project:e,releaseVersion:o,location:a})})})]})},"".concat(o,"-").concat(u,"-health"))}))})})]});Ye.displayName="Content";const Le=Ye,Fe=(0,a.Z)("div",{target:"edvvnch13"})({name:"bjn8wh",styles:"position:relative"}),Me=(0,a.Z)("div",{target:"edvvnch12"})("position:absolute;width:100%;bottom:0;display:flex;align-items:center;justify-content:center;background-image:linear-gradient(\n    180deg,\n    hsla(0, 0%, 100%, 0.15) 0,\n    ",(e=>e.theme.white),"\n  );background-repeat:repeat-x;border-bottom:",(0,z.Z)(1)," solid ",(e=>e.theme.white),";border-top:",(0,z.Z)(1)," solid transparent;border-bottom-right-radius:",(e=>e.theme.borderRadius),";@media (max-width: ",(e=>e.theme.breakpoints[1]),"){border-bottom-left-radius:",(e=>e.theme.borderRadius),";}"),Xe=(0,a.Z)("div",{target:"edvvnch11"})({name:"rsdkje",styles:"display:flex;align-items:center;justify-content:center;height:41px"}),Ve=(0,a.Z)(K.Lv,{target:"edvvnch10"})("padding:",(0,z.Z)(1)," ",(0,z.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints[1]),"){font-size:",(e=>e.theme.fontSizeMedium),";}"),Qe=(0,a.Z)("div",{target:"edvvnch9"})("display:grid;grid-template-columns:1fr 1.4fr 0.6fr 0.7fr;grid-column-gap:",(0,z.Z)(1),";align-items:center;width:100%;@media (min-width: ",(e=>e.theme.breakpoints[0]),"){grid-template-columns:1fr 1fr 1fr 0.5fr 0.5fr 0.5fr;}@media (min-width: ",(e=>e.theme.breakpoints[1]),"){grid-template-columns:1fr 1fr 1fr 0.5fr 0.5fr 0.5fr;}@media (min-width: ",(e=>e.theme.breakpoints[3]),"){",(e=>e.showReleaseAdoptionStages?"\n      grid-template-columns: 1fr 0.7fr 1fr 1fr 0.7fr 0.7fr 0.5fr;\n    ":"\n      grid-template-columns: 1fr 1fr 1fr 0.7fr 0.7fr 0.5fr;\n    "),";}"),$e=(0,a.Z)("div",{target:"edvvnch8"})(Se.Z,";line-height:20px;"),Ge=(0,a.Z)($e,{target:"edvvnch7"})("@media (min-width: ",(e=>e.theme.breakpoints[0]),"){text-align:right;}"),We=(0,a.Z)($e,{target:"edvvnch6"})("display:none;@media (min-width: ",(e=>e.theme.breakpoints[0]),"){display:flex;overflow:visible;}&>*{flex:1;}"),Je=(0,a.Z)($e,{target:"edvvnch5"})("display:none;@media (min-width: ",(e=>e.theme.breakpoints[3]),"){display:flex;overflow:visible;}"),Ke=(0,a.Z)("span",{target:"edvvnch4"})("flex:1;display:inline-grid;grid-template-columns:30px 1fr;grid-gap:",(0,z.Z)(1),";align-items:center;overflow:visible;"),et=(0,a.Z)($e,{target:"edvvnch3"})("@media (min-width: ",(e=>e.theme.breakpoints[0]),"){text-align:center;}@media (min-width: ",(e=>e.theme.breakpoints[3]),"){text-align:right;}"),tt=(0,a.Z)($e,{target:"edvvnch2"})("display:none;@media (min-width: ",(e=>e.theme.breakpoints[0]),"){display:block;text-align:right;}"),st=(0,a.Z)($e,{target:"edvvnch1"})({name:"2qga7i",styles:"text-align:right"}),ot=(0,a.Z)(ee.Z,{target:"edvvnch0"})("height:15px;display:inline-block;position:relative;top:",(0,z.Z)(.25),";");class at extends r.Component{shouldComponentUpdate(e){return!this.props.reloading||!e.reloading}render(){const{release:e,organization:t,activeDisplay:s,location:o,showPlaceholders:a,selection:i,isTopRelease:n,getHealthData:l,showReleaseAdoptionStages:d}=this.props,[c,p]=fe()(e.projects.sort(((e,t)=>e.slug.localeCompare(t.slug))),(e=>!(i.projects.length>0&&!i.projects.includes(-1))||i.projects.includes(e.id)));return(0,re.BX)(r.Fragment,{children:[(0,re.tZ)(Le,{organization:t,activeDisplay:s,releaseVersion:e.version,showReleaseAdoptionStages:d,adoptionStages:e.adoptionStages,projects:c,location:o,showPlaceholders:a,isTopRelease:n,getHealthData:l}),p.length>0&&(0,re.tZ)(rt,{children:(0,re.tZ)(be.Z,{title:function(){const e=p.map((e=>e.slug)).slice(0,5),t=p.length-e.length;return t&&e.push((0,_.tn)("and %s more","and %s more",t)),e.join(", ")}(),children:(0,re.tZ)(ye.Z,{children:1===p.length?(0,_._N)("[number:1] hidden project",{number:(0,re.tZ)("strong",{})}):(0,_._N)("[number] hidden projects",{number:(0,re.tZ)("strong",{children:p.length})})})})})]})}}at.displayName="ReleaseHealth";const rt=(0,a.Z)("div",{target:"e13ef2g50"})("display:flex;align-items:center;font-size:",(e=>e.theme.fontSizeSmall),";padding:0 ",(0,z.Z)(2),";border-top:1px solid ",(e=>e.theme.border),";overflow:hidden;height:24px;line-height:24px;color:",(e=>e.theme.gray300),";background-color:",(e=>e.theme.backgroundSecondary),";border-bottom-right-radius:",(e=>e.theme.borderRadius),";@media (max-width: ",(e=>e.theme.breakpoints[1]),"){border-bottom-left-radius:",(e=>e.theme.borderRadius),";}"),it=at;function nt(e,t){return 1===e.projects.length?e.projects[0].id:1===t.projects.length&&e.projects.map((e=>e.id)).includes(t.projects[0])?t.projects[0]:void 0}const lt=({release:e,organization:t,activeDisplay:s,location:o,reloading:a,selection:r,showHealthPlaceholders:i,isTopRelease:n,getHealthData:l,showReleaseAdoptionStages:d})=>{const{version:c,commitCount:p,lastDeploy:u,dateCreated:m,versionInfo:g}=e;return(0,re.BX)(pt,{reloading:a?1:0,children:[(0,re.BX)(ht,{children:[(0,re.BX)(yt,{children:[(0,re.tZ)(pe.Z,{to:{pathname:"/organizations/".concat(t.slug,"/releases/").concat(encodeURIComponent(c),"/"),query:{project:nt(e,r)}},children:(0,re.tZ)(h.Z,{disabled:!n,target:"release_version",children:(0,re.tZ)(dt,{children:(0,re.tZ)(ct,{version:c,tooltipRawVersion:!0,anchor:!1})})})}),p>0&&(0,re.tZ)(ge,{release:e,withHeading:!1})]}),(0,re.BX)(ut,{children:[(null==g?void 0:g.package)&&(0,re.tZ)(mt,{ellipsisDirection:"left",children:g.package}),(0,re.tZ)(ve.Z,{date:(null==u?void 0:u.dateFinished)||m}),(null==u?void 0:u.dateFinished)&&" | ".concat(u.environment)]})]}),(0,re.tZ)(gt,{children:(0,re.tZ)(it,{release:e,organization:t,activeDisplay:s,location:o,showPlaceholders:i,reloading:a,selection:r,isTopRelease:n,getHealthData:l,showReleaseAdoptionStages:d})})]})};lt.displayName="ReleaseCard";const dt=(0,a.Z)("div",{target:"e1gq4e6v7"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),ct=(0,a.Z)(Ze.Z,{target:"e1gq4e6v6"})(Se.Z,";"),pt=(0,a.Z)(K.s_,{target:"e1gq4e6v5"})("opacity:",(e=>e.reloading?.5:1),";pointer-events:",(e=>e.reloading?"none":"auto"),";@media (min-width: ",(e=>e.theme.breakpoints[1]),"){display:flex;}"),ht=(0,a.Z)("div",{target:"e1gq4e6v4"})("padding:",(0,z.Z)(1.5)," ",(0,z.Z)(2),";flex-shrink:0;@media (min-width: ",(e=>e.theme.breakpoints[1]),"){border-right:1px solid ",(e=>e.theme.border),";min-width:260px;width:22%;max-width:300px;}"),ut=(0,a.Z)("div",{target:"e1gq4e6v3"})("font-size:",(e=>e.theme.fontSizeSmall),";color:",(e=>e.theme.gray400),";"),mt=(0,a.Z)(ye.Z,{target:"e1gq4e6v2"})("font-size:",(e=>e.theme.fontSizeMedium),";color:",(e=>e.theme.textColor),";"),gt=(0,a.Z)("div",{target:"e1gq4e6v1"})("border-top:1px solid ",(e=>e.theme.border),";flex-grow:1;display:grid;@media (min-width: ",(e=>e.theme.breakpoints[1]),"){border-top:none;}"),yt=(0,a.Z)("div",{target:"e1gq4e6v0"})("font-size:",(e=>e.theme.fontSizeExtraLarge),";display:grid;grid-template-columns:minmax(0, 1fr) max-content;grid-gap:",(0,z.Z)(2),";align-items:center;"),vt=lt;var Zt=s("./app/components/dropdownControl.tsx");const St=({label:e,options:t,selected:s,onSelect:o,className:a})=>{var r;const i=Object.entries(t),n=null===(r=i.find((([e,t])=>e===s)))||void 0===r?void 0:r[1];return(0,re.tZ)(Zt.ZP,{buttonProps:{prefix:e},label:n,className:a,children:i.map((([e,t])=>(0,re.tZ)(Zt.hP,{onSelect:o,eventKey:e,isActive:s===e,children:t},e)))})};St.displayName="ReleaseListDropdown";const xt=St,ft={[ae.zY.SESSIONS]:(0,_.t)("Sessions"),[ae.zY.USERS]:(0,_.t)("Users")};function bt({selected:e,onSelect:t}){return(0,re.tZ)(jt,{label:(0,_.t)("Display"),options:ft,selected:e,onSelect:t})}bt.displayName="ReleaseListDisplayOptions";const Rt=bt,jt=(0,a.Z)(xt,{target:"e1etyrgw0"})("z-index:1;@media (max-width: ",(e=>e.theme.breakpoints[2]),"){order:3;}");function wt({selected:e,selectedDisplay:t,onSelect:s,organization:o}){const a={[ae.Y7.DATE]:(0,_.t)("Date Created"),[ae.Y7.SESSIONS]:(0,_.t)("Total Sessions"),...t===ae.zY.USERS?{[ae.Y7.USERS_24_HOURS]:(0,_.t)("Active Users"),[ae.Y7.CRASH_FREE_USERS]:(0,_.t)("Crash Free Users")}:{[ae.Y7.SESSIONS_24_HOURS]:(0,_.t)("Active Sessions"),[ae.Y7.CRASH_FREE_SESSIONS]:(0,_.t)("Crash Free Sessions")}};return o.features.includes("semver")&&(a[ae.Y7.BUILD]=(0,_.t)("Build Number"),a[ae.Y7.SEMVER]=(0,_.t)("Semantic Version")),o.features.includes("release-adoption-stage")&&(a[ae.Y7.ADOPTION]=(0,_.t)("Date Adopted")),(0,re.tZ)(_t,{label:(0,_.t)("Sort By"),options:a,selected:e,onSelect:s})}wt.displayName="ReleaseListSortOptions";const Ct=wt,_t=(0,a.Z)(xt,{target:"e1jiv4gq0"})("z-index:2;@media (max-width: ",(e=>e.theme.breakpoints[2]),"){order:2;}"),Et={[ae.L4.ACTIVE]:(0,_.t)("Active"),[ae.L4.ARCHIVED]:(0,_.t)("Archived")};function Pt({selected:e,onSelect:t}){return(0,re.tZ)(It,{label:(0,_.t)("Status"),options:Et,selected:e,onSelect:t})}Pt.displayName="ReleaseListStatusOptions";const zt=Pt,It=(0,a.Z)(xt,{target:"euhssnf0"})("z-index:3;@media (max-width: ",(e=>e.theme.breakpoints[2]),"){order:1;}");var Bt=s("./app/views/releases/list/releasePromo.tsx");const kt={"release.version":{key:"release.version",name:"release.version"},"release.build":{key:"release.build",name:"release.build"},"release.package":{key:"release.package",name:"release.package"},"release.stage":{key:"release.stage",name:"release.stage",predefined:!0,values:R.kX},release:{key:"release",name:"release"}},At=e=>[...w.ai,...w.gv,"java-android","cocoa-objc","cocoa-swift"].includes(e);class qt extends T.Z{constructor(...e){super(...e),(0,o.Z)(this,"shouldReload",!0),(0,o.Z)(this,"shouldRenderBadRequests",!0),(0,o.Z)(this,"handleSearch",(e=>{const{location:t,router:s}=this.props;s.push({...t,query:{...t.query,cursor:void 0,query:e}})})),(0,o.Z)(this,"handleSortBy",(e=>{const{location:t,router:s}=this.props;s.push({...t,query:{...t.query,cursor:void 0,sort:e}})})),(0,o.Z)(this,"handleDisplay",(e=>{const{location:t,router:s}=this.props;let o=t.query.sort;o===ae.Y7.USERS_24_HOURS&&e===ae.zY.SESSIONS?o=ae.Y7.SESSIONS_24_HOURS:o===ae.Y7.SESSIONS_24_HOURS&&e===ae.zY.USERS?o=ae.Y7.USERS_24_HOURS:o===ae.Y7.CRASH_FREE_USERS&&e===ae.zY.SESSIONS?o=ae.Y7.CRASH_FREE_SESSIONS:o===ae.Y7.CRASH_FREE_SESSIONS&&e===ae.zY.USERS&&(o=ae.Y7.CRASH_FREE_USERS),s.push({...t,query:{...t.query,cursor:void 0,display:e,sort:o}})})),(0,o.Z)(this,"handleStatus",(e=>{const{location:t,router:s}=this.props;s.push({...t,query:{...t.query,cursor:void 0,status:e}})})),(0,o.Z)(this,"trackAddReleaseHealth",(()=>{const{organization:e,selection:t}=this.props;e.id&&t.projects[0]&&(0,B.ec)({eventKey:"releases_list.click_add_release_health",eventName:"Releases List: Click Add Release Health",organization_id:parseInt(e.id,10),project_id:t.projects[0]})})),(0,o.Z)(this,"tagValueLoader",((e,t)=>{const{location:s,organization:o}=this.props,{project:a}=s.query;return(0,d.Fo)(this.api,o.slug,e,t,a?[a]:null,s.query)})),(0,o.Z)(this,"getTagValues",(async(e,t)=>(await this.tagValueLoader(e.key,t)).map((({value:e})=>e))))}getTitle(){return(0,A.Z)((0,_.t)("Releases"),this.props.organization.slug,!1)}getEndpoints(){const{organization:e,location:t}=this.props,{statsPeriod:s}=t.query,o=this.getSort(),a=this.getStatus(),r={...l()(t.query,["project","environment","cursor","query","sort"]),summaryStatsPeriod:s,per_page:20,flatten:o===ae.Y7.DATE?0:1,adoptionStages:1,status:a===ae.L4.ARCHIVED?I.dE.Archived:I.dE.Active};return[["releases","/organizations/".concat(e.slug,"/releases/"),{query:r},{disableEntireQuery:!0}]]}componentDidMount(){this.props.location.query.project&&this.fetchSessionsExistence()}componentDidUpdate(e,t){super.componentDidUpdate(e,t),e.location.query.project!==this.props.location.query.project&&this.fetchSessionsExistence(),t.releases!==this.state.releases&&(0,i.be)()}getQuery(){const{query:e}=this.props.location.query;return"string"==typeof e?e:void 0}getSort(){const{sort:e}=this.props.location.query;switch(e){case ae.Y7.CRASH_FREE_USERS:return ae.Y7.CRASH_FREE_USERS;case ae.Y7.CRASH_FREE_SESSIONS:return ae.Y7.CRASH_FREE_SESSIONS;case ae.Y7.SESSIONS:return ae.Y7.SESSIONS;case ae.Y7.USERS_24_HOURS:return ae.Y7.USERS_24_HOURS;case ae.Y7.SESSIONS_24_HOURS:return ae.Y7.SESSIONS_24_HOURS;case ae.Y7.BUILD:return ae.Y7.BUILD;case ae.Y7.SEMVER:return ae.Y7.SEMVER;case ae.Y7.ADOPTION:return ae.Y7.ADOPTION;default:return ae.Y7.DATE}}getDisplay(){const{display:e}=this.props.location.query;switch(e){case ae.zY.USERS:return ae.zY.USERS;default:return ae.zY.SESSIONS}}getStatus(){const{status:e}=this.props.location.query;switch(e){case ae.L4.ARCHIVED:return ae.L4.ARCHIVED;default:return ae.L4.ACTIVE}}getSelectedProject(){var e;const{selection:t,organization:s}=this.props,o=t.projects&&1===t.projects.length&&t.projects[0];return null===(e=s.projects)||void 0===e?void 0:e.find((e=>e.id==="".concat(o)))}async fetchSessionsExistence(){const{organization:e,location:t}=this.props,s=t.query.project;if(s){this.setState({hasSessions:null});try{const t=await this.api.requestPromise("/organizations/".concat(e.slug,"/sessions/"),{query:{project:s,field:"sum(session)",statsPeriod:"90d",interval:"1d"}});this.setState({hasSessions:t.groups[0].totals["sum(session)"]>0})}catch{}}}shouldShowLoadingIndicator(){const{loading:e,releases:t,reloading:s}=this.state;return e&&!s||e&&!(null!=t&&t.length)}renderLoading(){return this.renderBody()}renderError(){return this.renderBody()}renderEmptyMessage(){const{location:e,organization:t,selection:s}=this.props,{statsPeriod:o}=e.query,a=this.getQuery(),r=this.getSort(),i=this.getStatus();if(a&&a.length)return(0,re.tZ)(u.Z,{small:!0,children:"".concat((0,_.t)("There are no releases that match"),": '").concat(a,"'.")});if(r===ae.Y7.USERS_24_HOURS)return(0,re.tZ)(u.Z,{small:!0,children:(0,_.t)("There are no releases with active user data (users in the last 24 hours).")});if(r===ae.Y7.SESSIONS_24_HOURS)return(0,re.tZ)(u.Z,{small:!0,children:(0,_.t)("There are no releases with active session data (sessions in the last 24 hours).")});if(r===ae.Y7.BUILD||r===ae.Y7.SEMVER)return(0,re.tZ)(u.Z,{small:!0,children:(0,_.t)("There are no releases with semantic versioning.")});if(r!==ae.Y7.DATE){const e=(0,Z.T)(o||R.GY).toLowerCase();return(0,re.tZ)(u.Z,{small:!0,children:"".concat((0,_.t)("There are no releases with data in the")," ").concat(e,".")})}return i===ae.L4.ARCHIVED?(0,re.tZ)(u.Z,{small:!0,children:(0,_.t)("There are no archived releases.")}):(0,re.tZ)(Bt.Z,{organization:t,projectId:s.projects.filter((e=>e!==j.mP))[0]})}renderHealthCta(){const{organization:e}=this.props,{hasSessions:t,releases:s}=this.state,o=this.getSelectedProject();return o&&!1===t&&null!=s&&s.length?(0,re.tZ)(k.Z,{orgId:e.slug,slugs:[o.slug],children:({projects:e,initiallyLoaded:t,fetchError:s})=>{const o=e&&1===e.length&&e[0],a=o&&o.platform&&w.an.includes(o.platform);return t&&!s&&a?(0,re.tZ)(p.Z,{type:"info",icon:(0,re.tZ)(C.aU,{size:"md"}),children:(0,re.BX)(Nt,{children:[(0,re.tZ)("div",{children:(0,_.t)("To track user adoption, crash rates, session data and more, add Release Health to your current setup.")}),(0,re.tZ)(g.Z,{href:"https://docs.sentry.io/product/releases/health/setup/",onClick:this.trackAddReleaseHealth,children:(0,_.t)("Add Release Health")})]})}):null}}):null}renderInnerBody(e,t){const{location:s,selection:o,organization:a,router:i}=this.props,{hasSessions:n,releases:l,reloading:d,releasesPageLinks:p}=this.state;return this.shouldShowLoadingIndicator()?(0,re.tZ)(y.Z,{}):null!=l&&l.length?(0,re.tZ)(H.ZP,{releases:l.map((({version:e})=>e)),organization:a,selection:o,location:s,display:[this.getDisplay()],releasesReloading:d,healthStatsPeriod:s.query.healthStatsPeriod,children:({isHealthLoading:h,getHealthData:u})=>{var m;const g=1===(null===(m=o.projects)||void 0===m?void 0:m.length)&&o.projects[0]!==j.mP,y=this.getSelectedProject(),v=(null==y?void 0:y.platform)&&At(y.platform);return(0,re.BX)(r.Fragment,{children:[g&&n&&v&&(0,re.tZ)(c.Z,{features:["organizations:release-adoption-chart"],children:(0,re.tZ)(ne,{organization:a,selection:o,location:s,router:i,activeDisplay:e})}),l.map(((r,i)=>(0,re.tZ)(vt,{activeDisplay:e,release:r,organization:a,location:s,selection:o,reloading:d,showHealthPlaceholders:h,isTopRelease:0===i,getHealthData:u,showReleaseAdoptionStages:t},"".concat(r.version,"-").concat(r.projects[0].slug)))),(0,re.tZ)(x.Z,{pageLinks:p})]})}}):this.renderEmptyMessage()}renderBody(){const{organization:e,selection:t}=this.props,{releases:s,reloading:o,error:a}=this.state,r=this.getSort(),i=this.getStatus(),n=this.getDisplay(),l=e.features.includes("semver"),d=e.features.includes("release-adoption-stage"),c=t.projects.map((e=>"".concat(e))).map(E.Z.getById).some((e=>(null==e?void 0:e.platform)&&At(e.platform))),p=d&&c&&1===t.environments.length;return(0,re.tZ)(v.Z,{showAbsolute:!1,timeRangeHint:(0,_.t)("Changing this date range will recalculate the release metrics."),children:(0,re.tZ)(P.JH,{children:(0,re.BX)(m.Z,{organization:e,children:[(0,re.tZ)(P.mr,{children:(0,re.tZ)(S.Z,{children:(0,_.t)("Releases")})}),this.renderHealthCta(),(0,re.BX)(Tt,{children:[l?(0,re.tZ)(h.n,{target:"releases_search",position:"bottom",children:(0,re.tZ)(h.Z,{target:"release_stages",position:"bottom",disabled:!p,children:(0,re.tZ)(b.Z,{searchSource:"releases",query:this.getQuery(),placeholder:(0,_.t)("Search by release version"),maxSearchItems:5,hasRecentSearches:!1,supportedTags:kt,onSearch:this.handleSearch,onGetTagValues:this.getTagValues})})}):(0,re.tZ)(f.Z,{placeholder:(0,_.t)("Search"),onSearch:this.handleSearch,query:this.getQuery()}),(0,re.BX)(Dt,{children:[(0,re.tZ)(zt,{selected:i,onSelect:this.handleStatus}),(0,re.tZ)(Ct,{selected:r,selectedDisplay:n,onSelect:this.handleSortBy,organization:e}),(0,re.tZ)(Rt,{selected:n,onSelect:this.handleDisplay})]})]}),!o&&i===ae.L4.ARCHIVED&&!(null==s||!s.length)&&(0,re.tZ)(D.Z,{multi:!0}),a?super.renderError(new Error("Unable to load all required endpoints")):this.renderInnerBody(n,p)]})})})}}const Nt=(0,a.Z)("div",{target:"e14zcdo92"})("display:flex;align-items:flex-start;justify-content:flex-start;gap:",(0,z.Z)(2),";>*:nth-child(1){flex:1;}flex-direction:column;@media (min-width: ",(e=>e.theme.breakpoints[1]),"){flex-direction:row;}"),Tt=(0,a.Z)("div",{target:"e14zcdo91"})("display:flex;flex-direction:column;justify-content:stretch;margin-bottom:",(0,z.Z)(2),";>*:nth-child(1){flex:1;}@media (min-width: ",(e=>e.theme.breakpoints[2]),"){flex-direction:row;}"),Dt=(0,a.Z)("div",{target:"e14zcdo90"})("display:flex;flex-direction:column;&>*{margin-top:",(0,z.Z)(2),";}& button{width:100%;}@media (min-width: ",(e=>e.theme.breakpoints[0]),"){margin-top:",(0,z.Z)(2),";&>*{margin-top:",(0,z.Z)(0),";margin-left:",(0,z.Z)(2),";}&>*:nth-child(1){margin-left:",(0,z.Z)(0),";}display:grid;grid-template-columns:1fr 1fr 1fr;}@media (min-width: ",(e=>e.theme.breakpoints[2]),"){margin-top:",(0,z.Z)(0),";&>*{margin-left:",(0,z.Z)(2),"!important;}display:grid;grid-template-columns:auto auto auto;}"),Ht=(0,N.Z)((0,q.Z)(qt))},"./app/views/releases/list/releaseHealth/projectLink.tsx":(e,t,s)=>{s.d(t,{Z:()=>l});var o=s("./app/components/button.tsx"),a=s("./app/components/organizations/globalSelectionHeader/utils.tsx"),r=s("./app/locale.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const n=({orgSlug:e,releaseVersion:t,project:s,location:n})=>(0,i.tZ)(o.ZP,{size:"xsmall",to:{pathname:"/organizations/".concat(e,"/releases/").concat(encodeURIComponent(t),"/"),query:{...(0,a.GN)(n.query),project:s.id,yAxis:void 0}},children:(0,r.t)("View")});n.displayName="ProjectLink";const l=n},"./app/views/releases/utils/releaseHealthRequest.tsx":(e,t,s)=>{s.d(t,{Yr:()=>C,pE:()=>_,ZP:()=>P});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.array.reduce.js"),s("../node_modules/react/index.js")),r=s("../node_modules/lodash/isEqual.js"),i=s.n(r),n=s("../node_modules/lodash/omit.js"),l=s.n(n),d=s("../node_modules/lodash/pick.js"),c=s.n(d),p=s("../node_modules/moment/moment.js"),h=s.n(p),u=s("./app/actionCreators/indicator.tsx"),m=s("./app/components/charts/utils.tsx"),g=s("./app/components/organizations/globalSelectionHeader/getParams.tsx"),y=s("./app/constants/globalSelectionHeader.tsx"),v=s("./app/locale.tsx"),Z=s("./app/types/index.tsx"),S=s("./app/utils.tsx"),x=s("./app/utils/tokenizeSearch.tsx"),f=s("./app/utils/withApi.tsx"),b=s("./app/views/releases/list/utils.tsx"),R=s("./app/views/releases/utils/index.tsx");function j(e){return l()(e,["api","organization","children","selection.datetime.utc","location"])}function w(e){const t=(0,m.Nm)(e);return t>=m.$i?"1d":t>=m.IZ?"6h":t>m.w3?"4h":"1h"}function C(e,t,s){var o;return null===(o=t.series[s])||void 0===o||o.forEach(((t,s)=>{var o;return e[s]=(null!==(o=e[s])&&void 0!==o?o:0)+t})),e}function _(e){switch(e){case b.zY.USERS:return"count_unique(user)";case b.zY.SESSIONS:default:return"sum(session)"}}class E extends a.Component{constructor(...e){super(...e),(0,o.Z)(this,"state",{loading:!1,errored:!1,statusCountByReleaseInPeriod:null,totalCountByReleaseIn24h:null,totalCountByProjectIn24h:null,statusCountByProjectInPeriod:null}),(0,o.Z)(this,"fetchData",(async()=>{const{api:e,healthStatsPeriod:t,disable:s}=this.props;if(s)return;e.clear(),this.setState({loading:!0,errored:!1,statusCountByReleaseInPeriod:null,totalCountByReleaseIn24h:null,totalCountByProjectIn24h:null});const o=[this.fetchStatusCountByReleaseInPeriod(),this.fetchTotalCountByReleaseIn24h(),this.fetchTotalCountByProjectIn24h()];t===Z.$A.AUTO&&o.push(this.fetchStatusCountByProjectInPeriod());try{const[e,t,s,a]=await Promise.all(o);this.setState({loading:!1,statusCountByReleaseInPeriod:e,totalCountByReleaseIn24h:t,totalCountByProjectIn24h:s,statusCountByProjectInPeriod:a})}catch(e){var a,r;(0,u.Iw)(null!==(a=null===(r=e.responseJSON)||void 0===r?void 0:r.detail)&&void 0!==a?a:(0,v.t)("Error loading health data")),this.setState({loading:!1,errored:!0})}})),(0,o.Z)(this,"getHealthData",(()=>({getCrashCount:this.getCrashCount,getCrashFreeRate:this.getCrashFreeRate,get24hCountByRelease:this.get24hCountByRelease,get24hCountByProject:this.get24hCountByProject,getTimeSeries:this.getTimeSeries,getAdoption:this.getAdoption}))),(0,o.Z)(this,"getCrashCount",((e,t,s)=>{var o;const{statusCountByReleaseInPeriod:a}=this.state,r=_(s);return null==a||null===(o=a.groups.find((({by:s})=>s.release===e&&s.project===t&&"crashed"===s["session.status"])))||void 0===o?void 0:o.totals[r]})),(0,o.Z)(this,"getCrashFreeRate",((e,t,s)=>{var o;const{statusCountByReleaseInPeriod:a}=this.state,r=_(s),i=null==a||null===(o=a.groups.filter((({by:s})=>s.release===e&&s.project===t)))||void 0===o?void 0:o.reduce(((e,t)=>e+t.totals[r]),0),n=this.getCrashCount(e,t,s);return(0,S.ri)(i)&&0!==i?(0,R.Mf)(100-(0,S.aQ)(null!=n?n:0,null!=i?i:0)):null})),(0,o.Z)(this,"get24hCountByRelease",((e,t,s)=>{var o;const{totalCountByReleaseIn24h:a}=this.state,r=_(s);return null==a||null===(o=a.groups.filter((({by:s})=>s.release===e&&s.project===t)))||void 0===o?void 0:o.reduce(((e,t)=>e+t.totals[r]),0)})),(0,o.Z)(this,"get24hCountByProject",((e,t)=>{var s;const{totalCountByProjectIn24h:o}=this.state,a=_(t);return null==o||null===(s=o.groups.filter((({by:t})=>t.project===e)))||void 0===s?void 0:s.reduce(((e,t)=>e+t.totals[a]),0)})),(0,o.Z)(this,"getTimeSeries",((e,t,s)=>{const{healthStatsPeriod:o}=this.props;return o===Z.$A.AUTO?this.getPeriodTimeSeries(e,t,s):this.get24hTimeSeries(e,t,s)})),(0,o.Z)(this,"get24hTimeSeries",((e,t,s)=>{var o,a,r;const{totalCountByReleaseIn24h:i,totalCountByProjectIn24h:n}=this.state,l=_(s),d=null!==(o=null==n?void 0:n.intervals)&&void 0!==o?o:[],c=null==n||null===(a=n.groups.find((({by:e})=>e.project===t)))||void 0===a?void 0:a.series[l],p=null==i||null===(r=i.groups.find((({by:s})=>s.project===t&&s.release===e)))||void 0===r?void 0:r.series[l];return[{seriesName:(0,v.t)("This Release"),data:null==d?void 0:d.map(((e,t)=>{var s;return{name:h()(e).valueOf(),value:null!==(s=null==p?void 0:p[t])&&void 0!==s?s:0}}))},{seriesName:(0,v.t)("Total Project"),data:null==d?void 0:d.map(((e,t)=>{var s;return{name:h()(e).valueOf(),value:null!==(s=null==c?void 0:c[t])&&void 0!==s?s:0}})),z:0}]})),(0,o.Z)(this,"getPeriodTimeSeries",((e,t,s)=>{var o,a,r;const{statusCountByReleaseInPeriod:i,statusCountByProjectInPeriod:n}=this.state,l=_(s),d=null!==(o=null==n?void 0:n.intervals)&&void 0!==o?o:[],c=null==n||null===(a=n.groups.filter((({by:e})=>e.project===t)))||void 0===a?void 0:a.reduce(((e,t)=>C(e,t,l)),[]),p=null==i||null===(r=i.groups.filter((({by:s})=>s.project===t&&s.release===e)))||void 0===r?void 0:r.reduce(((e,t)=>C(e,t,l)),[]);return[{seriesName:(0,v.t)("This Release"),data:null==d?void 0:d.map(((e,t)=>{var s;return{name:h()(e).valueOf(),value:null!==(s=null==p?void 0:p[t])&&void 0!==s?s:0}}))},{seriesName:(0,v.t)("Total Project"),data:null==d?void 0:d.map(((e,t)=>{var s;return{name:h()(e).valueOf(),value:null!==(s=null==c?void 0:c[t])&&void 0!==s?s:0}})),z:0}]})),(0,o.Z)(this,"getAdoption",((e,t,s)=>{const o=this.get24hCountByRelease(e,t,s),a=this.get24hCountByProject(t,s);return(0,S.ri)(o)&&(0,S.ri)(a)?(0,S.aQ)(o,a):void 0}))}componentDidMount(){this.fetchData()}componentDidUpdate(e){this.props.releasesReloading||i()(j(e),j(this.props))||this.fetchData()}get path(){const{organization:e}=this.props;return"/organizations/".concat(e.slug,"/sessions/")}get baseQueryParams(){const{location:e,selection:t,defaultStatsPeriod:s,releases:o}=this.props;return{query:new x.an(o.reduce(((e,t,s,o)=>(e.push('release:"'.concat(t,'"')),s<o.length-1&&e.push("OR"),e)),[])).formatString(),interval:w(t.datetime),...(0,g.Q)(c()(e.query,Object.values(y.nF)),{defaultStatsPeriod:s})}}async fetchStatusCountByReleaseInPeriod(){const{api:e,display:t}=this.props;return await e.requestPromise(this.path,{query:{...this.baseQueryParams,field:[...new Set([...t.map((e=>_(e))),"sum(session)"])],groupBy:["project","release","session.status"]}})}async fetchStatusCountByProjectInPeriod(){const{api:e,display:t}=this.props;return await e.requestPromise(this.path,{query:{...this.baseQueryParams,query:void 0,field:[...new Set([...t.map((e=>_(e))),"sum(session)"])],groupBy:["project","session.status"]}})}async fetchTotalCountByReleaseIn24h(){const{api:e,display:t}=this.props;return await e.requestPromise(this.path,{query:{...this.baseQueryParams,field:t.map((e=>_(e))),groupBy:["project","release"],interval:"1h",statsPeriod:"24h"}})}async fetchTotalCountByProjectIn24h(){const{api:e,display:t}=this.props;return await e.requestPromise(this.path,{query:{...this.baseQueryParams,query:void 0,field:t.map((e=>_(e))),groupBy:["project"],interval:"1h",statsPeriod:"24h"}})}render(){const{loading:e,errored:t}=this.state,{children:s}=this.props;return s({isHealthLoading:e,errored:t,getHealthData:this.getHealthData()})}}E.displayName="ReleaseHealthRequest";const P=(0,f.Z)(E)}}]);
//# sourceMappingURL=../sourcemaps/app_views_releases_list_index_tsx.d7817de24c72fb9e23886a2c0941ef5e.js.map