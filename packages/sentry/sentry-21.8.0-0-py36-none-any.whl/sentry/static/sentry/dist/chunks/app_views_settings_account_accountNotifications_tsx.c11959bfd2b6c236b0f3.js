"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_account_accountNotifications_tsx"],{"./app/views/settings/account/accountNotifications.tsx":(t,e,i)=>{i.r(e),i.d(e,{default:()=>P});var n=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=i("./app/components/alertLink.tsx"),o=i("./app/components/links/link.tsx"),a=i("./app/components/panels/index.tsx"),c=i("./app/data/forms/accountNotificationSettings.tsx"),r=i("./app/icons/index.tsx"),l=i("./app/locale.tsx"),p=i("./app/utils/withOrganizations.tsx"),d=i("./app/views/asyncView.tsx"),u=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),m=(i("../node_modules/core-js/modules/web.dom-collections.iterator.js"),i("../node_modules/core-js/modules/es.object.from-entries.js"),i("../node_modules/react/index.js")),f=i("./app/components/asyncComponent.tsx"),g=i("./app/views/settings/account/notifications/constants.tsx"),h=i("./app/views/settings/account/notifications/feedbackAlert.tsx"),x=i("./app/views/settings/account/notifications/fields2.tsx"),Z=i("./app/views/settings/account/notifications/utils.tsx"),y=i("./app/views/settings/components/forms/form.tsx"),w=i("./app/views/settings/components/forms/jsonForm.tsx"),v=i("./app/views/settings/components/settingsPageHeader.tsx"),b=i("./app/views/settings/components/text/textBlock.tsx"),j=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class k extends f.Z{constructor(...t){super(...t),(0,u.Z)(this,"getStateToPutForDefault",((t,e)=>{const{notificationSettings:i}=this.state,n=(0,Z.zD)(e,i,t,(0,Z.Vy)(e,i));return this.setState({notificationSettings:(0,Z.r_)(i,n)}),n}))}getDefaultState(){return{...super.getDefaultState(),notificationSettings:{},legacyData:{}}}getEndpoints(){return[["notificationSettings","/users/me/notification-settings/"],["legacyData","/users/me/notifications/"]]}getInitialData(){const{notificationSettings:t}=this.state;return Object.fromEntries(g.cH.map((e=>[e,(0,Z._M)(e,t)])))}getFields(){return g.cH.map((t=>Object.assign({},x.u[t],{getData:e=>this.getStateToPutForDefault(e,t),help:(0,j.BX)(m.Fragment,{children:[x.u[t].help,"Â ",(0,j.tZ)(o.Z,{to:"/settings/account/notifications/".concat(t),children:"Fine tune"})]})})))}renderBody(){const{legacyData:t}=this.state;return(0,j.BX)(m.Fragment,{children:[(0,j.tZ)(v.Z,{title:"Notifications"}),(0,j.tZ)(b.Z,{children:"Personal notifications sent via email or an integration."}),(0,j.tZ)(h.Z,{}),(0,j.tZ)(y.Z,{saveOnBlur:!0,apiMethod:"PUT",apiEndpoint:"/users/me/notification-settings/",initialData:this.getInitialData(),children:(0,j.tZ)(w.Z,{title:(0,l.t)("Notifications"),fields:this.getFields()})}),(0,j.tZ)(y.Z,{initialData:t,saveOnBlur:!0,apiMethod:"PUT",apiEndpoint:"/users/me/notifications/",children:(0,j.tZ)(w.Z,{title:(0,l.t)("My Activity"),fields:g.uJ.map((t=>x.u[t]))})}),(0,j.tZ)(s.Z,{to:"/settings/account/emails",icon:(0,j.tZ)(r.h,{}),children:(0,l.t)("Looking to add or remove an email address? Use the emails panel.")})]})}}const F=k,D={[(0,l.t)("Alerts")]:{text:(0,l.t)("Fine tune alerts by project"),path:"alerts/"},[(0,l.t)("Workflow Notifications")]:{text:(0,l.t)("Fine tune workflow notifications by project"),path:"workflow/"},[(0,l.t)("Email Routing")]:{text:(0,l.t)("Fine tune email routing by project"),path:"email/"},[(0,l.t)("Weekly Reports")]:{text:(0,l.t)("Fine tune weekly reports by organization"),path:"reports/"},[(0,l.t)("Deploy Notifications")]:{text:(0,l.t)("Fine tune deploy notifications by organization"),path:"deploy/"}};class _ extends d.Z{getEndpoints(){return[["data","/users/me/notifications/"]]}getTitle(){return"Notifications"}renderBody(){var t;const{organizations:e}=this.props;return e.some((t=>t.features.includes("notification-platform")))?(0,j.tZ)(F,{}):(0,j.BX)("div",{children:[(0,j.tZ)(v.Z,{title:"Notifications"}),(0,j.BX)(y.Z,{initialData:null!==(t=this.state.data)&&void 0!==t?t:void 0,saveOnBlur:!0,apiMethod:"PUT",apiEndpoint:"/users/me/notifications/",children:[(0,j.tZ)(w.Z,{forms:c.default,renderFooter:({title:t})=>"string"!=typeof t?null:D[t]?(0,j.tZ)(N,{...D[t]}):null}),(0,j.tZ)(s.Z,{to:"/settings/account/emails",icon:(0,j.tZ)(r.h,{}),children:(0,l.t)("Looking to add or remove an email address? Use the emails panel.")})]})]})}}const B=(0,n.Z)(o.Z,{target:"e1cykyhu0"})({name:"1qiutca",styles:"display:flex;justify-content:space-between;padding:15px 20px;color:inherit"});var S={name:"1yf43ri",styles:"border-top:none"};const N=({path:t,text:e})=>(0,j.tZ)(a.jH,{css:S,children:(0,j.BX)(B,{to:"/settings/account/notifications/".concat(t),children:[(0,j.tZ)("span",{children:e}),(0,j.tZ)(r.g6,{direction:"right",size:"15px"})]})});N.displayName="FineTuningFooter";const P=(0,p.Z)(_)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_account_accountNotifications_tsx.3123ff2bdd6e044e20ae1ef0e29bd1b8.js.map