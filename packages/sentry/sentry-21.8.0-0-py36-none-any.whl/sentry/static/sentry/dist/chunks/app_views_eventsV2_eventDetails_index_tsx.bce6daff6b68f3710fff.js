"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_eventsV2_eventDetails_index_tsx"],{"./app/views/eventsV2/breadcrumb.tsx":(e,t,s)=>{s.d(t,{Z:()=>c});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=s("../node_modules/react/index.js"),i=s("./app/components/breadcrumbs.tsx"),o=s("./app/locale.tsx"),a=s("./app/utils/discover/urls.tsx"),l=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class p extends r.Component{getCrumbs(){const e=[],{eventView:t,event:s,organization:n,location:r}=this.props,i=n.features.includes("discover-query")?{pathname:(0,a.zR)(n),query:{...r.query,...t.generateBlankQueryStringObject(),...t.getGlobalSelectionQuery()}}:null;return e.push({to:i,label:(0,o.t)("Discover")}),t&&t.isValid()&&e.push({to:t.getResultsViewUrlTarget(n.slug),label:t.name||""}),s&&e.push({label:(0,o.t)("Event Detail")}),e}render(){return(0,l.tZ)(i.Z,{crumbs:this.getCrumbs()})}}p.displayName="DiscoverBreadcrumb",(0,n.Z)(p,"defaultProps",{event:void 0});const c=p},"./app/views/eventsV2/eventDetails/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>we});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.string.trim.js"),s("../node_modules/react/index.js")),o=s("./app/components/lightWeightNoProjectMessage.tsx"),a=s("./app/components/sentryDocumentTitle.tsx"),l=s("./app/locale.tsx"),p=s("./app/styles/organization.tsx"),c=s("./app/utils/discover/eventView.tsx"),d=s("./app/utils/withOrganization.tsx"),u=s("./app/components/acl/feature.tsx"),g=s("./app/components/asyncComponent.tsx"),m=s("./app/components/button.tsx"),v=s("./app/components/buttonBar.tsx"),h=s("./app/components/errors/notFound.tsx"),Z=s("./app/components/eventOrGroupTitle.tsx"),x=s("./app/components/events/eventEntries.tsx"),y=s("./app/components/events/eventMessage.tsx"),b=s("./app/components/events/eventVitals.tsx"),f=s("./app/components/events/interfaces/spans/context.tsx"),w=s("./app/components/fileSize.tsx"),S=s("./app/components/layouts/thirds.tsx"),j=s("./app/components/loadingError.tsx"),z=s("./app/components/loadingIndicator.tsx"),k=s("./app/components/tagsTable.tsx"),V=s("./app/icons/index.tsx"),B=s("./app/styles/space.tsx"),I=s("./app/utils/analytics.tsx"),T=s("./app/utils/discover/fields.tsx"),D=s("./app/utils/discover/urls.tsx"),E=s("./app/utils/events.tsx"),C=s("./app/utils/performance/quickTrace/quickTraceContext.tsx"),_=s("./app/utils/performance/quickTrace/quickTraceQuery.tsx"),q=s("./app/utils/performance/quickTrace/traceMetaQuery.tsx"),P=s("./app/utils/performance/quickTrace/utils.tsx"),X=s("./app/utils/projects.tsx"),N=s("./app/views/performance/transactionDetails/eventMetas.tsx"),O=s("./app/views/performance/transactionSummary/utils.tsx"),F=s("./app/views/eventsV2/breadcrumb.tsx"),M=s("./app/views/eventsV2/utils.tsx"),L=s("./app/components/alert.tsx"),Q=s("./app/components/charts/styles.tsx"),U=s("./app/components/timeSince.tsx"),G=s("./app/styles/overflowEllipsis.tsx"),R=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const H=({lastSeen:e,firstSeen:t})=>(0,R.tZ)(J,{children:(0,R.BX)(K,{children:[e&&(0,R.BX)(i.Fragment,{children:[(0,R.tZ)(W,{size:"11px"}),(0,R.tZ)(U.Z,{date:e,suffix:(0,l.t)("ago")})]}),t&&e&&(0,R.tZ)("span",{className:"hidden-xs hidden-sm",children:" — "}),t&&(0,R.tZ)(U.Z,{date:t,suffix:(0,l.t)("old"),className:"hidden-xs hidden-sm"})]})});H.displayName="Times";const J=(0,r.Z)("div",{target:"e1pb87w32"})({name:"bk4x30",styles:"flex-shrink:1;min-width:0"}),K=(0,r.Z)("div",{target:"e1pb87w31"})(G.Z,"display:flex;align-items:center;"),W=(0,r.Z)(V.jo,{target:"e1pb87w30"})("margin-right:",(0,B.Z)(.5),";"),A=H;var $=s("./app/components/idBadge/projectBadge.tsx"),Y=s("./app/components/links/link.tsx"),ee=s("./app/components/placeholder.tsx"),te=s("./app/components/seenByList.tsx"),se=s("./app/components/shortId.tsx"),ne=s("./app/components/stream/groupChart.tsx");class re extends g.Z{getEndpoints(){const{groupId:e}=this.props;return[["group","/issues/".concat(e,"/")]]}renderLoading(){return(0,R.tZ)(ee.Z,{height:"120px",bottomGutter:2})}renderError(e,t=!1,s=!1){const{errors:n}=this.state;return Object.values(n).find((e=>e&&404===e.status))?(0,R.tZ)(L.Z,{type:"warning",icon:(0,R.tZ)(V.FC,{size:"md"}),children:(0,l.t)("The linked issue cannot be found. It may have been deleted, or merged.")}):super.renderError(e,t,s)}renderBody(){const{eventId:e}=this.props,{group:t}=this.state,s="".concat(t.permalink,"events/").concat(e,"/");return(0,R.BX)(ie,{children:[(0,R.tZ)(Q.OT,{children:(0,l.t)("Event Issue")}),(0,R.BX)(oe,{children:[(0,R.BX)(ae,{children:[(0,R.tZ)(le,{to:s,"data-test-id":"linked-issue",children:(0,R.tZ)(de,{shortId:t.shortId,avatar:(0,R.tZ)($.Z,{project:t.project,avatarSize:16,hideName:!0,disableLink:!0})})}),(0,R.tZ)(ce,{seenBy:t.seenBy,maxVisibleAvatars:5})]}),(0,R.tZ)(pe,{children:(0,R.tZ)(ne.Z,{statsPeriod:"30d",data:t,height:56})}),(0,R.tZ)(ue,{children:(0,R.tZ)(A,{lastSeen:t.lastSeen,firstSeen:t.firstSeen})})]})]})}}const ie=(0,r.Z)("div",{target:"e1wtoeov7"})("margin-bottom:",(0,B.Z)(4),";"),oe=(0,r.Z)("div",{target:"e1wtoeov6"})("border:1px solid ",(e=>e.theme.border),";border-radius:",(e=>e.theme.borderRadius),";"),ae=(0,r.Z)("div",{target:"e1wtoeov5"})("display:flex;align-items:center;justify-content:space-between;padding:",(0,B.Z)(1),";"),le=(0,r.Z)(Y.Z,{target:"e1wtoeov4"})({name:"11g6mpt",styles:"justify-content:flex-start"}),pe=(0,r.Z)("div",{target:"e1wtoeov3"})("background:",(e=>e.theme.backgroundSecondary),";padding-top:",(0,B.Z)(1),";"),ce=(0,r.Z)(te.Z,{target:"e1wtoeov2"})({name:"ti75j2",styles:"margin:0"}),de=(0,r.Z)(se.Z,{target:"e1wtoeov1"})("font-size:",(e=>e.theme.fontSizeMedium),";color:",(e=>e.theme.textColor),";"),ue=(0,r.Z)("div",{target:"e1wtoeov0"})("color:",(e=>e.theme.gray300),";font-size:",(e=>e.theme.fontSizeSmall),";padding:",(0,B.Z)(.5)," ",(0,B.Z)(1),";"),ge=re,me=new Set(["release"]);class ve extends g.Z{constructor(...e){super(...e),(0,n.Z)(this,"state",{loading:!0,reloading:!1,error:!1,errors:{},event:void 0,isSidebarVisible:!0}),(0,n.Z)(this,"toggleSidebar",(()=>{this.setState({isSidebarVisible:!this.state.isSidebarVisible})})),(0,n.Z)(this,"generateTagKey",(e=>e.key in T.wZ&&!me.has(e.key)?"tags[".concat(e.key,"]"):e.key)),(0,n.Z)(this,"generateTagUrl",(e=>{const{eventView:t,organization:s}=this.props,{event:n}=this.state;if(!n)return"";const r={...n};r.id&&delete r.id;const i=this.generateTagKey(e);return(0,M.Bn)(t,{[i]:e.value},r).getResultsViewUrlTarget(s.slug)})),(0,n.Z)(this,"getEventSlug",(()=>{const{eventSlug:e}=this.props.params;return"string"==typeof e?e.trim():""}))}getEndpoints(){const{organization:e,params:t,location:s,eventView:n}=this.props,{eventSlug:r}=t,i=n.getEventsAPIPayload(s);return i.field=[],[["event","/organizations/".concat(e.slug,"/events/").concat(r,"/"),{query:i}]]}get projectId(){return this.props.eventSlug.split(":")[0]}renderBody(){const{event:e}=this.state;return e?this.renderContent(e):(0,R.tZ)(h.Z,{})}renderContent(e){var t;const{organization:s,location:n,eventView:r}=this.props,{isSidebarVisible:o}=this.state;(0,I.ec)({eventKey:"discover_v2.event_details",eventName:"Discoverv2: Opened Event Details",event_type:e.type,organization_id:parseInt(s.id,10)});const a=null===(t=e.tags.find((e=>"transaction"===e.key)))||void 0===t?void 0:t.value,p="transaction"===e.type&&a?(0,O.e1)({orgSlug:s.slug,transaction:a,projectID:e.projectID,query:n.query}):null,c="/api/0/projects/".concat(s.slug,"/").concat(this.projectId,"/events/").concat(e.eventID,"/json/"),d=(t,a)=>{var d;return(0,R.BX)(i.Fragment,{children:[(0,R.BX)(S.h4,{children:[(0,R.BX)(S.oB,{children:[(0,R.tZ)(F.Z,{eventView:r,event:e,organization:s,location:n}),(0,R.tZ)(he,{event:e})]}),(0,R.tZ)(S.kP,{children:(0,R.BX)(v.ZP,{gap:1,children:[(0,R.tZ)(m.ZP,{onClick:this.toggleSidebar,children:o?"Hide Details":"Show Details"}),(0,R.BX)(m.ZP,{icon:(0,R.tZ)(V.V$,{}),href:c,external:!0,children:[(0,l.t)("JSON")," (",(0,R.tZ)(w.Z,{bytes:e.size}),")"]}),p&&(0,R.tZ)(u.Z,{organization:s,features:["performance-view"],children:({hasFeature:e})=>(0,R.tZ)(m.ZP,{disabled:!e,priority:"primary",to:p,children:(0,l.t)("Go to Summary")})})]})})]}),(0,R.BX)(S.uT,{children:[(0,R.tZ)(S.or,{fullWidth:!0,children:(0,R.tZ)(N.Z,{quickTrace:null!=t?t:null,meta:null!==(d=null==a?void 0:a.meta)&&void 0!==d?d:null,event:e,organization:s,projectId:this.projectId,location:n,errorDest:"discover",transactionDest:"discover"})}),(0,R.tZ)(S.or,{fullWidth:!o,children:(0,R.tZ)(X.Z,{orgId:s.slug,slugs:[this.projectId],children:({projects:i,initiallyLoaded:o})=>o?(0,R.tZ)(f.z,{value:{getViewChildTransactionTarget:e=>({pathname:(0,D.lS)({eventSlug:e.eventSlug,orgSlug:s.slug}),query:r.generateQueryStringObject()})},children:(0,R.tZ)(C.z,{value:t,children:(0,R.tZ)(x.j,{organization:s,event:e,project:i[0],location:n,showExampleCommit:!1,showTagSummary:!1,api:this.api,isBorderless:!0})})}):(0,R.tZ)(z.Z,{})})}),o&&(0,R.BX)(S.MF,{children:[(0,R.tZ)(b.Z,{event:e}),e.groupID&&(0,R.tZ)(ge,{groupId:e.groupID,eventId:e.eventID}),(0,R.tZ)(k.Z,{generateUrl:this.generateTagUrl,event:e,query:r.query})]})]})]})};if(s.features.includes("performance-view")){var g,h,Z;const t=null!==(g=null===(h=e.contexts)||void 0===h||null===(Z=h.trace)||void 0===Z?void 0:Z.trace_id)&&void 0!==g?g:"",{start:r,end:i}=(0,P.$J)(e);return(0,R.tZ)(q.Z,{location:n,orgSlug:s.slug,traceId:t,start:r,end:i,children:t=>(0,R.tZ)(_.Z,{event:e,location:n,orgSlug:s.slug,children:e=>d(e,t)})})}return d()}renderError(e){const t=Object.values(this.state.errors).find((e=>e&&404===e.status)),s=Object.values(this.state.errors).find((e=>e&&403===e.status));return t?(0,R.tZ)(h.Z,{}):s?(0,R.tZ)(j.Z,{message:(0,l.t)("You do not have permission to view that event.")}):super.renderError(e,!0,!0)}renderComponent(){const{eventView:e,organization:t}=this.props,{event:s}=this.state,n=this.getEventSlug().split(":")[0],r=(0,M.zt)({eventView:e,event:s,organization:t});return(0,R.tZ)(a.Z,{title:r,orgSlug:t.slug,projectSlug:n,children:super.renderComponent()})}}const he=({event:e})=>{const t=(0,E.FC)(e);return(0,R.BX)(Ze,{"data-test-id":"event-header",children:[(0,R.tZ)(xe,{children:(0,R.tZ)(Z.Z,{data:e})}),t&&(0,R.tZ)(ye,{children:(0,R.tZ)(y.Z,{message:t})})]})};he.displayName="EventHeader";const Ze=(0,r.Z)("div",{target:"eis1z1e2"})("max-width:",(e=>e.theme.breakpoints[0]),";"),xe=(0,r.Z)("div",{target:"eis1z1e1"})("font-size:",(e=>e.theme.headerFontSize),";margin-top:20px;"),ye=(0,r.Z)("div",{target:"eis1z1e0"})("margin-top:",(0,B.Z)(1),";"),be=ve;class fe extends i.Component{constructor(...e){super(...e),(0,n.Z)(this,"getEventSlug",(()=>{const{eventSlug:e}=this.props.params;return"string"==typeof e?e.trim():""})),(0,n.Z)(this,"getEventView",(()=>{const{location:e}=this.props;return c.ZP.fromLocation(e)})),(0,n.Z)(this,"getDocumentTitle",(e=>"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,l.t)("Discover")]:[(0,l.t)("Discover")]))}render(){const{organization:e,location:t,params:s}=this.props,n=this.getEventView(),r=this.getEventSlug(),i=this.getDocumentTitle(n.name).join(" - "),l=r.split(":")[0];return(0,R.tZ)(a.Z,{title:i,orgSlug:e.slug,projectSlug:l,children:(0,R.tZ)(Se,{children:(0,R.tZ)(o.Z,{organization:e,children:(0,R.tZ)(be,{organization:e,location:t,params:s,eventView:n,eventSlug:r})})})})}}fe.displayName="EventDetails";const we=(0,d.Z)(fe),Se=(0,r.Z)(p.JH,{target:"e1nc8qts0"})({name:"1hcx8jb",styles:"padding:0"})}}]);
//# sourceMappingURL=../sourcemaps/app_views_eventsV2_eventDetails_index_tsx.186219a5c685d19bbc62eacf2bd5b457.js.map