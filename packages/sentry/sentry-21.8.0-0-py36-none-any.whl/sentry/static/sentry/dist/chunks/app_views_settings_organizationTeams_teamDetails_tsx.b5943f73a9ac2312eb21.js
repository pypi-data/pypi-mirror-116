"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_organizationTeams_teamDetails_tsx","app_components_sentryDocumentTitle_tsx"],{"./app/actionCreators/teams.tsx":(t,e,s)=>{s.d(e,{eM:()=>m,z_:()=>d,fs:()=>l,um:()=>u,s:()=>p,Cm:()=>g,tT:()=>h}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var a=s("./app/actionCreators/indicator.tsx"),o=s("./app/actions/teamActions.tsx"),n=s("./app/locale.tsx"),r=s("./app/utils/callIfFunction.tsx"),i=s("./app/utils/guid.tsx");const c=(t={},e,...s)=>{(0,r.g)(t[e],...s)};function m(t,e,s){return o.Z.fetchDetails(e.teamId),t.request("/teams/".concat(e.orgId,"/").concat(e.teamId,"/"),{success:t=>{o.Z.fetchDetailsSuccess(e.teamId,t),c(s,"success",t)},error:t=>{o.Z.fetchDetailsError(e.teamId,t),c(s,"error",t)}})}function d(t,e){o.Z.updateSuccess(t,e)}function l(t,e,s){const a="/teams/".concat(e.orgId,"/").concat(e.teamId,"/");return o.Z.update(e.teamId,e.data),t.request(a,{method:"PUT",data:e.data,success:t=>{d(e.teamId,t),c(s,"success",t)},error:t=>{o.Z.updateError(e.teamId,t),c(s,"error",t)}})}function u(t,e,s){var a;const n="/organizations/".concat(e.orgId,"/members/").concat(null!==(a=e.memberId)&&void 0!==a?a:"me","/teams/").concat(e.teamId,"/"),r=(0,i.E)();return o.Z.update(r,e.teamId),t.request(n,{method:"POST",success:t=>{o.Z.updateSuccess(e.teamId,t),c(s,"success",t)},error:t=>{o.Z.updateError(r,e.teamId,t),c(s,"error",t)}})}function p(t,e,s){const a="/organizations/".concat(e.orgId,"/members/").concat(e.memberId||"me","/teams/").concat(e.teamId,"/"),n=(0,i.E)();return o.Z.update(n,e.teamId),t.request(a,{method:"DELETE",success:t=>{o.Z.updateSuccess(e.teamId,t),c(s,"success",t)},error:t=>{o.Z.updateError(n,e.teamId,t),c(s,"error",t)}})}function g(t,e,s){return o.Z.createTeam(e),t.requestPromise("/organizations/".concat(s.orgId,"/teams/"),{method:"POST",data:e}).then((t=>(o.Z.createTeamSuccess(t),(0,a.S9)((0,n._N)("[team] has been added to the [organization] organization",{team:"#".concat(t.slug),organization:s.orgId})),t)),(t=>{throw o.Z.createTeamError(e.slug,t),(0,a.Iw)((0,n._N)("Unable to create [team] in the [organization] organization",{team:"#".concat(e.slug),organization:s.orgId})),t}))}function h(t,e){return o.Z.removeTeam(e.teamId),t.requestPromise("/teams/".concat(e.orgId,"/").concat(e.teamId,"/"),{method:"DELETE"}).then((t=>(o.Z.removeTeamSuccess(e.teamId,t),(0,a.S9)((0,n._N)("[team] has been removed from the [organization] organization",{team:"#".concat(e.teamId),organization:e.orgId})),t)),(t=>{throw o.Z.removeTeamError(e.teamId,t),(0,a.Iw)((0,n._N)("Unable to remove [team] from the [organization] organization",{team:"#".concat(e.teamId),organization:e.orgId})),t}))}},"./app/components/sentryDocumentTitle.tsx":(t,e,s)=>{s.d(e,{Z:()=>i}),s("../node_modules/react/index.js");var a=s("../node_modules/react-document-title/index.js"),o=s.n(a),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r({title:t,orgSlug:e,projectSlug:s,children:a}){const r=e||s?e&&s?"".concat(t," - ").concat(e," - ").concat(s):e?"".concat(t," - ").concat(e):"".concat(t," - ").concat(s):t;return(0,n.tZ)(o(),{title:"".concat(r," - Sentry"),children:a})}r.displayName="SentryDocumentTitle";const i=r},"./app/utils/recreateRoute.tsx":(t,e,s)=>{s.d(e,{Z:()=>r});var a=s("../node_modules/lodash/findLastIndex.js"),o=s.n(a),n=s("./app/utils/replaceRouterParams.tsx");function r(t,e){var s,a;const{routes:r,params:i,location:c,stepBack:m}=e,d=r.map((({path:t})=>t||""));let l,u;"string"!=typeof t?(u=r.indexOf(t)+1,l=o()(d.slice(0,u),(t=>"/"===t[0]))):l=o()(d,(t=>"/"===t[0]));let p=d.slice(l,u);void 0!==m&&(p=p.slice(0,m));const g=null!==(s=null==c?void 0:c.search)&&void 0!==s?s:"",h=null!==(a=null==c?void 0:c.hash)&&void 0!==a?a:"",Z="".concat(p.join("")).concat("string"!=typeof t?"":t).concat(g).concat(h);return(0,n.Z)(Z,i)}},"./app/views/settings/organizationTeams/teamDetails.tsx":(t,e,s)=>{s.r(e),s.d(e,{default:()=>w});var a=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/react/index.js")),r=s("../node_modules/react-router/es/index.js"),i=s("../node_modules/lodash/isEqual.js"),c=s.n(i),m=s("./app/actionCreators/indicator.tsx"),d=s("./app/actionCreators/teams.tsx"),l=s("./app/components/alert.tsx"),u=s("./app/components/button.tsx"),p=s("./app/components/idBadge/index.tsx"),g=s("./app/components/links/listLink.tsx"),h=s("./app/components/loadingError.tsx"),Z=s("./app/components/loadingIndicator.tsx"),I=s("./app/components/navTabs.tsx"),x=s("./app/components/sentryDocumentTitle.tsx"),f=s("./app/locale.tsx"),v=s("./app/stores/teamStore.tsx"),S=s("./app/utils/recreateRoute.tsx"),_=s("./app/utils/withApi.tsx"),b=s("./app/utils/withOrganization.tsx"),T=s("./app/utils/withTeams.tsx"),j=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class z extends n.Component{constructor(...t){super(...t),(0,a.Z)(this,"state",this.getInitialState()),(0,a.Z)(this,"handleRequestAccess",(()=>{const{api:t,params:e}=this.props,{team:s}=this.state;s&&(this.setState({requesting:!0}),(0,d.um)(t,{orgId:e.orgId,teamId:s.slug},{success:()=>{(0,m.S9)((0,f._N)("You have requested access to [team]",{team:"#".concat(s.slug)})),this.setState({requesting:!1})},error:()=>{(0,m.Iw)((0,f._N)("Unable to request access to [team]",{team:"#".concat(s.slug)})),this.setState({requesting:!1})}}))})),(0,a.Z)(this,"fetchData",(()=>{this.setState({loading:!0,error:!1}),(0,d.eM)(this.props.api,this.props.params)})),(0,a.Z)(this,"onTeamChange",(t=>{const e=this.state.team;if(t.slug!==(null==e?void 0:e.slug)){const e=this.props.params.orgId;r.browserHistory.replace("/organizations/".concat(e,"/teams/").concat(t.slug,"/settings/"))}else this.setState({team:{...e,...t}})}))}getInitialState(){const t=v.Z.getBySlug(this.props.params.teamId);return{loading:!v.Z.initialized,error:!1,requesting:!1,team:t}}componentDidUpdate(t){const{params:e}=this.props;t.params.teamId===e.teamId&&t.params.orgId===e.orgId||this.fetchData(),c()(this.props.teams,t.teams)||this.setActiveTeam()}setActiveTeam(){const t=v.Z.getBySlug(this.props.params.teamId),e=!v.Z.initialized,s=!e&&!t;this.setState({team:t,loading:e,error:s})}render(){const{children:t,organization:e,params:s,routes:a}=this.props,{team:o,loading:r,requesting:i,error:c}=this.state;if(r)return(0,j.tZ)(Z.Z,{});if(!o||!o.hasAccess)return(0,j.tZ)(l.Z,{type:"warning",children:o?(0,j.BX)(y,{children:[(0,f._N)("You do not have access to the [teamSlug] team.",{teamSlug:(0,j.tZ)("strong",{children:"#".concat(o.slug)})}),(0,j.tZ)(u.ZP,{disabled:i||o.isPending,size:"small",onClick:this.handleRequestAccess,children:o.isPending?(0,f.t)("Request Pending"):(0,f.t)("Request Access")})]}):(0,j.tZ)("div",{children:(0,f.t)("You do not have access to this team.")})});if(c)return(0,j.tZ)(h.Z,{onRetry:this.fetchData});const m=(0,S.Z)("",{routes:a,params:s,stepBack:-1}),d=[(0,j.tZ)(g.Z,{to:"".concat(m,"members/"),children:(0,f.t)("Members")},0),(0,j.tZ)(g.Z,{to:"".concat(m,"projects/"),children:(0,f.t)("Projects")},1),(0,j.tZ)(g.Z,{to:"".concat(m,"settings/"),children:(0,f.t)("Settings")},2)];return e.features.includes("notification-platform")&&d.splice(2,0,(0,j.tZ)(g.Z,{to:"".concat(m,"notifications/"),children:(0,f.t)("Notifications")},"x")),(0,j.BX)("div",{children:[(0,j.tZ)(x.Z,{title:(0,f.t)("Team Details"),orgSlug:s.orgId}),(0,j.tZ)("h3",{children:(0,j.tZ)(p.Z,{hideAvatar:!0,team:o,avatarSize:36})}),(0,j.tZ)(I.Z,{underlined:!0,children:d}),n.isValidElement(t)&&n.cloneElement(t,{team:o,onTeamChange:this.onTeamChange})]})}}z.displayName="TeamDetails";const w=(0,_.Z)((0,b.Z)((0,T.Z)(z))),y=(0,o.Z)("div",{target:"e1ad6iiw0"})({name:"1066lcq",styles:"display:flex;justify-content:space-between;align-items:center"})}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_organizationTeams_teamDetails_tsx.16015857fc812637c95ae697d04070f7.js.map