"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_components_onboardingPanel_tsx-app_views_performance_content_tsx"],{"./app/components/onboardingPanel.tsx":(e,t,n)=>{n.d(t,{Z:()=>p});var i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(n("../node_modules/react/index.js"),n("./app/components/panels/index.tsx")),r=n("./app/styles/space.tsx"),s=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function a({className:e,image:t,children:n}){return(0,s.tZ)(o.s_,{className:e,children:(0,s.BX)(l,{children:[(0,s.tZ)(c,{children:t}),(0,s.tZ)(d,{children:n})]})})}a.displayName="OnboardingPanel";const l=(0,i.Z)("div",{target:"e19tujos2"})("padding:",(0,r.Z)(3),";position:relative;@media (min-width: ",(e=>e.theme.breakpoints[0]),"){display:flex;align-items:center;flex-direction:row;justify-content:center;flex-wrap:wrap;min-height:300px;max-width:1000px;margin:0 auto;}@media (min-width: ",(e=>e.theme.breakpoints[1]),"){min-height:350px;}"),d=(0,i.Z)("div",{target:"e19tujos1"})("z-index:1;@media (min-width: ",(e=>e.theme.breakpoints[0]),"){flex:2;}"),c=(0,i.Z)(d,{target:"e19tujos0"})("position:relative;min-height:100px;max-width:300px;margin:",(0,r.Z)(2)," auto;@media (min-width: ",(e=>e.theme.breakpoints[0]),"){flex:1;margin:",(0,r.Z)(3),";max-width:auto;}"),p=a},"./app/utils/discover/discoverQuery.tsx":(e,t,n)=>{n.d(t,{Z:()=>l}),n("../node_modules/react/index.js");var i=n("./app/utils/withApi.tsx"),o=n("./app/utils/discover/genericDiscoverQuery.tsx"),r=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function s(e,t){return e.transactionName!==t.transactionName||e.transactionThreshold!==t.transactionThreshold||e.transactionThresholdMetric!==t.transactionThresholdMetric}function a(e){return(0,r.tZ)(o.Z,{route:"eventsv2",shouldRefetchData:s,...e})}a.displayName="DiscoverQuery";const l=(0,i.Z)(a)},"./app/utils/isActiveSuperuser.tsx":(e,t,n)=>{n.d(t,{M:()=>s});var i=n("../node_modules/js-cookie/src/js.cookie.js"),o=n.n(i),r=n("./app/stores/configStore.tsx");function s(){const{isSuperuser:e}=r.Z.get("user")||{};return!(!e||(o().set("su","test"),void 0!==o().get("su")))}},"./app/views/performance/content.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>xt});var i=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/core-js/modules/es.string.trim.js"),n("../node_modules/react/index.js")),r=n("../node_modules/react-router/es/index.js"),s=n("../node_modules/lodash/isEqual.js"),a=n.n(s),l=n("./app/actionCreators/tags.tsx"),d=n("./app/components/alert.tsx"),c=n("./app/components/button.tsx"),p=n("./app/components/globalSdkUpdateAlert.tsx"),h=n("./app/components/lightWeightNoProjectMessage.tsx"),u=n("./app/components/organizations/globalSelectionHeader/index.tsx"),m=n("./app/components/pageHeading.tsx"),g=n("./app/components/sentryDocumentTitle.tsx"),v=n("./app/constants/globalSelectionHeader.tsx"),x=n("./app/icons/index.tsx"),y=n("./app/locale.tsx"),Z=n("./app/styles/organization.tsx"),f=n("./app/utils/analytics.tsx"),w=n("./app/utils/queryString.tsx"),b=n("./app/utils/tokenizeSearch.tsx"),C=n("./app/utils/withApi.tsx"),j=n("./app/utils/withGlobalSelection.tsx"),_=n("./app/utils/withOrganization.tsx"),S=n("./app/utils/withProjects.tsx"),A=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),z=n("./app/components/dropdownControl.tsx"),T=n("./app/components/events/searchBar.tsx"),k=n("./app/components/featureBadge.tsx"),P=n("./app/components/performance/teamKeyTransactionsManager.tsx"),V=n("./app/constants/index.tsx"),B=n("./app/styles/space.tsx"),N=n("./app/utils/discover/fields.tsx"),q=n("./app/utils/isActiveSuperuser.tsx"),D=n("./app/utils/withTeams.tsx"),F=n("./app/components/charts/eventsRequest.tsx"),M=n("./app/components/charts/loadingPanel.tsx"),L=n("./app/components/charts/styles.tsx"),E=n("./app/components/charts/utils.tsx"),I=n("./app/components/organizations/globalSelectionHeader/getParams.tsx"),O=n("./app/components/panels/index.tsx"),X=n("./app/components/placeholder.tsx"),R=n("./app/components/questionTooltip.tsx"),H=n("./app/utils/dates.tsx"),W=n("./app/utils/getDynamicText.tsx"),G=n("./app/views/performance/data.tsx"),Q=n("./app/views/performance/styles.tsx"),K=n("../node_modules/@emotion/react/dist/emotion-element-a8309070.browser.esm.js"),U=n("../node_modules/lodash/max.js"),Y=n.n(U),J=n("../node_modules/lodash/min.js"),$=n.n(J),ee=n("./app/components/charts/areaChart.tsx"),te=n("./app/components/charts/chartZoom.tsx"),ne=n("./app/utils/discover/charts.tsx"),ie=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class oe extends o.Component{render(){const{theme:e,data:t,router:n,statsPeriod:i,start:o,end:r,utc:s,loading:a,height:l,grid:d,disableMultiAxis:c}=this.props;if(!t||t.length<=0)return null;const p=e.charts.getColorPalette(4),h=t.every((e=>"duration"===(0,N.Px)(e.seriesName)))?function(e){const t=e.map((e=>e.data.map((e=>e.value)))),n=Y()(t.map(Y()));if(n<=1)return 1;const i=Math.log10(n),o=$()([Y()([10**(i-Math.floor(i)),0]),10]);let r;r=o<=2.5?.2:o<=5?.5:o<=7.5?1:2;const s=10**Math.floor(i)*r;return Math.round(Math.ceil(n/s)*s)}(t):void 0,u={seriesOptions:{showSymbol:!1},grid:c?d:[{top:"8px",left:"24px",right:"52%",bottom:"16px"},{top:"8px",left:"52%",right:"24px",bottom:"16px"}],axisPointer:c?void 0:{link:[{xAxisIndex:[0,1]}]},xAxes:c?void 0:[{gridIndex:0,type:"time"},{gridIndex:1,type:"time"}],yAxes:c?[{axisLabel:{color:e.chartLabel,formatter:e=>(0,ne.gu)(e,t[0].seriesName)}}]:[{gridIndex:0,scale:!0,max:h,axisLabel:{color:e.chartLabel,formatter:e=>(0,ne.gu)(e,t[0].seriesName)}},{gridIndex:1,scale:!0,max:h,axisLabel:{color:e.chartLabel,formatter:e=>(0,ne.gu)(e,t[1].seriesName)}}],utc:s,isGroupedByDate:!0,showTimeInTooltip:!0,colors:[p[0],p[1]],tooltip:{valueFormatter:(e,t)=>(0,ne.CX)(e,t),nameFormatter:e=>"epm()"===e?"tpm()":e}};if(a)return(0,ie.tZ)(ee.Z,{height:l,series:[],...u});const m=t.map(((e,t)=>({...e,yAxisIndex:t,xAxisIndex:t})));return(0,ie.tZ)(te.Z,{router:n,period:i,start:o,end:r,utc:s,xAxisIndex:c?void 0:[0,1],children:e=>(0,ie.tZ)(ee.Z,{height:l,...e,series:m,...u})})}}oe.displayName="Chart";const re=(0,K.b)(oe);var se=n("../node_modules/@sentry/minimal/esm/index.js"),ae=n("./app/actionCreators/events.tsx"),le=n("./app/components/charts/optionSelector.tsx"),de=n("./app/utils/discover/eventView.tsx");class ce extends o.Component{constructor(...e){super(...e),(0,i.Z)(this,"state",{totalValues:null}),(0,i.Z)(this,"shouldRefetchData",(e=>{const t=this.props.eventView.getEventsAPIPayload(this.props.location),n=e.eventView.getEventsAPIPayload(e.location);return!(0,de.ze)(t,n)})),(0,i.Z)(this,"mounted",!1)}componentDidMount(){this.mounted=!0,this.fetchTotalCount()}componentDidUpdate(e){const t=this.props.organization.slug!==e.organization.slug,n=this.shouldRefetchData(e);(t||n)&&this.props.eventView.isValid()&&this.fetchTotalCount()}componentWillUnmount(){this.mounted=!1}handleSelectorChange(e,t){const{location:n,organization:i}=this.props;(0,f.ec)({eventKey:"performance_views.overview.change_chart",eventName:"Performance Views: Change Overview Chart",organization_id:parseInt(i.id,10),metric:t}),r.browserHistory.push({pathname:n.pathname,query:{...n.query,[e]:t}})}async fetchTotalCount(){const{api:e,organization:t,location:n,eventView:i}=this.props;if(i.isValid()&&this.mounted)try{const o=await(0,ae.JE)(e,t.slug,i.getEventsAPIPayload(n));this.mounted&&this.setState({totalValues:o})}catch(e){se.Tb(e)}}render(){const{leftAxis:e,organization:t,rightAxis:n}=this.props,{totalValues:i}=this.state,o="number"==typeof i?i.toLocaleString():"-",r=this.props.options||(0,G.ze)(t),s=r.map((e=>({...e,disabled:e.value===n}))),a=r.map((t=>({...t,disabled:t.value===e})));return(0,ie.BX)(L.xx,{children:[(0,ie.BX)(L.m2,{children:[(0,ie.tZ)(L.OT,{children:(0,y.t)("Total Events")}),(0,ie.tZ)(L.uN,{children:o})]}),(0,ie.BX)(L.m2,{children:[(0,ie.tZ)(le.Z,{title:(0,y.t)("Display 1"),selected:e,options:s,onChange:e=>this.handleSelectorChange("left",e)}),(0,ie.tZ)(le.Z,{title:(0,y.t)("Display 2"),selected:n,options:a,onChange:e=>this.handleSelectorChange("right",e)})]})]})}}ce.displayName="ChartFooter";const pe=ce;class he extends o.Component{getChartParameters(){const{location:e,organization:t}=this.props,n=(0,G.ze)(t);return[n.find((t=>t.value===e.query.left))||n[0],n.find((t=>t.value===e.query.right))||n[1]]}render(){const{api:e,organization:t,location:n,eventView:i,router:r}=this.props,s=i.getGlobalSelection(),a=s.datetime.start?(0,H.hC)(s.datetime.start):null,l=s.datetime.end?(0,H.hC)(s.datetime.end):null,{utc:d}=(0,I.Q)(n.query),c=this.getChartParameters(),p=i.getEventsAPIPayload(n);return(0,ie.BX)(O.s_,{children:[(0,ie.tZ)(F.Z,{organization:t,api:e,period:s.datetime.period,project:s.projects,environment:s.environments,team:p.team,start:a,end:l,interval:(0,E.ZS)({start:a,end:l,period:s.datetime.period},"high"),showLoading:!1,query:p.query,includePrevious:!1,yAxis:c.map((e=>e.value)),partial:!0,children:({loading:e,reloading:t,errored:n,results:i})=>n?(0,ie.tZ)(Q.yu,{children:(0,ie.tZ)(x.FC,{color:"gray300",size:"lg"})}):(0,ie.BX)(o.Fragment,{children:[(0,ie.tZ)(Q.Mt,{children:c.map(((e,t)=>(0,ie.tZ)("div",{children:(0,ie.BX)(L.Gh,{children:[e.label,(0,ie.tZ)(R.Z,{position:"top",size:"sm",title:e.tooltip})]})},"".concat(e.label,":").concat(t))))}),i?(0,W.Z)({value:(0,ie.tZ)(re,{data:i,loading:e||t,router:r,statsPeriod:s.datetime.period,start:a,end:l,utc:"true"===d}),fixed:(0,ie.tZ)(X.Z,{height:"200px",testId:"skeleton-ui"})}):(0,ie.tZ)(M.Z,{"data-test-id":"events-request-loading"})]})}),(0,ie.tZ)(pe,{api:e,leftAxis:c[0].value,rightAxis:c[1].value,organization:t,eventView:i,location:n})]})}}he.displayName="Container";const ue=(0,C.Z)(he);var me=n("./app/actionCreators/indicator.tsx"),ge=n("./app/actionCreators/modal.tsx"),ve=n("./app/actionCreators/performance.tsx"),xe=n("./app/components/assistant/guideAnchor.tsx"),ye=n("./app/components/gridEditable/index.tsx"),Ze=n("./app/components/gridEditable/sortLink.tsx"),fe=n("./app/components/links/link.tsx"),we=n("./app/components/pagination/index.tsx"),be=n("./app/components/tooltip.tsx"),Ce=n("./app/utils.tsx"),je=n("./app/utils/discover/discoverQuery.tsx"),_e=n("./app/utils/discover/fieldRenderers.tsx"),Se=n("./app/views/eventsV2/table/cellAction.tsx"),Ae=n("./app/views/performance/transactionSummary/transactionThresholdModal.tsx"),ze=n("./app/views/performance/transactionSummary/utils.tsx");function Te(e,t){const n=(null==e?void 0:e.project)||void 0;if(void 0===typeof n)return;const i=t.find((e=>e.slug===n));return i?i.id:void 0}class ke extends o.Component{constructor(...e){super(...e),(0,i.Z)(this,"state",{widths:[],keyedTransactions:null,transaction:void 0,transactionThreshold:void 0,transactionThresholdMetric:void 0}),(0,i.Z)(this,"handleCellAction",((e,t)=>(n,i)=>{const{eventView:o,location:s,organization:a,projects:l}=this.props;if((0,f.ec)({eventKey:"performance_views.overview.cellaction",eventName:"Performance Views: Cell Action Clicked",organization_id:parseInt(a.id,10),action:n}),n===Se.eX.EDIT_THRESHOLD){const e=t.project_threshold_config,n=t.transaction,i=Te(t,l);return void(0,ge.openModal)((t=>(0,ie.tZ)(Ae.ZP,{...t,organization:a,transactionName:n,eventView:o,project:i,transactionThreshold:e[1],transactionThresholdMetric:e[0],onApply:(t,i)=>{t===e[1]&&i===e[0]||this.setState({transaction:n,transactionThreshold:t,transactionThresholdMetric:i}),(0,me.S9)((0,y._N)("[transactionName] updated successfully",{transactionName:n}))}})),{modalCss:Ae.fY,backdrop:"static"})}const d=(0,b.aI)(o.query);d.removeFilter("event.type"),(0,Se.rh)(d,n,e,i),r.browserHistory.push({pathname:s.pathname,query:{...s.query,cursor:void 0,query:d.formatString()}})})),(0,i.Z)(this,"renderBodyCellWithData",(e=>(t,n)=>this.renderBodyCell(e,t,n))),(0,i.Z)(this,"renderHeadCellWithMeta",(e=>{var t;const n=null!==(t=this.props.columnTitles)&&void 0!==t?t:G.hj;return(t,i)=>this.renderHeadCell(e,t,n[i])})),(0,i.Z)(this,"renderPrependCellWithData",(e=>{const{eventView:t}=this.props,{keyedTransactions:n}=this.state,i=t.getColumns().find((e=>"key_transaction"===e.name)),o=t.getColumns().find((e=>"team_key_transaction"===e.name));return(t,r)=>{if(i){if(t){const t=(0,ie.tZ)(x.GK,{color:"yellow300",isSolid:!0,"data-test-id":"key-transaction-header"},"keyTransaction");return[this.renderHeadCell(null==e?void 0:e.meta,i,t)]}return[this.renderBodyCell(e,i,r)]}if(o){if(t){const t=(0,ie.tZ)(xe.Z,{target:"team_key_transaction_header",position:"top",disabled:null===n,children:(0,ie.tZ)(xe.Z,{target:"team_key_transaction_existing",position:"top",disabled:!n,children:(0,ie.tZ)(x.GK,{color:"yellow300",isSolid:!0,"data-test-id":"team-key-transaction-header"},"keyTransaction")})});return[this.renderHeadCell(null==e?void 0:e.meta,o,t)]}return[this.renderBodyCell(e,o,r)]}return[]}})),(0,i.Z)(this,"handleSummaryClick",(()=>{const{organization:e}=this.props;(0,f.ec)({eventKey:"performance_views.overview.navigate.summary",eventName:"Performance Views: Overview view summary",organization_id:parseInt(e.id,10)})})),(0,i.Z)(this,"handleResizeColumn",((e,t)=>{const n=[...this.state.widths];n[e]=t.width?Number(t.width):ye.z7,this.setState({widths:n})}))}componentDidMount(){this.fetchKeyTransactionCount()}async fetchKeyTransactionCount(){const{organization:e}=this.props;try{const t=await(0,ve.Rr)(e.slug);this.setState({keyedTransactions:t})}catch(e){this.setState({keyedTransactions:null})}}renderBodyCell(e,t,n){const{eventView:i,organization:o,projects:r,location:s}=this.props;if(!e||!e.meta)return n[t.key];const a=e.meta,l=String(t.key),d=(0,_e.Js)(l,a)(n,{organization:o,location:s}),c=[Se.eX.ADD,Se.eX.EXCLUDE,Se.eX.SHOW_GREATER_THAN,Se.eX.SHOW_LESS_THAN];if(o.features.includes("project-transaction-threshold-override")&&c.push(Se.eX.EDIT_THRESHOLD),"transaction"===l){const e=Te(n,r),s=i.clone();n["http.method"]&&s.additionalConditions.setFilterValues("http.method",[n["http.method"]]),s.query=s.getQueryWithAdditionalConditions();const a=(0,ze.e1)({orgSlug:o.slug,transaction:String(n.transaction)||"",query:s.generateQueryStringObject(),projectID:e});return(0,ie.tZ)(Se.ZP,{column:t,dataRow:n,handleCellAction:this.handleCellAction(t,n),allowActions:c,children:(0,ie.tZ)(fe.Z,{to:a,onClick:this.handleSummaryClick,children:d})})}if(l.startsWith("key_transaction"))return d;if(l.startsWith("team_key_transaction"))return d;const p=(0,N.LY)(l),h=n[p];return"integer"===a[p]&&(0,Ce.ri)(h)&&h>999?(0,ie.tZ)(be.Z,{title:h.toLocaleString(),containerDisplayMode:"block",position:"right",children:(0,ie.tZ)(Se.ZP,{column:t,dataRow:n,handleCellAction:this.handleCellAction(t,n),allowActions:c,children:d})}):(0,ie.tZ)(Se.ZP,{column:t,dataRow:n,handleCellAction:this.handleCellAction(t,n),allowActions:c,children:d})}onSortClick(e,t){const{organization:n}=this.props;(0,f.ec)({eventKey:"performance_views.landingv2.transactions.sort",eventName:"Performance Views: Landing Transactions Sorted",organization_id:parseInt(n.id,10),field:t,direction:e})}renderHeadCell(e,t,n){const{eventView:i,location:o,organization:r}=this.props,s=(0,N.qG)(t.name,t.type,e),a={field:t.name,width:t.width},l=i.sortForField(a,e),d=(0,de.M3)(a,e),c=l?l.kind:void 0,p=l?l.field:void 0,h=(0,ie.tZ)(Ze.Z,{align:s,title:n||a.field,direction:c,canSort:d,generateSortLink:function(){if(!e)return;const t=i.sortOnField(a,e).generateQueryStringObject();return{...o,query:{...o.query,sort:t.sort}}},onClick:()=>this.onSortClick(c,p)});return a.field.startsWith("user_misery")?(0,ie.tZ)(xe.Z,{target:"project_transaction_threshold",position:"top",disabled:!r.features.includes("project-transaction-threshold"),children:h}):h}getSortedEventView(){const{eventView:e}=this.props;return e.withSorts([{field:"team_key_transaction",kind:"desc"},...e.sorts])}render(){const{eventView:e,organization:t,location:n,setError:i}=this.props,{widths:r,transaction:s,transactionThreshold:a,transactionThresholdMetric:l}=this.state,d=e.getColumns().filter((e=>"key_transaction"!==e.name&&"team_key_transaction"!==e.name&&!e.name.startsWith("count_miserable")&&"project_threshold_config"!==e.name)).map(((e,t)=>"number"==typeof r[t]?{...e,width:r[t]}:e)),c=this.getSortedEventView(),p=c.getSorts(),h=["max-content"];return(0,ie.tZ)("div",{children:(0,ie.tZ)(je.Z,{eventView:c,orgSlug:t.slug,location:n,setError:i,referrer:"api.performance.landing-table",transactionName:s,transactionThreshold:a,transactionThresholdMetric:l,children:({pageLinks:e,isLoading:t,tableData:i})=>(0,ie.BX)(o.Fragment,{children:[(0,ie.tZ)(ye.ZP,{isLoading:t,data:i?i.data:[],columnOrder:d,columnSortBy:p,grid:{onResizeColumn:this.handleResizeColumn,renderHeadCell:this.renderHeadCellWithMeta(null==i?void 0:i.meta),renderBodyCell:this.renderBodyCellWithData(i),renderPrependColumns:this.renderPrependCellWithData(i),prependColumnWidths:h},location:n}),(0,ie.tZ)(we.Z,{pageLinks:e})]})})})}}ke.displayName="Table";const Pe=ke;var Ve=n("./app/views/performance/utils.tsx"),Be=n("../node_modules/react-router/lib/withRouter.js"),Ne=n.n(Be),qe=n("./app/components/charts/errorPanel.tsx"),De=n("./app/components/charts/transparentLoadingMask.tsx");function Fe(e,t){var n;return t&&null!==(n=Me(e))&&void 0!==n?n:e}function Me(e){return e.backupOption}function Le(e,t){return null!=t?t:e}function Ee(e){const{organization:t,api:n,eventView:i,location:o,router:r,field:s,title:a,titleTooltip:l,backupField:d,usingBackupAxis:c}=e,p=i.getGlobalSelection(),h=p.datetime.start?(0,H.hC)(p.datetime.start):null,u=p.datetime.end?(0,H.hC)(p.datetime.end):null,{utc:m}=(0,I.Q)(o.query),g=d?[d]:[],v=i.getEventsAPIPayload(o);return(0,ie.tZ)(F.Z,{organization:t,api:n,period:p.datetime.period,project:p.projects,environment:p.environments,team:v.team,start:h,end:u,interval:(0,E.ZS)({start:h,end:u,period:p.datetime.period},"high"),showLoading:!1,query:v.query,includePrevious:!1,yAxis:[s,...g],partial:!0,hideError:!0,children:({loading:e,reloading:t,errored:n,timeseriesData:i,results:o})=>{const g=c?Le(s,d):s,v=i||[null==o?void 0:o.find((e=>e.seriesName===g))].filter(Boolean),y=v?v.map((({...e})=>({...e,seriesName:g}))):[];return n?(0,ie.tZ)(qe.Z,{children:(0,ie.tZ)(x.FC,{color:"gray300",size:"lg"})}):(0,ie.BX)("div",{children:[(0,ie.tZ)(Q.Mt,{children:(0,ie.BX)(L.ws,{children:[a,(0,ie.tZ)(R.Z,{position:"top",size:"sm",title:l})]})}),v&&(0,ie.tZ)(Ie,{children:(0,ie.BX)(Oe,{children:[(0,ie.tZ)(De.Z,{visible:e}),(0,W.Z)({value:(0,ie.tZ)(re,{height:250,data:y,loading:e||t,router:r,statsPeriod:p.datetime.period,start:h,end:u,utc:"true"===m,grid:{left:(0,B.Z)(3),right:(0,B.Z)(3),top:(0,B.Z)(3),bottom:e||t?(0,B.Z)(4):(0,B.Z)(1.5)},disableMultiAxis:!0}),fixed:(0,ie.tZ)(X.Z,{height:"250px",testId:"skeleton-ui"})})]})})]})}})}Ee.displayName="DurationChart";const Ie=(0,A.Z)("div",{target:"ev9dshi1"})("padding-top:",(0,B.Z)(1),";"),Oe=(0,A.Z)("div",{target:"ev9dshi0"})({name:"bjn8wh",styles:"position:relative"}),Xe=Ne()((0,C.Z)(Ee));var Re=n("./app/components/charts/barChart.tsx"),He=n("./app/components/charts/barChartZoom.tsx"),We=n("./app/icons/iconWarning.tsx"),Ge=n("./app/utils/performance/histogram/histogramQuery.tsx"),Qe=n("./app/utils/performance/histogram/utils.tsx");function Ke(e){const{theme:t,location:n,onFilterChange:i,organization:r,eventView:s,field:a,title:l,titleTooltip:d,didReceiveMultiAxis:c,backupField:p,usingBackupAxis:h}=e,u=p?[p]:[],m={type:"category",truncate:!0,boundaryGap:!1,axisTick:{alignWithLabel:!0}};return(0,ie.BX)("div",{children:[(0,ie.tZ)(Q.Mt,{children:(0,ie.BX)(L.ws,{children:[l,(0,ie.tZ)(R.Z,{position:"top",size:"sm",title:d})]})}),(0,ie.tZ)(Ge.Z,{location:n,orgSlug:r.slug,eventView:s,numBuckets:50,precision:0,fields:[a,...u],dataFilter:"exclude_outliers",didReceiveMultiAxis:c,children:e=>{var r;const s=h?Le(a,p):a,l=e.isLoading,d=null!==e.error,c=null===(r=e.histograms)||void 0===r?void 0:r[s];if(d)return(0,ie.tZ)(qe.Z,{height:"250px",children:(0,ie.tZ)(We.F,{color:"gray300",size:"lg"})});if(!c)return null;const u={seriesName:(0,y.t)("Count"),data:(0,Qe.GT)(c,{type:"duration"})},g=[];l||d||g.push(u);const v={type:"value",axisLabel:{color:t.chartLabel}};return(0,ie.tZ)(o.Fragment,{children:(0,ie.tZ)(He.Z,{minZoomWidth:50,location:n,paramStart:"".concat(s,":>="),paramEnd:"".concat(s,":<="),xAxisIndex:[0],buckets:(0,Qe._W)(c),onHistoryPush:i,children:e=>(0,ie.tZ)(Ue,{children:(0,ie.BX)(Ye,{children:[(0,ie.tZ)(De.Z,{visible:l}),(0,W.Z)({value:(0,ie.tZ)(Re.Z,{height:250,series:g,xAxis:m,yAxis:v,grid:{left:(0,B.Z)(3),right:(0,B.Z)(3),top:(0,B.Z)(3),bottom:l?(0,B.Z)(4):(0,B.Z)(1.5)},stacked:!0,...e}),fixed:(0,ie.tZ)(X.Z,{height:"250px",testId:"skeleton-ui"})})]})})})})}})]})}Ke.displayName="HistogramChart";const Ue=(0,A.Z)("div",{target:"e1kr7yxp1"})("padding-top:",(0,B.Z)(1),";position:relative;"),Ye=(0,A.Z)("div",{target:"e1kr7yxp0"})({name:"bjn8wh",styles:"position:relative"}),Je=(0,K.b)(Ke);function $e(e){const{axis:t,onFilterChange:n,eventView:i,organization:o,location:r,didReceiveMultiAxis:s,usingBackupAxis:a}=e,l=function(e){const t=Me(e);if(t)return t.field}(t),d=Fe(t,a);return t.isDistribution?(0,ie.tZ)(Je,{field:t.field,eventView:i,organization:o,location:r,onFilterChange:n,title:d.label,titleTooltip:d.tooltip,didReceiveMultiAxis:function(e){s&&(e[t.field]?s(!1):l&&e[l]&&s(!0))},usingBackupAxis:a,backupField:l}):(0,ie.tZ)(Xe,{field:t.field,eventView:i,organization:o,title:d.label,titleTooltip:d.tooltip,usingBackupAxis:a,backupField:l})}function et(e){const{eventView:t,location:n,organization:i,axisOptions:s,leftAxis:a,rightAxis:l}=e,[d,c]=(0,o.useState)(!1),p=e=>(t,o)=>{const s=(0,Ve.Ov)(n),a=(0,b.aI)(s);a.setFilterValues(e,[">=".concat(Math.round(t)),"<".concat(Math.round(o))]);const l=a.formatString();(0,f.ec)({eventKey:"performance_views.landingv2.display.filter_change",eventName:"Performance Views: Landing v2 Display Filter Change",organization_id:parseInt(i.id,10),field:e,min_value:parseInt(t,10),max_value:parseInt(o,10)}),r.browserHistory.push({pathname:n.pathname,query:{...n.query,query:String(l).trim()}})},h=e=>{c(e)},u=Fe(a,d),m=Fe(l,d),g=function(e,t){return t?e.map((e=>{var t;return null!==(t=Me(e))&&void 0!==t?t:e})):e}(s,d);return(0,ie.BX)(O.s_,{children:[(0,ie.BX)(tt,{children:[(0,ie.tZ)($e,{axis:a,onFilterChange:p(a.field),didReceiveMultiAxis:h,usingBackupAxis:d,...e}),(0,ie.tZ)($e,{axis:l,onFilterChange:p(l.field),didReceiveMultiAxis:h,usingBackupAxis:d,...e})]}),(0,ie.tZ)(nt,{options:g,leftAxis:u.value,rightAxis:m.value,organization:i,eventView:t,location:n})]})}et.displayName="DoubleAxisDisplay";const tt=(0,A.Z)("div",{target:"e1hm94we0"})("display:grid;grid-template-columns:1fr 1fr;grid-gap:",(0,B.Z)(3),";min-height:282px;"),nt=(0,C.Z)(pe),it=et,ot=["transaction","project","tpm","FCP","LCP","FID","CLS","users","user misery"],rt=["transaction","project","operation","tpm","p50()","p75()","p95()","users","user misery"],st=["transaction","project","operation","http method","tpm","p50","p95","failure rate","apdex","users","user misery"],at=["transaction","project","operation","tpm","cold start","warm start","slow frame %","frozen frame %","users","user misery"],lt=["transaction","project","operation","tpm","cold start","warm start","stall %","users","user misery"];var dt=n("./app/views/performance/landing/utils.tsx"),ct=n("./app/views/performance/landing/vitalsCards.tsx");class pt extends o.Component{constructor(...e){super(...e),(0,i.Z)(this,"handleLandingDisplayChange",(e=>{const{location:t,organization:n,eventView:i,projects:o}=this.props,s={...t.query};delete s[dt.Y1],delete s[dt.V];const a=(0,dt.Oo)(o,i),l=(0,w.ro)(t.query.landingDisplay),d=(0,w.ro)(t.query.query,""),c=(0,b.aI)(d);c.removeFilter("transaction.op"),(0,f.ec)({eventKey:"performance_views.landingv2.display_change",eventName:"Performance Views: Landing v2 Display Change",organization_id:parseInt(n.id,10),change_to_display:e,default_display:a,current_display:l,is_default:a===l}),r.browserHistory.push({pathname:t.pathname,query:{...s,query:c.formatString(),landingDisplay:e}})})),(0,i.Z)(this,"renderLandingFrontend",(e=>{const{organization:t,location:n,projects:i,eventView:r,setError:s}=this.props,a=e?ot:rt,l=e?(0,G.L0)(t):(0,G.g1)(t),{leftAxis:d,rightAxis:c}=(0,dt.Gd)(l,n);return(0,ie.BX)(o.Fragment,{children:[e&&(0,ie.tZ)(ct.q7,{eventView:r,organization:t,location:n,projects:i}),(0,ie.tZ)(it,{eventView:r,organization:t,location:n,axisOptions:l,leftAxis:d,rightAxis:c}),(0,ie.tZ)(Pe,{eventView:r,projects:i,organization:t,location:n,setError:s,summaryConditions:r.getQueryWithAdditionalConditions(),columnTitles:a})]})})),(0,i.Z)(this,"renderLandingBackend",(()=>{const{organization:e,location:t,projects:n,eventView:i,setError:r}=this.props,s=(0,G.DW)(e),{leftAxis:a,rightAxis:l}=(0,dt.Gd)(s,t),d=st;return(0,ie.BX)(o.Fragment,{children:[(0,ie.tZ)(ct.M9,{eventView:i,organization:e,location:t}),(0,ie.tZ)(it,{eventView:i,organization:e,location:t,axisOptions:s,leftAxis:a,rightAxis:l}),(0,ie.tZ)(Pe,{eventView:i,projects:n,organization:e,location:t,setError:r,summaryConditions:i.getQueryWithAdditionalConditions(),columnTitles:d})]})})),(0,i.Z)(this,"renderLandingMobile",(()=>{const{organization:e,location:t,projects:n,eventView:i,setError:r}=this.props,s=(0,G.Gm)(e),{leftAxis:a,rightAxis:l}=(0,dt.Gd)(s,t),d=Boolean(i.getFields().find((e=>e.includes("measurements.stall_percentage")))),c=d?lt:at;return(0,ie.BX)(o.Fragment,{children:[(0,ie.tZ)(ct.aU,{eventView:i,organization:e,location:t,showStallPercentage:d}),(0,ie.tZ)(it,{eventView:i,organization:e,location:t,axisOptions:s,leftAxis:a,rightAxis:l}),(0,ie.tZ)(Pe,{eventView:i,projects:n,organization:e,location:t,setError:r,summaryConditions:i.getQueryWithAdditionalConditions(),columnTitles:c})]})})),(0,i.Z)(this,"renderLandingAll",(()=>{const{organization:e,location:t,router:n,projects:i,eventView:r,setError:s}=this.props;return(0,ie.BX)(o.Fragment,{children:[(0,ie.tZ)(ue,{eventView:r,organization:e,location:t,router:n}),(0,ie.tZ)(Pe,{eventView:r,projects:i,organization:e,location:t,setError:s,summaryConditions:r.getQueryWithAdditionalConditions()})]})}))}getSummaryConditions(e){const t=(0,b.aI)(e);return t.freeText=[],t.formatString()}renderSelectedDisplay(e){switch(e){case dt.BY.ALL:return this.renderLandingAll();case dt.BY.FRONTEND_PAGELOAD:return this.renderLandingFrontend(!0);case dt.BY.FRONTEND_OTHER:return this.renderLandingFrontend(!1);case dt.BY.BACKEND:return this.renderLandingBackend();case dt.BY.MOBILE:return this.renderLandingMobile();default:throw new Error("Unknown display: ".concat(e))}}render(){const{organization:e,location:t,eventView:n,projects:i,teams:r,handleSearch:s}=this.props,a=(0,dt.Q_)(t,i,n),l=(0,Ve.Ov)(t,n.query),d=(0,q.M)(),c=r.filter((({isMember:e})=>e||d));return(0,ie.BX)(o.Fragment,{children:[(0,ie.BX)(ht,{children:[(0,ie.tZ)(T.Z,{searchSource:"performance_landing",organization:e,projectIds:n.project,query:l,fields:(0,N.db)(e,[...n.fields,{field:"tps()"}],["epm()","eps()"]),onSearch:s,maxQueryLength:V.dI}),(0,ie.tZ)(z.ZP,{buttonProps:{prefix:(0,y.t)("Display")},label:a.label,children:dt.Lx.filter((({isShown:t})=>!t||t(e))).map((({badge:e,label:t,field:n})=>(0,ie.BX)(z.hP,{onSelect:this.handleLandingDisplayChange,eventKey:n,"data-test-id":n,isActive:n===a.field,children:[t,e&&(0,ie.tZ)(k.Z,{type:e,noTooltip:!0})]},n)))})]}),(0,ie.tZ)(P.z,{organization:e,teams:c,selectedTeams:["myteams"],selectedProjects:n.project.map(String),children:this.renderSelectedDisplay(a.field)})]})}}pt.displayName="LandingContent";const ht=(0,A.Z)("div",{target:"e5hewa80"})("display:grid;grid-gap:",(0,B.Z)(2),";margin-bottom:",(0,B.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints[0]),"){grid-template-columns:1fr min-content;}"),ut=(0,r.withRouter)((0,D.Z)(pt));var mt=n("./app/views/performance/trends/utils.tsx"),gt=n("./app/views/performance/onboarding.tsx");class vt extends o.Component{constructor(...e){super(...e),(0,i.Z)(this,"state",{eventView:(0,G.C)(this.props.organization,this.props.location,this.props.projects),error:void 0}),(0,i.Z)(this,"setError",(e=>{this.setState({error:e})})),(0,i.Z)(this,"handleSearch",(e=>{const{location:t,organization:n}=this.props;(0,f.ec)({eventKey:"performance_views.overview.search",eventName:"Performance Views: Transaction overview search",organization_id:parseInt(n.id,10)}),r.browserHistory.push({pathname:t.pathname,query:{...t.query,cursor:void 0,query:String(e).trim()||void 0}})}))}static getDerivedStateFromProps(e,t){return{...t,eventView:(0,G.C)(e.organization,e.location,e.projects)}}componentDidMount(){const{api:e,organization:t,selection:n}=this.props;(0,l.QK)(e,t.slug,n),(0,Ve.n4)(n),(0,f.ec)({eventKey:"performance_views.overview.view",eventName:"Performance Views: Transaction overview view",organization_id:parseInt(t.id,10),show_onboarding:this.shouldShowOnboarding()})}componentDidUpdate(e){const{api:t,organization:n,selection:i}=this.props;a()(e.selection.projects,i.projects)&&a()(e.selection.datetime,i.datetime)||((0,l.QK)(t,n.slug,i),(0,Ve.n4)(i))}renderError(){const{error:e}=this.state;return e?(0,ie.tZ)(d.Z,{type:"error",icon:(0,ie.tZ)(x.Gy,{size:"md"}),children:e}):null}handleTrendsClick(){const{location:e,organization:t}=this.props,n={...e.query},i=(0,w.ro)(e.query.query,""),o=(0,b.aI)(i);(0,f.ec)({eventKey:"performance_views.change_view",eventName:"Performance Views: Change View",organization_id:parseInt(t.id,10),view_name:"TRENDS"});const s=new b.an([]);o.hasFilter("tpm()")?s.setFilterValues("tpm()",o.getFilterValues("tpm()")):s.setFilterValues("tpm()",[">0.01"]),o.hasFilter("transaction.duration")?s.setFilterValues("transaction.duration",o.getFilterValues("transaction.duration")):s.setFilterValues("transaction.duration",[">0","<".concat(mt.bg)]),n.query=s.formatString(),r.browserHistory.push({pathname:(0,Ve.Ws)(t),query:{...n}})}shouldShowOnboarding(){const{projects:e,demoMode:t}=this.props,{eventView:n}=this.state;return!t&&0!==e.length&&(0===n.project.length||n.project===[v.mP]?e.filter((e=>!1===e.firstTransactionEvent)).length===e.length:e.filter((e=>n.project.includes(parseInt(e.id,10))&&!1===e.firstTransactionEvent)).length===n.project.length)}renderBody(){const{organization:e,projects:t,selection:n}=this.props,i=this.state.eventView,o=this.shouldShowOnboarding();return(0,ie.tZ)(Z.JH,{children:(0,ie.BX)(h.Z,{organization:e,children:[(0,ie.BX)(Z.mr,{children:[(0,ie.tZ)(m.Z,{children:(0,y.t)("Performance")}),!o&&(0,ie.tZ)(c.ZP,{priority:"primary","data-test-id":"landing-header-trends",onClick:()=>this.handleTrendsClick(),children:(0,y.t)("View Trends")})]}),(0,ie.tZ)(p.Z,{}),this.renderError(),o?(0,ie.tZ)(gt.Z,{organization:e,project:n.projects.length>0&&t.find((e=>n.projects[0].toString()===e.id))||t[0]}):(0,ie.tZ)(ut,{eventView:i,projects:t,organization:e,setError:this.setError,handleSearch:this.handleSearch})]})})}render(){const{organization:e}=this.props;return(0,ie.tZ)(g.Z,{title:(0,y.t)("Performance"),orgSlug:e.slug,children:(0,ie.tZ)(u.Z,{defaultSelection:{datetime:{start:null,end:null,utc:!1,period:G.GY}},children:this.renderBody()})})}}vt.displayName="PerformanceContent";const xt=(0,C.Z)((0,_.Z)((0,S.Z)((0,j.Z)(vt))))},"./app/views/performance/styles.tsx":(e,t,n)=>{n.d(t,{r8:()=>r,Ci:()=>s,Mt:()=>a,yu:()=>l});var i=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=n("./app/styles/space.tsx");const r=(0,i.Z)("div",{target:"exyvyft3"})({name:"mmdt3g",styles:"font-size:14px"}),s=(0,i.Z)(r,{target:"exyvyft2"})({name:"2qga7i",styles:"text-align:right"}),a=(0,i.Z)("div",{target:"exyvyft1"})("display:grid;grid-template-columns:1fr 1fr;padding:",(0,o.Z)(2)," ",(0,o.Z)(3)," ",(0,o.Z)(1)," ",(0,o.Z)(3),";grid-gap:",(0,o.Z)(3),";"),l=(0,i.Z)("div",{target:"exyvyft0"})({name:"1oc6478",styles:"display:flex;justify-content:center;align-items:center;flex:1;flex-shrink:0;overflow:hidden;height:200px;position:relative;border-color:transparent;margin-bottom:0"})},"./app/views/performance/transactionSummary/transactionThresholdModal.tsx":(e,t,n)=>{n.d(t,{fY:()=>T,ZP:()=>k});var i=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/react/index.js")),s=n("../node_modules/react-router/es/index.js"),a=n("../node_modules/lodash/cloneDeep.js"),l=n.n(a),d=n("../node_modules/lodash/set.js"),c=n.n(d),p=n("./app/actionCreators/indicator.tsx"),h=n("./app/components/button.tsx"),u=n("./app/components/buttonBar.tsx"),m=n("./app/components/featureBadge.tsx"),g=n("./app/components/forms/selectControl.tsx"),v=n("./app/locale.tsx"),x=n("./app/styles/space.tsx"),y=n("./app/utils.tsx"),Z=n("./app/utils/withApi.tsx"),f=n("./app/utils/withProjects.tsx"),w=n("./app/views/settings/components/forms/controls/input.tsx"),b=n("./app/views/settings/components/forms/field/index.tsx"),C=n("./app/views/performance/transactionSummary/utils.tsx"),j=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");let _;!function(e){e.TRANSACTION_DURATION="duration",e.LARGEST_CONTENTFUL_PAINT="lcp"}(_||(_={}));const S=[{label:(0,v.t)("Transaction Duration"),value:"duration"},{label:(0,v.t)("Largest Contentful Paint"),value:"lcp"}];class A extends r.Component{constructor(...e){super(...e),(0,i.Z)(this,"state",{threshold:this.props.transactionThreshold,metric:this.props.transactionThresholdMetric,error:null}),(0,i.Z)(this,"handleApply",(async e=>{e.preventDefault();const{api:t,closeModal:n,organization:i,transactionName:o,onApply:r}=this.props,s=this.getProject();if(!(0,y.ri)(s))return;const a="/organizations/".concat(i.slug,"/project-transaction-threshold-override/");t.requestPromise(a,{method:"POST",includeAllArgs:!0,query:{project:s.id},data:{transaction:o,threshold:this.state.threshold,metric:this.state.metric}}).then((()=>{n(),r&&r(this.state.threshold,this.state.metric)})).catch((e=>{var t,n,i,o;this.setState({error:e});const r=null!==(t=null!==(n=null===(i=e.responseJSON)||void 0===i?void 0:i.threshold)&&void 0!==n?n:null===(o=e.responseJSON)||void 0===o?void 0:o.non_field_errors)&&void 0!==t?t:null;(0,p.Iw)(r)}))})),(0,i.Z)(this,"handleFieldChange",(e=>t=>{this.setState((n=>{const i=l()(n);return c()(i,e,t),{...i,errors:void 0}}))})),(0,i.Z)(this,"handleReset",(async e=>{e.preventDefault();const{api:t,closeModal:n,organization:i,transactionName:o,onApply:r}=this.props,s=this.getProject();if(!(0,y.ri)(s))return;const a="/organizations/".concat(i.slug,"/project-transaction-threshold-override/");t.requestPromise(a,{method:"DELETE",includeAllArgs:!0,query:{project:s.id},data:{transaction:o}}).then((()=>{const e="/projects/".concat(i.slug,"/").concat(s.slug,"/transaction-threshold/configure/");this.props.api.requestPromise(e,{method:"GET",includeAllArgs:!0,query:{project:s.id}}).then((([e])=>{this.setState({threshold:e.threshold,metric:e.metric}),n(),r&&r(this.state.threshold,this.state.metric)})).catch((e=>{var t,n;const i=null!==(t=null===(n=e.responseJSON)||void 0===n?void 0:n.threshold)&&void 0!==t?t:null;(0,p.Iw)(i)}))})).catch((e=>{this.setState({error:e})}))}))}getProject(){const{projects:e,eventView:t,project:n}=this.props;if((0,y.ri)(n))return e.find((e=>e.id===n));{const n=String(t.project[0]);return e.find((e=>e.id===n))}}renderModalFields(){return(0,j.BX)(r.Fragment,{children:[(0,j.tZ)(b.Z,{"data-test-id":"response-metric",label:(0,v.t)("Calculation Method"),inline:!1,help:(0,v.t)("This determines which duration metric is used for the Response Time Threshold."),showHelpInTooltip:!0,flexibleControlStateSize:!0,stacked:!0,required:!0,children:(0,j.tZ)(g.Z,{required:!0,options:S.slice(),name:"responseMetric",label:(0,v.t)("Calculation Method"),value:this.state.metric,onChange:e=>{this.handleFieldChange("metric")(e.value)}})}),(0,j.tZ)(b.Z,{"data-test-id":"response-time-threshold",label:(0,v.t)("Response Time Threshold (ms)"),inline:!1,help:(0,v.t)("The satisfactory response time for the calculation method defined above. This is used to calculate Apdex and User Misery scores."),showHelpInTooltip:!0,flexibleControlStateSize:!0,stacked:!0,required:!0,children:(0,j.tZ)(w.Z,{type:"number",name:"threshold",required:!0,pattern:"[0-9]*(\\.[0-9]*)?",onChange:e=>{this.handleFieldChange("threshold")(e.target.value)},value:this.state.threshold,step:100,min:100})})]})}render(){const{Header:e,Body:t,Footer:n,organization:i,transactionName:o,eventView:a}=this.props,l=this.getProject(),d=a.clone();d.query=d.getQueryWithAdditionalConditions();const c=(0,C.e1)({orgSlug:i.slug,transaction:o,query:d.generateQueryStringObject(),projectID:null==l?void 0:l.id});return(0,j.BX)(r.Fragment,{children:[(0,j.tZ)(e,{closeButton:!0,children:(0,j.BX)("h4",{children:[(0,v.t)("Transaction Settings")," ",(0,j.tZ)(m.Z,{type:"new"})]})}),(0,j.BX)(t,{children:[(0,j.tZ)(z,{children:(0,v._N)("The changes below will only be applied to [transaction]. To set it at a more global level, go to [projectSettings: Project Settings].",{transaction:(0,j.tZ)(s.Link,{to:c,children:o}),projectSettings:(0,j.tZ)(s.Link,{to:"/settings/".concat(i.slug,"/projects/").concat(null==l?void 0:l.slug,"/performance/")})})}),this.renderModalFields()]}),(0,j.tZ)(n,{children:(0,j.BX)(u.ZP,{gap:1,children:[(0,j.tZ)(h.ZP,{priority:"default",onClick:this.handleReset,"data-test-id":"reset-all",children:(0,v.t)("Reset All")}),(0,j.tZ)(h.ZP,{label:(0,v.t)("Apply"),priority:"primary",onClick:this.handleApply,"data-test-id":"apply-threshold",children:(0,v.t)("Apply")})]})})]})}}A.displayName="TransactionThresholdModal";const z=(0,o.Z)("div",{target:"ezg6l150"})("margin-bottom:",(0,x.Z)(4),";"),T={name:"9w3zq5",styles:"width:100%;max-width:650px;margin:70px auto"},k=(0,Z.Z)((0,f.Z)(A))}}]);
//# sourceMappingURL=../sourcemaps/app_components_onboardingPanel_tsx-app_views_performance_content_tsx.a7df1de55b0764683bfa5ddae2b50071.js.map