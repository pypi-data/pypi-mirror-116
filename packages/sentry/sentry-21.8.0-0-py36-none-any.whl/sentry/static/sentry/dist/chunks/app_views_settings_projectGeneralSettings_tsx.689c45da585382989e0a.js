"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_projectGeneralSettings_tsx"],{"./app/utils/recreateRoute.tsx":(e,t,s)=>{s.d(t,{Z:()=>i});var n=s("../node_modules/lodash/findLastIndex.js"),r=s.n(n),o=s("./app/utils/replaceRouterParams.tsx");function i(e,t){var s,n;const{routes:i,params:a,location:l,stepBack:d}=t,c=i.map((({path:e})=>e||""));let p,h;"string"!=typeof e?(h=i.indexOf(e)+1,p=r()(c.slice(0,h),(e=>"/"===e[0]))):p=r()(c,(e=>"/"===e[0]));let m=c.slice(p,h);void 0!==d&&(m=m.slice(0,d));const u=null!==(s=null==l?void 0:l.search)&&void 0!==s?s:"",f=null!==(n=null==l?void 0:l.hash)&&void 0!==n?n:"",g="".concat(m.join("")).concat("string"!=typeof e?"":e).concat(u).concat(f);return(0,o.Z)(g,a)}},"./app/utils/routeTitle.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});const n=function(e,t,s=!0,n){const r="".concat(e," - ").concat(t),o=n?"".concat(r," - ").concat(n):r;return s?"".concat(o," - Sentry"):o}},"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>a}),s("../node_modules/react/index.js");var n=s("../node_modules/react-document-title/index.js"),r=s.n(n),o=s("./app/components/asyncComponent.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class a extends o.Z{getTitle(){return""}render(){const e=this.getTitle();return(0,i.tZ)(r(),{title:"".concat(e?"".concat(e," - "):"","Sentry"),children:this.renderComponent()})}}a.displayName="AsyncView"},"./app/views/settings/components/forms/formPanel.tsx":(e,t,s)=>{s.d(t,{Z:()=>d});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=s("../node_modules/react/index.js"),o=s("./app/components/panels/index.tsx"),i=s("./app/utils/sanitizeQuerySelector.tsx"),a=s("./app/views/settings/components/forms/fieldFromConfig.tsx"),l=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class d extends r.Component{render(){const{title:e,fields:t,access:s,disabled:n,additionalFieldProps:r,renderFooter:d,renderHeader:c,...p}=this.props;return(0,l.BX)(o.s_,{id:"string"==typeof e?(0,i.m)(e):void 0,children:[e&&(0,l.tZ)(o.V9,{children:e}),(0,l.BX)(o.N,{children:["function"==typeof c&&c({title:e,fields:t}),t.map((e=>{if("function"==typeof e)return e();const{defaultValue:t,...o}=e;return!0===n&&(o.disabled=!0,o.disabledReason=void 0),(0,l.tZ)(a.Z,{access:s,disabled:n,...p,...r,field:o,highlighted:this.props.highlighted==="#".concat(e.name)},e.name)})),"function"==typeof d&&d({title:e,fields:t})]})]})}}d.displayName="FormPanel",(0,n.Z)(d,"defaultProps",{additionalFieldProps:{}})},"./app/views/settings/components/forms/jsonForm.tsx":(e,t,s)=>{s.d(t,{Z:()=>u});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),o=s("../node_modules/react-router/es/index.js"),i=s("../node_modules/@sentry/minimal/esm/index.js"),a=s("../node_modules/scroll-to-element/index.js"),l=s.n(a),d=s("./app/utils.tsx"),c=s("./app/utils/sanitizeQuerySelector.tsx"),p=s("./app/views/settings/components/forms/formPanel.tsx"),h=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class m extends r.Component{constructor(...e){var t;super(...e),(0,n.Z)(this,"state",{highlighted:null===(t=this.props.location)||void 0===t?void 0:t.hash})}componentDidMount(){this.scrollToHash()}UNSAFE_componentWillReceiveProps(e){if(this.props.location.hash!==e.location.hash){const t=e.location.hash;this.scrollToHash(t),this.setState({highlighted:t})}}scrollToHash(e){var t;const s=e||(null===(t=this.props.location)||void 0===t?void 0:t.hash);if(s)try{l()((0,c.m)(decodeURIComponent(s)),{align:"middle",offset:-100})}catch(e){i.Tb(e)}}shouldDisplayForm(e){const t=e.filter((e=>"function"!=typeof e&&(0,d.ri)(null==e?void 0:e.visible)));if(e.length===t.length){const{additionalFieldProps:e,...s}=this.props;return!t.every((t=>"function"==typeof t.visible?!t.visible({...s,...e}):!t.visible))}return!0}renderForm({fields:e,formPanelProps:t,title:s}){return this.shouldDisplayForm(e)||null!=t&&t.renderFooter||null!=t&&t.renderHeader?(0,h.tZ)(p.Z,{title:s,fields:e,...t}):null}render(){const{access:e,fields:t,title:s,forms:n,disabled:o,features:i,additionalFieldProps:a,renderFooter:l,renderHeader:d,location:c,...p}=this.props,m={access:e,disabled:o,features:i,additionalFieldProps:a,renderFooter:l,renderHeader:d,highlighted:this.state.highlighted};return(0,h.BX)("div",{...p,children:[void 0!==n&&n.map(((e,t)=>(0,h.tZ)(r.Fragment,{children:this.renderForm({formPanelProps:m,...e})},t))),void 0===n&&void 0!==t&&this.renderForm({fields:t,formPanelProps:m,title:s})]})}}m.displayName="JsonForm";const u=(0,o.withRouter)(m)},"./app/views/settings/project/permissionAlert.tsx":(e,t,s)=>{s.d(t,{Z:()=>d}),s("../node_modules/react/index.js");var n=s("./app/components/acl/access.tsx"),r=s("./app/components/alert.tsx"),o=s("./app/icons/index.tsx"),i=s("./app/locale.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=({access:e=["project:write"],...t})=>(0,a.tZ)(n.Z,{access:e,children:({hasAccess:e})=>!e&&(0,a.tZ)(r.Z,{type:"warning",icon:(0,a.tZ)(o.FC,{size:"xs"}),...t,children:(0,i.t)("These settings can only be edited by users with the organization owner, manager, or admin role.")})});l.displayName="PermissionAlert";const d=l},"./app/views/settings/projectGeneralSettings.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>C});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/react/index.js")),o=s("../node_modules/react-router/es/index.js"),i=s("./app/actionCreators/projects.tsx"),a=s("./app/actions/projectActions.tsx"),l=s("./app/components/button.tsx"),d=s("./app/components/confirm.tsx"),c=s("./app/components/panels/index.tsx"),p=s("./app/data/forms/projectGeneralSettings.tsx"),h=s("./app/locale.tsx"),m=s("./app/stores/projectsStore.tsx"),u=s("./app/utils/handleXhrErrorResponse.tsx"),f=s("./app/utils/recreateRoute.tsx"),g=s("./app/utils/routeTitle.tsx"),j=s("./app/utils/withOrganization.tsx"),Z=s("./app/views/asyncView.tsx"),v=s("./app/views/settings/components/forms/field/index.tsx"),x=s("./app/views/settings/components/forms/form.tsx"),b=s("./app/views/settings/components/forms/jsonForm.tsx"),y=s("./app/views/settings/components/forms/textField.tsx"),w=s("./app/views/settings/components/settingsPageHeader.tsx"),P=s("./app/views/settings/components/text/textBlock.tsx"),_=s("./app/views/settings/project/permissionAlert.tsx"),S=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class T extends Z.Z{constructor(...e){super(...e),(0,n.Z)(this,"_form",{}),(0,n.Z)(this,"handleTransferFieldChange",((e,t)=>{this._form[e]=t})),(0,n.Z)(this,"handleRemoveProject",(()=>{const{orgId:e}=this.props.params,t=this.state.data;t&&(0,i.rR)(this.api,e,t).then((()=>{window.location.assign("/")}),(0,u.Z)("Unable to remove project"))})),(0,n.Z)(this,"handleTransferProject",(async()=>{const{orgId:e}=this.props.params,t=this.state.data;if(t&&!("string"!=typeof this._form.email||this._form.email.length<1))try{await(0,i.bL)(this.api,e,t,this._form.email),window.location.assign("/")}catch(e){e.status>=500&&(0,u.Z)("Unable to transfer project")(e)}})),(0,n.Z)(this,"isProjectAdmin",(()=>new Set(this.props.organization.access).has("project:admin")))}getTitle(){const{projectId:e}=this.props.params;return(0,g.Z)((0,h.t)("Project Settings"),e,!1)}getEndpoints(){const{orgId:e,projectId:t}=this.props.params;return[["data","/projects/".concat(e,"/").concat(t,"/")]]}renderRemoveProject(){const e=this.state.data,t=this.isProjectAdmin(),{isInternal:s}=e;return(0,S.BX)(v.Z,{label:(0,h.t)("Remove Project"),help:(0,h._N)("Remove the [project] project and all related data. [linebreak] Careful, this action cannot be undone.",{project:(0,S.tZ)("strong",{children:e.slug}),linebreak:(0,S.tZ)("br",{})}),children:[!t&&(0,h.t)("You do not have the required permission to remove this project."),s&&(0,h.t)("This project cannot be removed. It is used internally by the Sentry server."),t&&!s&&(0,S.tZ)(d.Z,{onConfirm:this.handleRemoveProject,priority:"danger",confirmText:(0,h.t)("Remove project"),message:(0,S.BX)("div",{children:[(0,S.tZ)(P.Z,{children:(0,S.tZ)("strong",{children:(0,h.t)("Removing this project is permanent and cannot be undone!")})}),(0,S.tZ)(P.Z,{children:(0,h.t)("This will also remove all associated event data.")})]}),children:(0,S.tZ)("div",{children:(0,S.tZ)(l.ZP,{className:"ref-remove-project",type:"button",priority:"danger",children:(0,h.t)("Remove Project")})})})]})}renderTransferProject(){const e=this.state.data,t=this.isProjectAdmin(),{isInternal:s}=e;return(0,S.BX)(v.Z,{label:(0,h.t)("Transfer Project"),help:(0,h._N)("Transfer the [project] project and all related data. [linebreak] Careful, this action cannot be undone.",{project:(0,S.tZ)("strong",{children:e.slug}),linebreak:(0,S.tZ)("br",{})}),children:[!t&&(0,h.t)("You do not have the required permission to transfer this project."),s&&(0,h.t)("This project cannot be transferred. It is used internally by the Sentry server."),t&&!s&&(0,S.tZ)(d.Z,{onConfirm:this.handleTransferProject,priority:"danger",confirmText:(0,h.t)("Transfer project"),renderMessage:({confirm:e})=>(0,S.BX)("div",{children:[(0,S.tZ)(P.Z,{children:(0,S.tZ)("strong",{children:(0,h.t)("Transferring this project is permanent and cannot be undone!")})}),(0,S.tZ)(P.Z,{children:(0,h.t)("Please enter the email of an organization owner to whom you would like to transfer this project.")}),(0,S.tZ)(c.s_,{children:(0,S.tZ)(x.Z,{hideFooter:!0,onFieldChange:this.handleTransferFieldChange,onSubmit:(t,s,n,r)=>{r.stopPropagation(),e()},children:(0,S.tZ)(y.Z,{name:"email",label:(0,h.t)("Organization Owner"),placeholder:"admin@example.com",required:!0,help:(0,h.t)("A request will be emailed to this address, asking the organization owner to accept the project transfer.")})})})]}),children:(0,S.tZ)("div",{children:(0,S.tZ)(l.ZP,{className:"ref-transfer-project",type:"button",priority:"danger",children:(0,h.t)("Transfer Project")})})})]})}renderBody(){var e;const{organization:t}=this.props,s=this.state.data,{orgId:n,projectId:r}=this.props.params,o="/projects/".concat(n,"/").concat(r,"/"),l=new Set(t.access),d={additionalFieldProps:{organization:t},features:new Set(t.features),access:l,disabled:!l.has("project:write")},m=s.teams.length?null===(e=s.teams)||void 0===e?void 0:e[0]:void 0;return(0,S.BX)("div",{children:[(0,S.tZ)(w.Z,{title:(0,h.t)("Project Settings")}),(0,S.tZ)(_.Z,{}),(0,S.BX)(x.Z,{saveOnBlur:!0,allowUndo:!0,initialData:{...s,team:m},apiMethod:"PUT",apiEndpoint:o,onSubmitSuccess:e=>{this.setState({data:e}),r!==e.slug&&((0,i.TA)(r,e.slug),this.props.onChangeSlug(e.slug)),a.Z.updateSuccess(e)},children:[(0,S.tZ)(b.Z,{...d,title:(0,h.t)("Project Details"),fields:[p.fields.slug,p.fields.platform]}),(0,S.tZ)(b.Z,{...d,title:(0,h.t)("Email"),fields:[p.fields.subjectPrefix]}),(0,S.tZ)(b.Z,{...d,title:(0,h.t)("Event Settings"),fields:[p.fields.resolveAge]}),(0,S.tZ)(b.Z,{...d,title:(0,h.t)("Client Security"),fields:[p.fields.allowedDomains,p.fields.scrapeJavaScript,p.fields.securityToken,p.fields.securityTokenHeader,p.fields.verifySSL],renderHeader:()=>(0,S.tZ)(c.aU,{type:"info",children:(0,S.BX)(P.Z,{noMargin:!0,children:[(0,h._N)("Configure origin URLs which Sentry should accept events from. This is used for communication with clients like [link].",{link:(0,S.tZ)("a",{href:"https://github.com/getsentry/sentry-javascript",children:"sentry-javascript"})})," ",(0,h._N)("This will restrict requests based on the [Origin] and [Referer] headers.",{Origin:(0,S.tZ)("code",{children:"Origin"}),Referer:(0,S.tZ)("code",{children:"Referer"})})]})})})]}),(0,S.BX)(c.s_,{children:[(0,S.tZ)(c.V9,{children:(0,h.t)("Project Administration")}),this.renderRemoveProject(),this.renderTransferProject()]})]})}}class F extends r.Component{constructor(...e){super(...e),(0,n.Z)(this,"changedSlug",void 0),(0,n.Z)(this,"unsubscribe",m.Z.listen((()=>this.onProjectsUpdate()),void 0))}componentWillUnmount(){this.unsubscribe()}onProjectsUpdate(){this.changedSlug&&m.Z.getBySlug(this.changedSlug)&&o.browserHistory.replace((0,f.Z)("",{...this.props,params:{...this.props.params,projectId:this.changedSlug}}))}render(){return(0,S.tZ)(T,{onChangeSlug:e=>this.changedSlug=e,...this.props})}}F.displayName="ProjectGeneralSettingsContainer";const C=(0,j.Z)(F)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_projectGeneralSettings_tsx.6c4c14f97ab691df0ddbb325b0c43e89.js.map