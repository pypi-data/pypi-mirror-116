"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_organizationApiKeys_index_tsx"],{"./app/components/links/linkWithConfirmation.tsx":(e,t,s)=>{s.d(t,{Z:()=>d});var n=s("../node_modules/react/index.js"),i=s("../node_modules/classnames/index.js"),o=s.n(i),a=s("./app/components/confirm.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class c extends n.PureComponent{render(){const{className:e,disabled:t,title:s,children:n,...i}=this.props;return(0,r.tZ)(a.Z,{...i,disabled:t,children:(0,r.tZ)("a",{href:"#",className:o()(e||"",{disabled:t}),title:s,children:n})})}}c.displayName="LinkWithConfirmation";const d=c},"./app/utils/recreateRoute.tsx":(e,t,s)=>{s.d(t,{Z:()=>a});var n=s("../node_modules/lodash/findLastIndex.js"),i=s.n(n),o=s("./app/utils/replaceRouterParams.tsx");function a(e,t){var s,n;const{routes:a,params:r,location:c,stepBack:d}=t,p=a.map((({path:e})=>e||""));let l,m;"string"!=typeof e?(m=a.indexOf(e)+1,l=i()(p.slice(0,m),(e=>"/"===e[0]))):l=i()(p,(e=>"/"===e[0]));let u=p.slice(l,m);void 0!==d&&(u=u.slice(0,d));const h=null!==(s=null==c?void 0:c.search)&&void 0!==s?s:"",y=null!==(n=null==c?void 0:c.hash)&&void 0!==n?n:"",x="".concat(u.join("")).concat("string"!=typeof e?"":e).concat(h).concat(y);return(0,o.Z)(x,r)}},"./app/utils/routeTitle.tsx":(e,t,s)=>{s.d(t,{Z:()=>n});const n=function(e,t,s=!0,n){const i="".concat(e," - ").concat(t),o=n?"".concat(i," - ").concat(n):i;return s?"".concat(o," - Sentry"):o}},"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>r}),s("../node_modules/react/index.js");var n=s("../node_modules/react-document-title/index.js"),i=s.n(n),o=s("./app/components/asyncComponent.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class r extends o.Z{getTitle(){return""}render(){const e=this.getTitle();return(0,a.tZ)(i(),{title:"".concat(e?"".concat(e," - "):"","Sentry"),children:this.renderComponent()})}}r.displayName="AsyncView"},"./app/views/settings/organizationApiKeys/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>C});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react-router/es/index.js")),o=s("./app/actionCreators/indicator.tsx"),a=s("./app/locale.tsx"),r=s("./app/utils/recreateRoute.tsx"),c=s("./app/utils/routeTitle.tsx"),d=s("./app/utils/withOrganization.tsx"),p=s("./app/views/asyncView.tsx"),l=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),m=s("../node_modules/react/index.js"),u=s("./app/components/alertLink.tsx"),h=s("./app/components/autoSelectText.tsx"),y=s("./app/components/button.tsx"),x=s("./app/components/links/externalLink.tsx"),g=s("./app/components/links/link.tsx"),Z=s("./app/components/links/linkWithConfirmation.tsx"),k=s("./app/components/panels/index.tsx"),b=s("./app/icons/index.tsx"),v=s("./app/styles/input.tsx"),w=s("./app/views/settings/components/settingsPageHeader.tsx"),A=s("./app/views/settings/components/text/textBlock.tsx"),f=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),j={name:"1lo1a34",styles:"position:relative;top:2px"};function _({params:e,routes:t,keys:s,busy:n,loading:i,onAddApiKey:o,onRemove:c}){const d=s&&s.length,p=(0,f.tZ)(y.ZP,{priority:"primary",size:"small",icon:(0,f.tZ)(b.N_,{size:"xs",isCircled:!0}),busy:n,disabled:n,onClick:o,children:(0,a.t)("New API Key")});return(0,f.BX)("div",{children:[(0,f.tZ)(w.Z,{title:(0,a.t)("API Keys"),action:p}),(0,f.tZ)(A.Z,{children:(0,a._N)("API keys grant access to the [api:developer web API].\n          If you're looking to configure a Sentry client, you'll need a\n          client key which is available in your project settings.",{api:(0,f.tZ)(x.Z,{href:"https://docs.sentry.io/api/"})})}),(0,f.tZ)(u.Z,{to:"/settings/account/api/auth-tokens/",priority:"info",children:(0,a._N)("Until Sentry supports OAuth, you might want to switch to using [tokens:Auth Tokens] instead.",{tokens:(0,f.tZ)("u",{})})}),(0,f.tZ)(k.KB,{isLoading:i,isEmpty:!d,emptyMessage:(0,a.t)("No API keys for this organization"),headers:[(0,a.t)("Name"),(0,a.t)("Key"),(0,a.t)("Actions")],children:s&&s.map((({id:s,key:n,label:i})=>{const o=(0,r.Z)("".concat(s,"/"),{params:e,routes:t});return(0,f.BX)(m.Fragment,{children:[(0,f.tZ)(P,{children:(0,f.tZ)(g.Z,{to:o,children:i})}),(0,f.tZ)("div",{children:(0,f.tZ)(I,{readOnly:!0,children:n})}),(0,f.tZ)(P,{children:(0,f.tZ)(Z.Z,{"aria-label":(0,a.t)("Remove API Key"),className:"btn btn-default btn-sm",onConfirm:()=>c(s),message:(0,a.t)("Are you sure you want to remove this API key?"),title:(0,a.t)("Remove API Key?"),children:(0,f.tZ)(b.Fz,{size:"xs",css:j})})})]},n)}))})]})}_.displayName="OrganizationApiKeysList";const P=(0,l.Z)("div",{target:"e9c1bws1"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),I=(0,l.Z)(h.Z,{target:"e9c1bws0"})((e=>(0,v.T)(e)),";"),K=_;class z extends p.Z{constructor(...e){super(...e),(0,n.Z)(this,"handleRemove",(async e=>{const t=[...this.state.keys];this.setState((t=>({keys:t.keys.filter((({id:t})=>t!==e))})));try{await this.api.requestPromise("/organizations/".concat(this.props.params.orgId,"/api-keys/").concat(e,"/"),{method:"DELETE",data:{}})}catch{this.setState({keys:t,busy:!1}),(0,o.Iw)((0,a.t)("Error removing key"))}})),(0,n.Z)(this,"handleAddApiKey",(async()=>{this.setState({busy:!0});try{const e=await this.api.requestPromise("/organizations/".concat(this.props.params.orgId,"/api-keys/"),{method:"POST",data:{}});e&&(this.setState({busy:!1}),i.browserHistory.push((0,r.Z)("".concat(e.id,"/"),{params:this.props.params,routes:this.props.routes})),(0,o.S9)((0,a.t)('Created a new API key "'.concat(e.label,'"'))))}catch{this.setState({busy:!1})}}))}getEndpoints(){return[["keys","/organizations/".concat(this.props.params.orgId,"/api-keys/")]]}getTitle(){return(0,c.Z)((0,a.t)("API Keys"),this.props.organization.slug,!1)}renderLoading(){return this.renderBody()}renderBody(){return(0,f.tZ)(K,{loading:this.state.loading,busy:this.state.busy,keys:this.state.keys,onRemove:this.handleRemove,onAddApiKey:this.handleAddApiKey,...this.props})}}const C=(0,d.Z)(z)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_organizationApiKeys_index_tsx.e67c35a769df2f6b4a22237fba9468b9.js.map