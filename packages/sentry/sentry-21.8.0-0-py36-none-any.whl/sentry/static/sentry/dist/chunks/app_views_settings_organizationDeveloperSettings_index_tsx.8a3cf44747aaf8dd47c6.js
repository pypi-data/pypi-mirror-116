(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_organizationDeveloperSettings_index_tsx"],{"./app/components/confirmDelete.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>c});var n=s("../node_modules/react/index.js"),o=s("./app/components/alert.tsx"),i=s("./app/components/confirm.tsx"),r=s("./app/locale.tsx"),a=s("./app/views/settings/components/forms/controls/input.tsx"),l=s("./app/views/settings/components/forms/field/index.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const p=({message:e,confirmInput:t,...s})=>(0,d.tZ)(i.Z,{...s,bypass:!1,disableConfirmButton:!0,renderMessage:({disableConfirmButton:s})=>(0,d.BX)(n.Fragment,{children:[(0,d.tZ)(o.Z,{type:"error",children:e}),(0,d.tZ)(l.Z,{flexibleControlStateSize:!0,inline:!1,label:(0,r.t)("Please enter %s to confirm the deletion",(0,d.tZ)("code",{children:t})),children:(0,d.tZ)(a.Z,{type:"text",placeholder:t,onChange:e=>s(e.target.value!==t)})})]})});p.displayName="ConfirmDelete";const c=p},"./app/utils/routeTitle.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});const n=function(e,t,s=!0,n){const o="".concat(e," - ").concat(t),i=n?"".concat(o," - ").concat(n):o;return s?"".concat(i," - Sentry"):i}},"./app/views/asyncView.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a}),s("../node_modules/react/index.js");var n=s("../node_modules/react-document-title/index.js"),o=s.n(n),i=s("./app/components/asyncComponent.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class a extends i.Z{getTitle(){return""}render(){const e=this.getTitle();return(0,r.tZ)(o(),{title:"".concat(e?"".concat(e," - "):"","Sentry"),children:this.renderComponent()})}}a.displayName="AsyncView"},"./app/views/settings/components/forms/formPanel.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/react/index.js"),i=s("./app/components/panels/index.tsx"),r=s("./app/utils/sanitizeQuerySelector.tsx"),a=s("./app/views/settings/components/forms/fieldFromConfig.tsx"),l=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class d extends o.Component{render(){const{title:e,fields:t,access:s,disabled:n,additionalFieldProps:o,renderFooter:d,renderHeader:p,...c}=this.props;return(0,l.BX)(i.s_,{id:"string"==typeof e?(0,r.m)(e):void 0,children:[e&&(0,l.tZ)(i.V9,{children:e}),(0,l.BX)(i.N,{children:["function"==typeof p&&p({title:e,fields:t}),t.map((e=>{if("function"==typeof e)return e();const{defaultValue:t,...i}=e;return!0===n&&(i.disabled=!0,i.disabledReason=void 0),(0,l.tZ)(a.Z,{access:s,disabled:n,...c,...o,field:i,highlighted:this.props.highlighted==="#".concat(e.name)},e.name)})),"function"==typeof d&&d({title:e,fields:t})]})]})}}d.displayName="FormPanel",(0,n.Z)(d,"defaultProps",{additionalFieldProps:{}})},"./app/views/settings/components/forms/jsonForm.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>m});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),i=s("../node_modules/react-router/es/index.js"),r=s("../node_modules/@sentry/minimal/esm/index.js"),a=s("../node_modules/scroll-to-element/index.js"),l=s.n(a),d=s("./app/utils.tsx"),p=s("./app/utils/sanitizeQuerySelector.tsx"),c=s("./app/views/settings/components/forms/formPanel.tsx"),u=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class h extends o.Component{constructor(...e){var t;super(...e),(0,n.Z)(this,"state",{highlighted:null===(t=this.props.location)||void 0===t?void 0:t.hash})}componentDidMount(){this.scrollToHash()}UNSAFE_componentWillReceiveProps(e){if(this.props.location.hash!==e.location.hash){const t=e.location.hash;this.scrollToHash(t),this.setState({highlighted:t})}}scrollToHash(e){var t;const s=e||(null===(t=this.props.location)||void 0===t?void 0:t.hash);if(s)try{l()((0,p.m)(decodeURIComponent(s)),{align:"middle",offset:-100})}catch(e){r.Tb(e)}}shouldDisplayForm(e){const t=e.filter((e=>"function"!=typeof e&&(0,d.ri)(null==e?void 0:e.visible)));if(e.length===t.length){const{additionalFieldProps:e,...s}=this.props;return!t.every((t=>"function"==typeof t.visible?!t.visible({...s,...e}):!t.visible))}return!0}renderForm({fields:e,formPanelProps:t,title:s}){return this.shouldDisplayForm(e)||null!=t&&t.renderFooter||null!=t&&t.renderHeader?(0,u.tZ)(c.Z,{title:s,fields:e,...t}):null}render(){const{access:e,fields:t,title:s,forms:n,disabled:i,features:r,additionalFieldProps:a,renderFooter:l,renderHeader:d,location:p,...c}=this.props,h={access:e,disabled:i,features:r,additionalFieldProps:a,renderFooter:l,renderHeader:d,highlighted:this.state.highlighted};return(0,u.BX)("div",{...c,children:[void 0!==n&&n.map(((e,t)=>(0,u.tZ)(o.Fragment,{children:this.renderForm({formPanelProps:h,...e})},t))),void 0===n&&void 0!==t&&this.renderForm({fields:t,formPanelProps:h,title:s})]})}}h.displayName="JsonForm";const m=(0,i.withRouter)(h)},"./app/views/settings/organizationDeveloperSettings/index.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Y});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("./app/actionCreators/indicator.tsx")),i=s("./app/locale.tsx"),r=s("./app/components/acl/access.tsx"),a=s("./app/components/alertLink.tsx"),l=s("./app/components/button.tsx"),d=s("./app/components/panels/index.tsx"),p=s("./app/icons/index.tsx"),c=s("./app/utils/routeTitle.tsx"),u=s("./app/utils/withOrganization.tsx"),h=s("./app/views/asyncView.tsx"),m=s("./app/views/settings/components/emptyMessage.tsx"),g=s("./app/views/settings/components/settingsPageHeader.tsx"),f=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),b=s("../node_modules/react/index.js"),x=s("../node_modules/react-router/es/index.js"),Z=s("./app/actionCreators/modal.tsx"),y=(s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/lodash/intersection.js")),v=s.n(y),w=s("./app/constants/index.tsx"),_=s("./app/styles/space.tsx"),j=s("./app/views/settings/components/forms/form.tsx"),P=s("./app/views/settings/components/forms/jsonForm.tsx"),z=s("./app/views/settings/components/forms/model.tsx"),S=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class k extends z.Z{getTransformedData(){const e=this.getData();return{questionnaire:Array.from(this.fieldDescriptor.values()).map((t=>({question:t.meta||t.label,answer:e[t.name]})))}}}class I extends b.Component{constructor(...e){super(...e),(0,n.Z)(this,"form",new k),(0,n.Z)(this,"handleSubmitSuccess",(()=>{(0,o.S9)((0,i.t)("Request to publish %s successful.",this.props.app.slug)),this.props.closeModal()})),(0,n.Z)(this,"handleSubmitError",(e=>{var t;(0,o.Iw)((0,i._N)("Request to publish [app] fails. [detail]",{app:this.props.app.slug,detail:null==e||null===(t=e.responseJSON)||void 0===t?void 0:t.detail}))}))}get formFields(){const{app:e}=this.props,t=(e=>{const t=[];for(const s of w.yh){let n;for(const t in s.choices){const o=s.choices[t],i=v()(o.scopes,e);i.length>0&&i.length===o.scopes.length&&(!n||i.length>n.scopes.length)&&(n=o)}if(n){const e=n.label.replace("Read & Write","Write");t.push("".concat(s.resource," ").concat(e))}}return t})(e.scopes),s="Please justify why you are requesting each of the following permissions: ",n="".concat(s).concat(t.join(", "),"."),o=(0,S.BX)(b.Fragment,{children:[(0,S.tZ)(C,{children:s}),t.map(((e,t)=>(0,S.BX)(b.Fragment,{children:[t>0&&", "," ",(0,S.tZ)(B,{children:e})]},e))),"."]}),i=[{type:"textarea",required:!0,label:"What does your integration do? Please be as detailed as possible.",autosize:!0,rows:1,inline:!1,name:"question0"},{type:"textarea",required:!0,label:"What value does it offer customers?",autosize:!0,rows:1,inline:!1,name:"question1"},{type:"textarea",required:!0,label:"Do you operate the web service your integration communicates with?",autosize:!0,rows:1,inline:!1,name:"question2"}];return t.length>0&&i.push({type:"textarea",required:!0,label:o,autosize:!0,rows:1,inline:!1,meta:n,name:"question3"}),i}render(){const{app:e,Header:t,Body:s}=this.props,n="/sentry-apps/".concat(e.slug,"/publish-request/"),o=[{title:(0,i.t)("Questions to answer"),fields:this.formFields}];return(0,S.BX)(b.Fragment,{children:[(0,S.tZ)(t,{children:(0,i.t)("Publish Request Questionnaire")}),(0,S.BX)(s,{children:[(0,S.tZ)(F,{children:(0,i.t)("Please fill out this questionnaire in order to get your integration evaluated for publication.\n              Once your integration has been approved, users outside of your organization will be able to install it.")}),(0,S.tZ)(j.Z,{allowUndo:!0,apiMethod:"POST",apiEndpoint:n,onSubmitSuccess:this.handleSubmitSuccess,onSubmitError:this.handleSubmitError,model:this.form,submitLabel:(0,i.t)("Request Publication"),onCancel:()=>this.props.closeModal(),children:(0,S.tZ)(P.Z,{forms:o})})]})]})}}I.displayName="SentryAppPublishRequestModal";const F=(0,f.Z)("div",{target:"e14x9wf02"})("margin:",(0,_.Z)(1.5)," 0px;font-size:18px;"),C=(0,f.Z)("span",{target:"e14x9wf01"})({name:"1gt2cgk",styles:"line-height:24px"}),B=(0,f.Z)("code",{target:"e14x9wf00"})({name:"1gt2cgk",styles:"line-height:24px"});var D=s("./app/plugins/components/pluginIcon.tsx"),q=s("./app/components/confirmDelete.tsx");const R=({org:e,app:t,showPublish:s,showDelete:n,onPublish:o,onDelete:r,disablePublishReason:a,disableDeleteReason:l})=>{const d=(0,S.tZ)(N,{size:"small",icon:(0,S.tZ)(p.BW,{}),to:"/settings/".concat(e.slug,"/developer-settings/").concat(t.slug,"/dashboard/"),children:(0,i.t)("Dashboard")}),c=s?(0,S.tZ)(N,{disabled:!!a,title:a,icon:(0,S.tZ)(p.XK,{}),size:"small",onClick:o,children:(0,i.t)("Publish")}):null,u=(0,i.t)("Deleting ".concat(t.slug," will also delete any and all of its installations.          This is a permanent action. Do you wish to continue?")),h=n?l?(0,S.tZ)(N,{disabled:!0,title:l,size:"small",icon:(0,S.tZ)(p.Fz,{}),label:"Delete"}):r&&(0,S.tZ)(q.Z,{message:u,confirmInput:t.slug,priority:"danger",onConfirm:()=>r(t),children:(0,S.tZ)(N,{size:"small",icon:(0,S.tZ)(p.Fz,{}),label:"Delete"})}):null;return(0,S.BX)(A,{children:[d,c,h]})};R.displayName="ActionButtons";const A=(0,f.Z)("div",{target:"eg64e9n1"})("flex-direction:row;display:flex;&>*{margin-left:",(0,_.Z)(.5),";}"),N=(0,f.Z)(l.ZP,{target:"eg64e9n0"})("color:",(e=>e.theme.subText),";"),X=R,T=({organization:e,app:t,onClickRemove:s,onClickPublish:n})=>{const o="internal"===t.status;return(0,S.tZ)(r.Z,{access:["org:admin"],children:({hasAccess:r})=>{let a="",l="";return"published"===t.status?(a=(0,i.t)("Published integrations cannot be re-published."),l=(0,i.t)("Published integrations cannot be removed.")):r||(a=(0,i.t)("Organization owner permissions are required for this action."),l=(0,i.t)("Organization owner permissions are required for this action.")),(0,S.tZ)(X,{org:e,app:t,showPublish:!o,showDelete:!0,onPublish:n,onDelete:s,disablePublishReason:a,disableDeleteReason:l})}})};T.displayName="SentryApplicationRowButtons";const M=T;class E extends b.PureComponent{constructor(...e){super(...e),(0,n.Z)(this,"handlePublish",(()=>{const{app:e}=this.props;(0,Z.openModal)((t=>(0,S.tZ)(I,{app:e,...t})))}))}get isInternal(){return"internal"===this.props.app.status}hideStatus(){return this.isInternal}renderStatus(){const{app:e}=this.props;return this.hideStatus()?null:(0,S.tZ)(K,{status:e.status})}render(){const{app:e,organization:t,onRemoveApp:s}=this.props;return(0,S.tZ)(L,{"data-test-id":e.slug,children:(0,S.BX)(V,{children:[(0,S.tZ)(D.ZP,{size:36,pluginId:e.slug}),(0,S.BX)(W,{children:[(0,S.tZ)(Q,{hideStatus:this.hideStatus(),children:(0,S.tZ)(x.Link,{to:"/settings/".concat(t.slug,"/developer-settings/").concat(e.slug,"/"),children:e.name})}),(0,S.tZ)(U,{children:this.renderStatus()})]}),(0,S.tZ)(O,{children:(0,S.tZ)(M,{organization:t,app:e,onClickRemove:s,onClickPublish:this.handlePublish})})]})})}}E.displayName="SentryApplicationRow";const H=(0,f.Z)("div",{target:"e1go2kpk8"})({name:"zjik7",styles:"display:flex"}),O=(0,f.Z)("div",{target:"e1go2kpk7"})(""),L=(0,f.Z)(d.Lv,{target:"e1go2kpk6"})({name:"ehbzc8",styles:"flex-direction:column;padding:5px"}),V=(0,f.Z)(H,{target:"e1go2kpk5"})({name:"1yplio6",styles:"justify-content:center;padding:10px"}),W=(0,f.Z)("div",{target:"e1go2kpk4"})({name:"3mxc9l",styles:"padding-left:15px;padding-right:15px;flex:1"}),U=(0,f.Z)(H,{target:"e1go2kpk3"})({name:"p4xtjg",styles:"align-items:center;margin-top:6px;font-size:0.8em"}),Q=(0,f.Z)("div",{target:"e1go2kpk2"})("margin-top:",(e=>e.hideStatus?"10px":"0px"),";"),J=(0,f.Z)(H,{target:"e1go2kpk1"})({name:"1h3rtzg",styles:"align-items:center"}),K=(0,f.Z)((({status:e,...t})=>(0,S.tZ)(J,{children:(0,S.tZ)("div",{...t,children:(0,i.t)("".concat(e))})})),{target:"e1go2kpk0"})("color:",(e=>"published"===e.status?e.theme.success:e.theme.gray300),";font-weight:light;margin-right:",(0,_.Z)(.75),";");class G extends h.Z{constructor(...e){super(...e),(0,n.Z)(this,"removeApp",(e=>{const t=this.state.applications.filter((t=>t.slug!==e.slug));(function(e,t){(0,o.E3)();const s=e.requestPromise("/sentry-apps/".concat(t.slug,"/"),{method:"DELETE"});return s.then((()=>{(0,o.S9)((0,i.t)("%s successfully removed.",t.slug))}),(()=>{(0,o.B8)(),(0,o.Iw)((0,i.t)("Unable to remove %s integration",t.slug))})),s})(this.api,e).then((()=>{this.setState({applications:t})}),(()=>{}))})),(0,n.Z)(this,"renderApplicationRow",(e=>{const{organization:t}=this.props;return(0,S.tZ)(E,{app:e,organization:t,onRemoveApp:this.removeApp},e.uuid)}))}getTitle(){const{orgId:e}=this.props.params;return(0,c.Z)((0,i.t)("Developer Settings"),e,!1)}getEndpoints(){const{orgId:e}=this.props.params;return[["applications","/organizations/".concat(e,"/sentry-apps/")]]}renderInternalIntegrations(){const{orgId:e}=this.props.params,{organization:t}=this.props,s=this.state.applications.filter((e=>"internal"===e.status)),n=0===s.length,o=(0,i.t)("Manager or Owner permissions required to add an internal integration."),a=(0,S.tZ)(r.Z,{organization:t,access:["org:write"],children:({hasAccess:t})=>(0,S.tZ)(l.ZP,{priority:"primary",disabled:!t,title:t?void 0:o,size:"small",to:"/settings/".concat(e,"/developer-settings/new-internal/"),icon:(0,S.tZ)(p.N_,{size:"xs",isCircled:!0}),children:(0,i.t)("New Internal Integration")})});return(0,S.BX)(d.s_,{children:[(0,S.BX)(d.V9,{hasButtons:!0,children:[(0,i.t)("Internal Integrations"),a]}),(0,S.tZ)(d.N,{children:n?(0,S.tZ)(m.Z,{children:(0,i.t)("No internal integrations have been created yet.")}):s.map(this.renderApplicationRow)})]})}renderExernalIntegrations(){const{orgId:e}=this.props.params,{organization:t}=this.props,s=this.state.applications.filter((e=>"internal"!==e.status)),n=0===s.length,o=(0,i.t)("Manager or Owner permissions required to add a public integration."),a=(0,S.tZ)(r.Z,{organization:t,access:["org:write"],children:({hasAccess:t})=>(0,S.tZ)(l.ZP,{priority:"primary",disabled:!t,title:t?void 0:o,size:"small",to:"/settings/".concat(e,"/developer-settings/new-public/"),icon:(0,S.tZ)(p.N_,{size:"xs",isCircled:!0}),children:(0,i.t)("New Public Integration")})});return(0,S.BX)(d.s_,{children:[(0,S.BX)(d.V9,{hasButtons:!0,children:[(0,i.t)("Public Integrations"),a]}),(0,S.tZ)(d.N,{children:n?(0,S.tZ)(m.Z,{children:(0,i.t)("No public integrations have been created yet.")}):s.map(this.renderApplicationRow)})]})}renderBody(){return(0,S.BX)("div",{children:[(0,S.tZ)(g.Z,{title:(0,i.t)("Developer Settings")}),(0,S.tZ)(a.Z,{href:"https://docs.sentry.io/product/integrations/integration-platform/",children:(0,i.t)("Have questions about the Integration Platform? Learn more about it in our docs.")}),this.renderExernalIntegrations(),this.renderInternalIntegrations()]})}}const Y=(0,u.Z)(G)},"../node_modules/lodash/_baseIntersection.js":(e,t,s)=>{var n=s("../node_modules/lodash/_SetCache.js"),o=s("../node_modules/lodash/_arrayIncludes.js"),i=s("../node_modules/lodash/_arrayIncludesWith.js"),r=s("../node_modules/lodash/_arrayMap.js"),a=s("../node_modules/lodash/_baseUnary.js"),l=s("../node_modules/lodash/_cacheHas.js"),d=Math.min;e.exports=function(e,t,s){for(var p=s?i:o,c=e[0].length,u=e.length,h=u,m=Array(u),g=1/0,f=[];h--;){var b=e[h];h&&t&&(b=r(b,a(t))),g=d(b.length,g),m[h]=!s&&(t||c>=120&&b.length>=120)?new n(h&&b):void 0}b=e[0];var x=-1,Z=m[0];e:for(;++x<c&&f.length<g;){var y=b[x],v=t?t(y):y;if(y=s||0!==y?y:0,!(Z?l(Z,v):p(f,v,s))){for(h=u;--h;){var w=m[h];if(!(w?l(w,v):p(e[h],v,s)))continue e}Z&&Z.push(v),f.push(y)}}return f}},"../node_modules/lodash/_castArrayLikeObject.js":(e,t,s)=>{var n=s("../node_modules/lodash/isArrayLikeObject.js");e.exports=function(e){return n(e)?e:[]}},"../node_modules/lodash/intersection.js":(e,t,s)=>{var n=s("../node_modules/lodash/_arrayMap.js"),o=s("../node_modules/lodash/_baseIntersection.js"),i=s("../node_modules/lodash/_baseRest.js"),r=s("../node_modules/lodash/_castArrayLikeObject.js"),a=i((function(e){var t=n(e,r);return t.length&&t[0]===e[0]?o(t):[]}));e.exports=a}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_organizationDeveloperSettings_index_tsx.11dac5119192d51f11d608edeabdf2ec.js.map